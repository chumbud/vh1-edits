(function(){var n=function(){function i(){(typeof window.Flux4!="object"||typeof window.Flux!="object"||_.isNull(window.Flux))&&(window.Flux4={},window.Flux={}),Flux.createWidget=function(){var u=arguments,r,i;document.readyState!="complete"&&(r=arguments.length==2&&typeof arguments[1]!="function"||arguments.length==3?arguments[1]:{},r.container||r.containerId||(i="Flux4DebugWidget_"+t,t++,document.write('<div id="'+i+'"><\/div>'),arguments.length==1?u=[arguments[0],{containerId:i}]:arguments.length==2&&typeof arguments[1]=="function"?u=[arguments[0],{containerId:i},arguments[1]]:r.containerId=i)),n.push(u)},Flux4.createWidget=function(){var u=arguments,r,i;document.readyState!="complete"&&(r=arguments.length==2&&typeof arguments[1]!="function"||arguments.length==3?arguments[1]:{},r.container||r.containerId||(i="Flux4DebugWidget_"+t,t++,document.write('<div id="'+i+'"><\/div>'),arguments.length==1?u=[arguments[0],{containerId:i}]:arguments.length==2&&typeof arguments[1]=="function"?u=[arguments[0],{containerId:i},arguments[1]]:r.containerId=i)),n.push(u)}}function r(){for(var t=document.getElementsByTagName("script"),i=new RegExp("http://widgets[34].(flux-dev.com|flux-staging.com|flux.com)/(Core|Loader)","i"),n=0;n<t.length;n++)if(i.test(t[n].getAttribute("src")||""))return t[n]}function u(){return typeof(window.Flux4=="object"&&!!window.Flux4)&&window.Flux=="object"&&!!window.Flux}var n=[],t=1;return{reloadOnDebug:function(t){var h,o,c,s,f,e;return!u()&&window.location.href.toLowerCase().indexOf(t.toLowerCase())>-1?(i(),h=r(),o=h.getAttribute("id"),o||(c=$("script[widgets4Debug=true]")[0]||$("script.widgets4Core")[0],c&&(o=c.getAttribute("id"))),s=h.getAttribute("src").replace(/widgets3/g,"widgets4").replace(/Loader/gi,"Core"),s+=(s.indexOf("?")>-1?"&":"?")+t,f=document.createElement("script"),f.setAttribute("type","text/javascript"),f.setAttribute("src",s),f.setAttribute("id",o),f.setAttribute("widgets4Debug","true"),e=document.getElementsByTagName("HEAD")[0]||document.documentElement,f.onload=f.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){f.onload=f.onreadystatechange=null,e&&f.parentNode&&e.removeChild(f),this.removeAttribute("widgets4Debug");for(var t=0;t<n.length;t++)Flux4.createWidget.apply(null,n[t])}},e.insertBefore(f,e.firstChild),!0):!1}}}();if(!n.reloadOnDebug("enableWidgetsDebug=true")){
/*!
* jQuery Cookie Plugin v1.3
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2011, Klaus Hartl
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://www.opensource.org/licenses/mit-license.php
* http://www.opensource.org/licenses/GPL-2.0
*/
(function(n,t,i){function f(n){return n}function e(n){return decodeURIComponent(n.replace(u," "))}var u=/\+/g,r=n.cookie=function(u,o,s){var p,c,l,a,h,w,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(u),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(l=r.raw?f:e,a=t.cookie.split("; "),h=0,w=a.length;h<w;h++)if(v=a[h].split("="),l(v.shift())===u)return y=l(v.join("=")),r.json?JSON.parse(y):y;return null};r.defaults={},n.removeCookie=function(t,i){return n.cookie(t)!==null?(n.cookie(t,null,i),!0):!1}})(jQuery,document),function(){var w=this,yt=w._,e={},r=Array.prototype,nt=Object.prototype,pt=Function.prototype,tt=r.push,i=r.slice,o=r.concat,f=nt.toString,wt=nt.hasOwnProperty,it=r.forEach,rt=r.map,ut=r.reduce,ft=r.reduceRight,et=r.filter,ot=r.every,st=r.some,s=r.indexOf,ht=r.lastIndexOf,bt=Array.isArray,ct=Object.keys,b=pt.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},t,k,d,h,c,g,l,a,u,lt,at,v,y,vt,p;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):w._=n,n.VERSION="1.6.0",t=n.each=n.forEach=function(t,i,r){var o,u,f;if(t==null)return t;if(it&&t.forEach===it)t.forEach(i,r);else if(t.length===+t.length){for(u=0,f=t.length;u<f;u++)if(i.call(r,t[u],u,t)===e)return}else for(o=n.keys(t),u=0,f=o.length;u<f;u++)if(i.call(r,t[o[u]],o[u],t)===e)return;return t},n.map=n.collect=function(n,i,r){var u=[];return n==null?u:rt&&n.map===rt?n.map(i,r):(t(n,function(n,t,f){u.push(i.call(r,n,t,f))}),u)},k="Reduce of empty array with no initial value",n.reduce=n.foldl=n.inject=function(i,r,u,f){var e=arguments.length>2;if(i==null&&(i=[]),ut&&i.reduce===ut)return f&&(r=n.bind(r,f)),e?i.reduce(r,u):i.reduce(r);if(t(i,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(k);return u},n.reduceRight=n.foldr=function(i,r,u,f){var o=arguments.length>2,e,s;if(i==null&&(i=[]),ft&&i.reduceRight===ft)return f&&(r=n.bind(r,f)),o?i.reduceRight(r,u):i.reduceRight(r);if(e=i.length,e!==+e&&(s=n.keys(i),e=s.length),t(i,function(n,t,h){t=s?s[--e]:--e,o?u=r.call(f,u,i[t],t,h):(u=i[t],o=!0)}),!o)throw new TypeError(k);return u},n.find=n.detect=function(n,t,i){var r;return d(n,function(n,u,f){if(t.call(i,n,u,f))return r=n,!0}),r},n.filter=n.select=function(n,i,r){var u=[];return n==null?u:et&&n.filter===et?n.filter(i,r):(t(n,function(n,t,f){i.call(r,n,t,f)&&u.push(n)}),u)},n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)},n.every=n.all=function(i,r,u){r||(r=n.identity);var f=!0;return i==null?f:ot&&i.every===ot?i.every(r,u):(t(i,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return e}),!!f)},d=n.some=n.any=function(i,r,u){r||(r=n.identity);var f=!1;return i==null?f:st&&i.some===st?i.some(r,u):(t(i,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return e}),!!f)},n.contains=n.include=function(n,t){return n==null?!1:s&&n.indexOf===s?n.indexOf(t)!=-1:d(n,function(n){return n===t})},n.invoke=function(t,r){var u=i.call(arguments,2),f=n.isFunction(r);return n.map(t,function(n){return(f?r:n[r]).apply(n,u)})},n.pluck=function(t,i){return n.map(t,n.property(i))},n.where=function(t,i){return n.filter(t,n.matches(i))},n.findWhere=function(t,i){return n.find(t,n.matches(i))},n.max=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.max.apply(Math,i);var f=-Infinity,e=-Infinity;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;o>e&&(f=n,e=o)}),f},n.min=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.min.apply(Math,i);var f=Infinity,e=Infinity;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;o<e&&(f=n,e=o)}),f},n.shuffle=function(i){var u,f=0,r=[];return t(i,function(t){u=n.random(f++),r[f-1]=r[u],r[u]=t}),r},n.sample=function(t,i,r){return i==null||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))},h=function(t){return t==null?n.identity:n.isFunction(t)?t:n.property(t)},n.sortBy=function(t,i,r){return i=h(i),n.pluck(n.map(t,function(n,t,u){return{value:n,index:t,criteria:i.call(r,n,t,u)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index-t.index}),"value")},c=function(n){return function(i,r,u){var f={};return r=h(r),t(i,function(t,e){var o=r.call(u,t,e,i);n(f,o,t)}),f}},n.groupBy=c(function(t,i,r){n.has(t,i)?t[i].push(r):t[i]=[r]}),n.indexBy=c(function(n,t,i){n[t]=i}),n.countBy=c(function(t,i){n.has(t,i)?t[i]++:t[i]=1}),n.sortedIndex=function(n,t,i,r){var f;i=h(i);for(var o=i.call(r,t),u=0,e=n.length;u<e;)f=u+e>>>1,i.call(r,n[f])<o?u=f+1:e=f;return u},n.toArray=function(t){return t?n.isArray(t)?i.call(t):t.length===+t.length?n.map(t,n.identity):n.values(t):[]},n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length},n.first=n.head=n.take=function(n,t,r){if(n!=null)return t==null||r?n[0]:t<0?[]:i.call(n,0,t)},n.initial=function(n,t,r){return i.call(n,0,n.length-(t==null||r?1:t))},n.last=function(n,t,r){if(n!=null)return t==null||r?n[n.length-1]:i.call(n,Math.max(n.length-t,0))},n.rest=n.tail=n.drop=function(n,t,r){return i.call(n,t==null||r?1:t)},n.compact=function(t){return n.filter(t,n.identity)},g=function(i,r,u){return r&&n.every(i,n.isArray)?o.apply(u,i):(t(i,function(t){n.isArray(t)||n.isArguments(t)?r?tt.apply(u,t):g(t,r,u):u.push(t)}),u)},n.flatten=function(n,t){return g(n,t,[])},n.without=function(t){return n.difference(t,i.call(arguments,1))},n.partition=function(n,i){var r=[],u=[];return t(n,function(n){(i(n)?r:u).push(n)}),[r,u]},n.uniq=n.unique=function(i,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(i,u,f):i,o=[],e=[];return t(s,function(t,u){(r?u&&e[e.length-1]===t:n.contains(e,t))||(e.push(t),o.push(i[u]))}),o},n.union=function(){return n.uniq(n.flatten(arguments,!0))},n.intersection=function(t){var r=i.call(arguments,1);return n.filter(n.uniq(t),function(t){return n.every(r,function(i){return n.contains(i,t)})})},n.difference=function(t){var u=o.apply(r,i.call(arguments,1));return n.filter(t,function(t){return!n.contains(u,t)})},n.zip=function(){for(var i=n.max(n.pluck(arguments,"length").concat(0)),r=new Array(i),t=0;t<i;t++)r[t]=n.pluck(arguments,""+t);return r},n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r},n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;if(s&&t.indexOf===s)return t.indexOf(i,r);for(;u<f;u++)if(t[u]===i)return u;return-1},n.lastIndexOf=function(n,t,i){var u,r;if(n==null)return-1;if(u=i!=null,ht&&n.lastIndexOf===ht)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1},n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0),i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);u<r;)f[u++]=n,n+=i;return f},l=function(){},n.bind=function(t,r){var u,f;if(b&&t.bind===b)return b.apply(t,i.call(arguments,1));if(!n.isFunction(t))throw new TypeError;return u=i.call(arguments,2),f=function(){var e,n;return(this instanceof f)?(l.prototype=t.prototype,e=new l,l.prototype=null,n=t.apply(e,u.concat(i.call(arguments))),Object(n)===n)?n:e:t.apply(r,u.concat(i.call(arguments)))}},n.partial=function(t){var r=i.call(arguments,1);return function(){for(var f=0,i=r.slice(),u=0,e=i.length;u<e;u++)i[u]===n&&(i[u]=arguments[f++]);while(f<arguments.length)i.push(arguments[f++]);return t.apply(this,i)}},n.bindAll=function(r){var u=i.call(arguments,1);if(u.length===0)throw new Error("bindAll must be passed function names");return t(u,function(t){r[t]=n.bind(r[t],r)}),r},n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}},n.delay=function(n,t){var r=i.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},n.defer=function(t){return n.delay.apply(n,[t,1].concat(i.call(arguments,1)))},n.throttle=function(t,i,r){var u,f,s,e=null,o=0,h;return r||(r={}),h=function(){o=r.leading===!1?0:n.now(),e=null,s=t.apply(u,f),u=f=null},function(){var c=n.now(),l;return o||r.leading!==!1||(o=c),l=i-(c-o),u=this,f=arguments,l<=0?(clearTimeout(e),e=null,o=c,s=t.apply(u,f),u=f=null):e||r.trailing===!1||(e=setTimeout(h,l)),s}},n.debounce=function(t,i,r){var u,f,e,s,o,h=function(){var c=n.now()-s;c<i?u=setTimeout(h,i-c):(u=null,r||(o=t.apply(e,f),e=f=null))};return function(){e=this,f=arguments,s=n.now();var c=r&&!u;return u||(u=setTimeout(h,i)),c&&(o=t.apply(e,f),e=f=null),o}},n.once=function(n){var i=!1,t;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}},n.wrap=function(t,i){return n.partial(i,t)},n.compose=function(){var n=arguments;return function(){for(var i=arguments,t=n.length-1;t>=0;t--)i=[n[t].apply(this,i)];return i[0]}},n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(ct)return ct(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i},n.values=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;i<u;i++)f[i]=t[r[i]];return f},n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;i<u;i++)f[i]=[r[i],t[r[i]]];return f},n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;i<f;i++)u[t[r[i]]]=r[i];return u},n.functions=n.methods=function(t){var r=[],i;for(i in t)n.isFunction(t[i])&&r.push(i);return r.sort()},n.extend=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n},n.pick=function(n){var u={},f=o.apply(r,i.call(arguments,1));return t(f,function(t){t in n&&(u[t]=n[t])}),u},n.omit=function(t){var f={},e=o.apply(r,i.call(arguments,1)),u;for(u in t)n.contains(e,u)||(f[u]=t[u]);return f},n.defaults=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]===void 0&&(n[i]=t[i])}),n},n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t},n.tap=function(n,t){return t(n),n},a=function(t,i,r,u){var l,v,h,c,e,o,s;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),l=f.call(t),l!=f.call(i))return!1;switch(l){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:t==0?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if(typeof t!="object"||typeof i!="object")return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(h=t.constructor,c=i.constructor,h!==c&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in i)return!1;if(r.push(t),u.push(i),e=0,o=!0,l=="[object Array]"){if(e=t.length,o=e==i.length,o)while(e--)if(!(o=a(t[e],i[e],r,u)))break}else{for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&a(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o},n.isEqual=function(n,t){return a(n,t,[],[])},n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0},n.isElement=function(n){return!!(n&&n.nodeType===1)},n.isArray=bt||function(n){return f.call(n)=="[object Array]"},n.isObject=function(n){return n===Object(n)},t(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),n.isArguments(arguments)||(n.isArguments=function(t){return!!(t&&n.has(t,"callee"))}),typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"}),n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},n.isNaN=function(t){return n.isNumber(t)&&t!=+t},n.isBoolean=function(n){return n===!0||n===!1||f.call(n)=="[object Boolean]"},n.isNull=function(n){return n===null},n.isUndefined=function(n){return n===void 0},n.has=function(n,t){return wt.call(n,t)},n.noConflict=function(){return w._=yt,this},n.noop=function(){},n.identity=function(n){return n},n.constant=function(n){return function(){return n}},n.property=function(n){return function(t){return t[n]}},n.matches=function(n){return function(t){if(t===n)return!0;for(var i in n)if(n[i]!==t[i])return!1;return!0}},n.times=function(n,t,i){for(var u=Array(Math.max(0,n)),r=0;r<n;r++)u[r]=t.call(i,r);return u},n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},n.now=Date.now||function(){return(new Date).getTime()},u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},u.unescape=n.invert(u.escape),lt={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")},n.each(["escape","unescape"],function(t){n[t]=function(n){return n==null?"":(""+n).replace(lt[t],function(n){return u[t][n]})}}),n.result=function(t,i){if(t==null)return void 0;var r=t[i];return n.isFunction(r)?r.call(t):r},n.mixin=function(i){t(n.functions(i),function(t){var r=n[t]=i[t];n.prototype[t]=function(){var t=[this._wrapped];return tt.apply(t,arguments),p.call(this,r.apply(n,t))}})},at=0,n.uniqueId=function(n){var t=++at+"";return n?n+t:t},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},v=/(.)^/,y={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t"},y[String.fromCharCode(8232)]="u2028",y[String.fromCharCode(8233)]="u2029",vt=/\\|'|\r|\n|\t|\u2028|\u2029/g,n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||v).source,(r.interpolate||v).source,(r.evaluate||v).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(vt,function(n){return"\\"+y[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n}),u+="';\n",r.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)},n.chain=function(t){return n(t).chain()},p=function(t){return this._chain?n(t).chain():t},n.mixin(n),t(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t=="shift"||t=="splice")&&n.length===0&&delete n[0],p.call(this,n)}}),t(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return p.call(this,i.apply(this._wrapped,arguments))}}),n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return n})}.call(this);
/*! A fix for the iOS orientationchange zoom bug.
 Script by @scottjehl, rebound by @wilto.
 MIT License.
*/
(function(n){function h(n,i,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;u<s;u++)if(f=e.eq(u),n.append(f),r&&n.append(r),t(n,i)){f.remove(),o=!0;break}else r&&r.remove();return o}function e(i,r,u,f,s){var v=i.contents(),h=!1,y,c,p,l,a,w;for(i.empty(),y="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",c=0,p=v.length;c<p;c++){if(h)break;(l=v[c],a=n(l),typeof l!="undefined")&&(i.append(a),s&&(w=i.is(y)?"after":"append",i[w](s)),l.nodeType==3?t(u,f)&&(h=o(a,r,u,f,s)):h=e(a,r,u,f,s),h||s&&s.remove())}return h}function o(i,r,u,f,e){var v=!1,a=i[0],d,h,g;if(typeof a=="undefined")return!1;for(var y=f.wrap=="letter"?"":" ",p=c(a).split(y),w=-1,l=-1,b=0,k=p.length-1;b<=k;){if(d=Math.floor((b+k)/2),d==l)break;l=d,s(a,p.slice(0,l+1).join(y)+f.ellipsis),t(u,f)?k=l:(w=l,b=l)}if(w!=-1){for(h=p.slice(0,w+1).join(y),v=!0;n.inArray(h.slice(-1),f.lastCharacter.remove)>-1;)h=h.slice(0,-1);n.inArray(h.slice(-1),f.lastCharacter.noEllipsis)<0&&(h+=f.ellipsis),s(a,h)}else g=i.parent(),i.remove(),$n=g.contents().eq(-1),v=o($n,r,u,f,e);return v}function t(n,t){return n.innerHeight()>t.maxHeight}function i(n){return{width:n.innerWidth(),height:n.innerHeight()}}function s(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function c(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function a(t,i){return typeof t=="undefined"?!1:t?typeof t=="string"?(t=n(t,i),t.length?t:!1):typeof t=="object"?typeof t.jquery=="undefined"?!1:t:!1:!1}function v(n){var i=n.innerHeight(),r=["paddingTop","paddingBottom"],t;for(z=0,l=r.length;z<l;z++)t=parseInt(n.css(r[z]),10),isNaN(t)&&(t=0),i-=t;return i}function y(n,t){return n?(t=typeof t=="string"?"dotdotdot: "+t:["dotdotdot:",t],window.console&&window.console.log&&window.console.log(t),!1):!1}var f,r,u;n.fn.dotdotdot||(n.fn.dotdotdot=function(r){var u;if(this.length==0)return y(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(r)});u=this,u.data("dotdotdot")&&u.trigger("destroy.dot"),u.bind_events=function(){return u.bind("update.dot",function(i,r){i.preventDefault(),i.stopPropagation(),o.maxHeight=typeof o.height=="number"?o.height:v(u),o.maxHeight+=o.tolerance,typeof r!="undefined"&&((typeof r=="string"||r instanceof HTMLElement)&&(r=n("<div />").append(r).contents()),r instanceof n&&(l=r)),c=u.wrapInner('<div class="dotdotdot" />').children(),c.empty().append(l.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var a=!1,f=!1;return s.afterElement&&(a=s.afterElement.clone(!0),s.afterElement.remove()),t(c,o)&&(f=o.wrap=="children"?h(c,o,a):e(c,u,c,o,a)),c.replaceWith(c.contents()),c=null,n.isFunction(o.callback)&&o.callback.call(u[0],f,l),s.isTruncated=f,f}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],l),l}).bind("destroy.dot",function(n){n.preventDefault(),n.stopPropagation(),u.unwatch().unbind_events().empty().append(l).data("dotdotdot",!1)}),u},u.unbind_events=function(){return u.unbind(".dot"),u},u.watch=function(){if(u.unwatch(),o.watch=="window"){var t=n(window),r=t.width(),f=t.height();t.bind("resize.dot"+s.dotId,function(){r==t.width()&&f==t.height()&&o.windowResizeFix||(r=t.width(),f=t.height(),p&&clearInterval(p),p=setTimeout(function(){u.trigger("update.dot")},10))})}else w=i(u),p=setInterval(function(){var n=i(u);(w.width!=n.width||w.height!=n.height)&&(u.trigger("update.dot"),w=i(u))},100);return u},u.unwatch=function(){return n(window).unbind("resize.dot"+s.dotId),p&&clearInterval(p),u};var l=u.contents(),o=n.extend(!0,{},n.fn.dotdotdot.defaults,r),s={},w={},p=null,c=null;return s.afterElement=a(o.after,u),s.isTruncated=!1,s.dotId=f++,u.data("dotdotdot",!0).bind_events().trigger("update.dot"),o.watch&&u.watch(),u},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},f=1,r=n.fn.html,n.fn.html=function(n){return typeof n!="undefined"?this.data("dotdotdot")&&typeof n!="function"?this.trigger("update",[n]):r.call(this,n):r.call(this)},u=n.fn.text,n.fn.text=function(t){if(typeof t!="undefined"){if(this.data("dotdotdot")){var i=n("<div />");return i.text(t),t=i.html(),i.remove(),this.trigger("update",[t])}return u.call(this,t)}return u.call(this)})})(jQuery);
/*! jQuery UI - v1.10.3 - 2013-07-16
* http://jqueryui.com
* Includes: jquery.ui.position.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(n,t){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function u(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var f,r=Math.max,i=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}},n.fn.position=function(t){if(!t||!t.of)return v.apply(this,arguments);t=n.extend({},t);var b,f,l,w,p,d,g=n(t.of),tt=n.position.getWithinInfo(t.within),it=n.position.getScrollInfo(tt),k=(t.collision||"flip").split(" "),nt={};return d=y(g),g[0].preventDefault&&(t.at="left top"),f=d.width,l=d.height,w=d.offset,p=n.extend({},w),n.each(["my","at"],function(){var n=(t[this]||"").split(" "),i,r;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",i=h.exec(n[0]),r=h.exec(n[1]),nt[this]=[i?i[0]:0,r?r[0]:0],t[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),k.length===1&&(k[1]=k[0]),t.at[0]==="right"?p.left+=f:t.at[0]==="center"&&(p.left+=f/2),t.at[1]==="bottom"?p.top+=l:t.at[1]==="center"&&(p.top+=l/2),b=a(nt.at,f,l),p.left+=b[0],p.top+=b[1],this.each(function(){var y,d,s=n(this),h=s.outerWidth(),c=s.outerHeight(),rt=u(this,"marginLeft"),ut=u(this,"marginTop"),ft=h+rt+u(this,"marginRight")+it.width,et=c+ut+u(this,"marginBottom")+it.height,o=n.extend({},p),v=a(nt.my,s.outerWidth(),s.outerHeight());t.my[0]==="right"?o.left-=h:t.my[0]==="center"&&(o.left-=h/2),t.my[1]==="bottom"?o.top-=c:t.my[1]==="center"&&(o.top-=c/2),o.left+=v[0],o.top+=v[1],n.support.offsetFractions||(o.left=e(o.left),o.top=e(o.top)),y={marginLeft:rt,marginTop:ut},n.each(["left","top"],function(i,r){n.ui.position[k[i]]&&n.ui.position[k[i]][r](o,{targetWidth:f,targetHeight:l,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:tt,elem:s})}),t.using&&(d=function(n){var u=w.left-o.left,v=u+f-h,e=w.top-o.top,y=e+l-c,a={target:{element:g,left:w.left,top:w.top,width:f,height:l},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:v<0?"left":u>0?"right":"center",vertical:y<0?"top":e>0?"bottom":"middle"};f<h&&i(u+v)<f&&(a.horizontal="center"),l<c&&i(e+y)<l&&(a.vertical="middle"),a.important=r(i(u),i(v))>r(i(e),i(y))?"horizontal":"vertical",t.using.call(this,n,a)}),s.offset(n.extend(o,{using:d}))})},n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?i>0&&f<=0?(h=n.left+i+t.collisionWidth-o-u,n.left+=i-h):n.left=f>0&&i<=0?u:i>f?u+o-t.collisionWidth:u:i>0?n.left+=i:f>0?n.left-=f:n.left=r(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?i>0&&f<=0?(h=n.top+i+t.collisionHeight-e-u,n.top+=i-h):n.top=f>0&&i<=0?u:i>f?u+e-t.collisionHeight:u:i>0?n.top+=i:f>0?n.top-=f:n.top=r(n.top-s,n.top)}},flip:{left:function(n,t){var r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-o,v=l+t.collisionWidth-c-o,u=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,f=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,e=-2*t.offset[0],s,h;a<0?(s=n.left+u+f+e+t.collisionWidth-c-y,(s<0||s<i(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-t.collisionPosition.marginLeft+u+f+e-o,(h>0||i(h)<v)&&(n.left+=u+f+e))},top:function(n,t){var r=t.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-t.collisionPosition.marginTop,a=l-o,v=l+t.collisionHeight-c-o,p=t.my[1]==="top",u=p?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,f=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,e=-2*t.offset[1],s,h;a<0?(h=n.top+u+f+e+t.collisionHeight-c-y,(h<0||h<i(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-t.collisionPosition.marginTop+u+f+e-o,(s>0||i(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments),n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments),n.ui.position.fit.top.apply(this,arguments)}}}})(jQuery),function(n){function oi(){e.trigger("onBeforeSignIn")}function si(n){e.trigger("SignInComplete",{widgetName:n},t.user)}function kt(n){(!n||n.deactivationFeedbackSubmitted)&&e.trigger("AccountDeactivated")}var ft={},ci={embed:function(n,t,i,r,u,f,e){var c=nt.generate(),s,h,o;e=e||{},e.id=c,e.type="application/x-shockwave-flash",e.data=n,e.width=i,e.height=r,s="<object ";for(o in e)e[o]!=Object.prototype[o]&&(s+=o+'="'+e[o]+'" ');if(s+=">",f=f||{},f.movie=n,u){h="";for(o in u)u[o]!=Object.prototype[o]&&(h+=o+"="+u[o]+"&");f.flashVars=h}for(o in f)f[o]!=Object.prototype[o]&&(s+='<param name="'+o+'" value="'+f[o]+'" />');return s+="<\/object>",_.isString(t)&&(t=document.getElementById(t)),t.innerHTML=s,c}},yt=new function(){function n(){}function s(){return document.getElementById(u)}function h(n){for(var r=n.substring(1).split("|"),i=[],t=0;t<r.length;t++)i[i.length]=parseInt(r[t],16);return String.fromCharCode.apply(String,i)}function c(n){return eval('"'+n.replace(/\|/g,"\\u")+'"')}function l(n){return'\v'=="v"?c(n):h(n)}function a(t,i){return b.create(function(r){window.setTimeout(function(){if(n("Received data from "+t),r){var u=(new Date).getTime();r=l(r),n("Data decoded in "+((new Date).getTime()-u)+" ms")}i.call(null,r)},0)})}function v(i){f?i():(t.push(i),e||(e=!0,n("Initialization..."),y(function(){n("Initialization complete"),f=!0;for(var i=0;i<t.length;i++)t[i]();t=null})))}function y(n){function e(){++s==2&&n()}var s=0,o=nt.generate(),t=document.createElement("div"),f;t.setAttribute("id",o),t.style.height="0",t.style.width="0",f=document.getElementsByTagName("body")[0],f.insertBefore(t,f.firstChild),r=nt.generate(),u=ci.embed(i.coreFlashUrl,o,"0","0",{onload:b.create(e),executeWebRequest:r},{allowscriptaccess:"always"}),e()}var u=null,r,f=!1,e=!1,t=[];return{executeWebRequest:function(n,t,i,u,f,e){v(function(){s()[r](n,t,i,a(t,u),f,e)})}}},s,p,ti,c,r,e,o,u,h,ii,et,w,y,nt,b,t,i,k,tt,bt,ui,fi,l,ei,ot,st,dt,it,hi,ht,rt,ct,vt,ut;window.matchMedia||(window.matchMedia=function(n){"use strict";var r=n.document,f=r.documentElement,i=[],u=0,e="",t={},l=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,a=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,o=0,s=function(n){var tt=n.indexOf(",")!==-1&&n.split(",")||[n],b=tt.length-1,it=b,c=null,i=null,k="",p=0,d=!1,w="",h="",g=null,v=0,rt=0,r=null,nt="",f="",s="",o="",y="",u=!1;if(n==="")return!0;do{if(c=tt[it-b],d=!1,i=c.match(l),i&&(k=i[0],p=i.index),!i||c.substring(0,p).indexOf("(")===-1&&(p||!i[3]&&k!==i.input)){u=!1;continue}if(h=c,d=i[1]==="not",p||(w=i[2],h=c.substring(k.length)),u=w===e||w==="all"||w==="",g=h.indexOf(" and ")!==-1&&h.split(" and ")||[h],v=g.length-1,rt=v,u&&v>=0&&h!=="")do{if(r=g[v].match(a),!r||!t[r[3]]){u=!1;break}if(nt=r[2],f=r[5],o=f,s=r[7],y=t[r[3]],s&&(o=s==="px"?Number(f):s==="em"||s==="rem"?16*f:r[8]?(f/r[8]).toFixed(2):s==="dppx"?f*96:s==="dpcm"?f*.3937:Number(f)),u=nt==="min-"&&o?y>=o:nt==="max-"&&o?y<=o:o?y===o:!!y,!u)break}while(v--);if(u)break}while(b--);return d?!u:u},h=function(){var i=n.innerWidth||f.clientWidth,r=n.innerHeight||f.clientHeight,e=n.screen.width,o=n.screen.height,s=n.screen.colorDepth,u=n.devicePixelRatio;t.width=i,t.height=r,t["aspect-ratio"]=(i/r).toFixed(2),t["device-width"]=e,t["device-height"]=o,t["device-aspect-ratio"]=(e/o).toFixed(2),t.color=s,t["color-index"]=Math.pow(2,s),t.orientation=r>=i?"portrait":"landscape",t.resolution=u&&u*96||n.screen.deviceXDPI||96,t["device-pixel-ratio"]=u||1},c=function(){clearTimeout(o),o=setTimeout(function(){var t=null,f=u-1,c=f,e=!1,r,o;if(f>=0){h();do if(t=i[c-f],t&&(e=s(t.mql.media),(e&&!t.mql.matches||!e&&t.mql.matches)&&(t.mql.matches=e,t.listeners)))for(r=0,o=t.listeners.length;r<o;r++)t.listeners[r]&&t.listeners[r].call(n,t.mql);while(f--)}},10)},v=function(){var s=r.getElementsByTagName("head")[0],t=r.createElement("style"),l=null,u=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],i=0,v=u.length,f="#mediamatchjs { position: relative; z-index: 0; }",o="",a=n.addEventListener||(o="on")&&n.attachEvent;for(t.type="text/css",t.id="mediamatchjs",s.appendChild(t),l=n.getComputedStyle&&n.getComputedStyle(t)||t.currentStyle;i<v;i++)f+="@media "+u[i]+" { #mediamatchjs { position: relative; z-index: "+i+" } }";t.styleSheet?t.styleSheet.cssText=f:t.textContent=f,e=u[l.zIndex*1||0],s.removeChild(t),h(),a(o+"resize",c),a(o+"orientationchange",c)};return v(),function(n){var r=u,t={matches:!1,media:n,addListener:function(n){i[r].listeners||(i[r].listeners=[]),n&&i[r].listeners.push(n)},removeListener:function(n){var t=i[r],u=0,f=0;if(t)for(f=t.listeners.length;u<f;u++)t.listeners[u]===n&&t.listeners.splice(u,1)}};return n===""?(t.matches=!0,t):(t.matches=s(n),u=i.push({mql:t,listeners:null}),t)}}(window)),ft.RequestHelper=function(n){function t(n){return i&&n||!!window.XMLHttpRequest&&_.isNull((new window.XMLHttpRequest).onprogress)}var i=window.XDomainRequest&&jQuery.ajaxTransport;i&&jQuery.ajaxTransport(function(n){if(n.crossDomain&&n.async){n.timeout&&(n.xdrTimeout=n.timeout,delete n.timeout);var t;return{send:function(i,r){function u(n,u,f,e){t.onload=t.onerror=t.ontimeout=i.noop,t=undefined,r(n,u,f,e)}t=new XDomainRequest,t.onload=function(){u(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){u(404,"Not Found")},t.onprogress=i.noop,t.ontimeout=function(){u(0,"timeout")},t.timeout=n.xdrTimeout||Number.MAX_VALUE,t.open(n.type,n.url),t.send(n.hasContent&&n.data||null)},abort:function(){t&&(t.onerror=_.noop,t.abort())}}}}),et.overrideMethod(n,"invokePostRequest",function(n,i,r,u,f,e){t()?n.apply(this,i):yt.executeWebRequest("POST",r,u,function(n){!!n&&_.isFunction(f)?f(n):_.isFunction(e)&&e(n)},"application/json",!0)}),et.overrideMethod(n,"getRequest",function(n,i,r,f,e,o){t()?n.apply(this,i):yt.executeWebRequest("GET",r,f,function(n){!!n&&_.isFunction(e)?_.isString(n)?e(u.parse(n)):e(n):_.isFunction(o)&&o(n)},!0)}),et.overrideMethod(n,"postFormRequest",function(i,r,f,e,o,s,h){t(h)?i.apply(this,r):yt.executeWebRequest("POST",f,e,function(n){!!n&&_.isFunction(o)?_.isString(n)?o(u.parse(n)):o(n):_.isFunction(s)&&s(n)},n._getPostContentType(),!0)})},s=function(n,t){var f,e,i,r;if(!(this instanceof s))return new s(n,t);if(!u)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(arguments.length<=2&&arguments.length>0)t=typeof arguments[0]=="function"?arguments[0]:arguments[1],n=typeof arguments[0]=="function"?{}:arguments[0];else throw"Incorrect # of ctor args!";if(typeof t!="function")throw"No callback was provided";if(this.record=n.record||"record",this.name=n.name||"records",n.adapter)for(i=0,r=s.adapters.length;i<r;i++)if(s.adapters[i].adapter===n.adapter){f=s.adapters[i].valid()?s.adapters[i]:undefined;break}if(!f)for(i=0,r=s.adapters.length;i<r;i++)if(f=s.adapters[i].valid()?s.adapters[i]:undefined,f)break;if(!f)throw"No valid adapter.";for(e in f)this[e]=f[e];for(i=0,r=s.plugins.length;i<r;i++)s.plugins[i].call(this);this.init(n,t)},s.adapters=[],s.adapter=function(n,t){var r,u,i;t.adapter=n,r="adapter valid init keys save batch get exists all remove nuke".split(" "),u=this.prototype.indexOf;for(i in t)if(u(r,i)===-1)throw"Invalid adapter! Nonstandard method: "+i;s.adapters.push(t)},s.plugins=[],s.plugin=function(n){for(var t in n)t==="init"?s.plugins.push(n[t]):this.prototype[t]=n[t]},s.prototype={isArray:Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},indexOf:function(n,t,i,r){if(n.indexOf)return n.indexOf(t);for(i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},lambda:function(n){return this.fn(this.record,n)},fn:function(n,t){return typeof t=="string"?new Function(n,t):t},uuid:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},each:function(n){var i=this.lambda(n),t,r;if(this.__results)for(t=0,r=this.__results.length;t<r;t++)i.call(this,this.__results[t],t);else this.all(function(n){for(var t=0,r=n.length;t<r;t++)i.call(this,n[t],t)});return this}},s.adapter("dom",function(){s.prototype.isLocalStorageEnabled=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}};var n=s.prototype.isLocalStorageEnabled()?window.localStorage:null,t=function(t){return{key:t+"._index_",all:function(){var t=n.getItem(this.key);return t&&(t=u.parse(t)),t===null&&n.setItem(this.key,u.stringify([])),u.parse(n.getItem(this.key))},add:function(t){var i=this.all();i.push(t),n.setItem(this.key,u.stringify(i))},del:function(t){for(var r=this.all(),f=[],i=0,e=r.length;i<e;i++)r[i]!=t&&f.push(r[i]);n.setItem(this.key,u.stringify(f))},find:function(n){for(var i=this.all(),t=0,r=i.length;t<r;t++)if(n===i[t])return t;return!1}}};return{valid:function(){return!!n},init:function(n,i){this.indexer=t(this.name),i&&this.fn(this.name,i).call(this,this)},save:function(t,i){var r=t.key?this.name+"."+t.key:this.name+"."+this.uuid();return this.indexer.find(r)===!1&&this.indexer.add(r),delete t.key,n.setItem(r,u.stringify(t)),t.key=r.slice(this.name.length+1),i&&this.lambda(i).call(this,t),this},batch:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)this.save(n[i],function(n){r.push(n)});return t&&this.lambda(t).call(this,r),this},keys:function(n){if(n){var t=this.name,i=this.indexer.all().map(function(n){return n.replace(t+".","")});this.fn("keys",n).call(this,i)}return this},get:function(t,i){var o,f,s,e,r;if(this.isArray(t)){for(o=[],f=0,s=t.length;f<s;f++)e=this.name+"."+t[f],r=n.getItem(e),r&&(r=u.parse(r),r.key=t[f],o.push(r));i&&this.lambda(i).call(this,o)}else e=this.name+"."+t,r=n.getItem(e),r&&(r=u.parse(r),r.key=t),i&&this.lambda(i).call(this,r);return this},exists:function(n,t){var i=this.indexer.find(this.name+"."+n)===!1?!1:!0;return this.lambda(t).call(this,i),this},all:function(t){for(var e=this.indexer.all(),o=[],r,f,i=0,s=e.length;i<s;i++)f=e[i],r=u.parse(n.getItem(f)),r.key=f.replace(this.name+".",""),o.push(r);return t&&this.fn(this.name,t).call(this,o),this},remove:function(t,i){var r=this.name+"."+(t.key?t.key:t);return this.indexer.del(r),n.removeItem(r),i&&this.lambda(i).call(this),this},nuke:function(n){return this.all(function(t){for(var i=0,r=t.length;i<r;i++)this.remove(t[i]);n&&this.lambda(n).call(this)}),this}}}()),s.adapter("ie-userdata",{valid:function(){return typeof document.body.addBehavior!="undefined"},init:function(n,t){var i=document.createElement("span");i.style.behavior="url('#default#userData')",i.style.position="absolute",i.style.left=1e4,document.body.appendChild(i),this.storage=i,this.storage.load(this.name),this.fn(this.name,t).call(this,this)},get:function(n,t){var i=u.parse(this.storage.getAttribute(n)||"null");return i&&(i.key=n),t&&this.lambda(t).call(this,i),this},save:function(n,t){var i=n.key||"lc"+this.uuid();return delete n.key,this.storage.setAttribute(i,u.stringify(n)),this.storage.save(this.name),n.key=i,t&&this.lambda(t).call(this,n),this},all:function(n){for(var f=this.storage.XMLDocument.firstChild.attributes,e=[],r,t,i=0,o=f.length;i<o;i++)r=f[i],t=u.parse(r.nodeValue||"null"),t&&(t.key=r.nodeName,e.push(t));return n&&this.fn(this.name,n).call(this,e),this},remove:function(n,t){var i=typeof n=="string"?n:n.key;return this.storage.removeAttribute(i),this.storage.save(this.name),t&&this.lambda(t).call(this),this},nuke:function(n){var t=this;return this.all(function(i){for(var r=0,u=i.length;r<u;r++)i[r].key&&t.remove(i[r].key);n&&t.lambda(n).call(t)}),this}}),s.adapter("indexed-db",function(){function t(n,t){console.error("error in indexed-db adapter!",n,t)}var n="lawnchair",i=2,u=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB},r=function(){return window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.oIDBTransaction||window.msIDBTransaction},f=function(){return window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.oIDBKeyRange||window.msIDBKeyRange};return{valid:function(){return!!u()},init:function(r,f){this.idb=u(),this.waiting=[];var o=this.idb.open(this.name,i),e=this,c=e.fn(e.name,f),s=function(){return c.call(e,e)},h=function(){try{e.db.deleteObjectStore("teststore")}catch(i){}try{e.db.deleteObjectStore(n)}catch(r){}e.store=e.db.createObjectStore(n,{autoIncrement:!0});for(var t=0;t<e.waiting.length;t++)e.waiting[t].call(e);e.waiting=[],s()};o.onupgradeneeded=function(n){h(n.oldVersion,n.newVersion)},o.onsuccess=function(){var u,r,n;if(e.db=o.result,e.db.version!=""+i)u=e.db.version,r=e.db.setVersion(""+i),r.onsuccess=function(){h(u,i)},r.onerror=function(n){console.log("Failed to create objectstore "+n),t(n)};else{for(e.store={},n=0;n<e.waiting.length;n++)e.waiting[n].call(e);e.waiting=[],s()}},o.onerror=t},save:function(i,u){if(!this.store){this.waiting.push(function(){this.save(i,u)});return}var f=this,s=function(n){u&&(i.key=n.target.result,f.lambda(u).call(f,i))},h=this.db.transaction(n,r().READ_WRITE),e=h.objectStore(n),o=i.key?e.put(i,i.key):e.put(i);return o.onsuccess=s,o.onerror=t,this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(i,r){var u,h,e,f,l;if(!this.store){this.waiting.push(function(){this.get(i,r)});return}if(u=this,h=function(n){r&&u.lambda(r).call(u,n.target.result)},this.isArray(i)){var o=[],c=!1,s=i,a=function(n){o.push(n),c=o.length===s.length},v=setInterval(function(){c&&(r&&u.lambda(r).call(u,o),clearInterval(v))},200);for(f=0,l=s.length;f<l;f++)this.get(s[f],a)}else e=this.db.transaction(n).objectStore(n).get(i),e.onsuccess=h,e.onerror=function(n){console.log("Failed to find "+i),t(n)};return this},exists:function(i,r){if(!this.store){this.waiting.push(function(){this.exists(i,r)});return}var u=this,e=this.db.transaction(n).objectStore(n).openCursor(f().only(i));return e.onsuccess=function(n){u.lambda(r).call(u,n.target.result!==null)},e.onerror=function(n){console.log("Failed to test for "+i),t(n)},this},all:function(t){if(!this.store){this.waiting.push(function(){this.all(t)});return}var i=this.fn(this.name,t)||undefined,u=this,f=this.db.transaction(n).objectStore(n),r=[];return f.openCursor().onsuccess=function(n){var t=n.target.result;t?(r.push(t.value),t["continue"]()):i&&i.call(u,r)},this},remove:function(i,u){if(!this.store){this.waiting.push(function(){this.remove(i,u)});return}typeof i=="object"&&(i=i.key);var f=this,o=function(){u&&f.lambda(u).call(f)},e=this.db.transaction(n,r().READ_WRITE).objectStore(n)["delete"](i);return e.onsuccess=o,e.onerror=t,this},nuke:function(i){if(!this.store){this.waiting.push(function(){this.nuke(i)});return}var u=this,f=i?function(){u.lambda(i).call(u)}:function(){};try{this.db.transaction(n,r().READ_WRITE).objectStore(n).clear().onsuccess=f}catch(e){t()}return this}}}()),s.adapter("webkit-sqlite",function(){var n=function(n,t){console.log("error in sqlite adaptor!",n,t)},t=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(n){var i=[].slice,f=i.call(arguments,1),r=this,t=function(){},u=function(){return r.apply(this instanceof t?this:n||{},f.concat(i.call(arguments)))};return t.prototype=r.prototype,u.prototype=new t,u}),{valid:function(){return!!window.openDatabase},init:function(t,i){var r=this,u=r.fn(r.name,i),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",e=function(){return u.call(r,r)};this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(t){t.executeSql(f,[],e,n)})},keys:function(t){var i=this.lambda(t),r=this,u="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.transaction(function(t){var f=function(n,t){var f,u,e;if(t.rows.length==0)i.call(r,[]);else{for(f=[],u=0,e=t.rows.length;u<e;u++)f.push(t.rows.item(u).id);i.call(r,f)}};t.executeSql(u,[],f,n)}),this},save:function(i,r){var f=this,o=i.key||f.uuid(),h="INSERT INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",c="UPDATE "+this.record+" SET value=?, timestamp=? WHERE id=?",s=function(){r&&(i.key=o,f.lambda(r).call(f,i))},e=[t(),o];return f.exists(i.key,function(t){f.db.transaction(function(r){var f=function(t){e.unshift(u.stringify(t)),r.executeSql(h,e,s,n)},o=function(t){delete t.key,e.unshift(u.stringify(t)),r.executeSql(c,e,s,n)};t?o(i):f(i)})}),this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(t,i){var r=this,f="",e;return f=this.isArray(t)?"SELECT id, value FROM "+this.record+" WHERE id IN ('"+t.join("','")+"')":"SELECT id, value FROM "+this.record+" WHERE id = '"+t+"'",e=function(n,f){var s=null,e=[],o,h;if(f.rows.length)for(o=0,h=f.rows.length;o<h;o++)s=u.parse(f.rows.item(o).value),s.key=f.rows.item(o).id,e.push(s);r.isArray(t)||(e=e.length?e[0]:null),i&&r.lambda(i).call(r,e)},this.db.transaction(function(t){t.executeSql(f,[],e,n)}),this},exists:function(t,i){var u="SELECT * FROM "+this.record+" WHERE id = ?",r=this,f=function(n,t){i&&r.fn("exists",i).call(r,t.rows.length>0)};return this.db.transaction(function(i){i.executeSql(u,[t],f,n)}),this},all:function(t){var f=this,e="SELECT * FROM "+this.record,i=[],r=this.fn(this.name,t)||undefined,o=function(n,t){var e,s,o;if(t.rows.length!=0)for(e=0,s=t.rows.length;e<s;e++)o=u.parse(t.rows.item(e).value),o.key=t.rows.item(e).id,i.push(o);r&&r.call(f,i)};return this.db.transaction(function(t){t.executeSql(e,[],o,n)}),this},remove:function(t,i){var r=this,u=typeof t=="string"?t:t.key,f="DELETE FROM "+this.record+" WHERE id = ?",e=function(){i&&r.lambda(i).call(r)};return this.db.transaction(function(t){t.executeSql(f,[u],e,n)}),this},nuke:function(t){var r="DELETE FROM "+this.record,i=this,u=t?function(){i.lambda(t).call(i)}:function(){};return this.db.transaction(function(t){t.executeSql(r,[],u,n)}),this}}}()),p=function(){function r(n,t){if(t)throw new a(n);}function t(n){if(_.isString(n)&&n.trim())return n;r("Event name must be not an empty string",!0)}var u=/\s+/,n=function(n,t,i,r){var e,o,f,s;if(!i)return!0;if(typeof i=="object"){for(e in i)n[t].apply(n,[e,i[e]].concat(r));return!1}if(u.test(i)){for(o=i.split(u),f=0,s=o.length;f<s;f++)n[t].apply(n,[o[f]].concat(r));return!1}return!0},i=function(n,t){var i,r=-1,u=n.length,f=t[0],e=t[1],o=t[2];switch(t.length){case 0:while(++r<u)(i=n[r]).callback.call(i.ctx);return;case 1:while(++r<u)(i=n[r]).callback.call(i.ctx,f);return;case 2:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e);return;case 3:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e,o);return;default:while(++r<u)(i=n[r]).callback.apply(i.ctx,t);return}};return{on:function(i,r,u){if(!n(this,"on",i,[r,u])||!r)return this;this._events||(this._events={}),i=t(i).toLowerCase();var f=this._events[i]||(this._events[i]=[]);return f.push({callback:r,context:u,ctx:u||this}),this},once:function(t,i,r){if(!n(this,"once",t,[i,r])||!i)return this;var f=this,u=_.once(function(){f.off(t,u),i.apply(this,arguments)});u._callback=i;return this.on(t,u,r)},off:function(i,r,u){var s,f,h,c,e,l,o,a;if(!this._events||!n(this,"off",i,[r,u]))return this;if(!i&&!r&&!u)return this._events=void 0,this;for(c=i?[t(i).toLowerCase()]:_.keys(this._events),e=0,l=c.length;e<l;e++)if(i=c[e],h=this._events[i]){if(this._events[i]=s=[],r||u)for(o=0,a=h.length;o<a;o++)f=h[o],(r&&r!==f.callback&&r!==f.callback._callback||u&&u!==f.context)&&s.push(f);s.length||delete this._events[i]}return this},trigger:function(u){var f=Array.prototype.slice.call(arguments,1),o,s;return n(this,"trigger",u,f)?(this===e&&r('"'+u+'" has been raised'),u=t(u).toLowerCase(),this._events&&(o=this._events[u],s=this._events.all,o&&i(o,f),s&&i(s,arguments)),this===e&&_.each(Flux4.eventListeners,function(n,t){t.toLowerCase()===u&&i([{callback:n,ctx:this}],f)},this),this):this},stopListening:function(n,t,i){var r=this._listeningTo,f,u;if(!r)return this;f=!t&&!i,i||typeof t!="object"||(i=this),n&&((r={})[n._listenId]=n);for(u in r)n=r[u],n.off(t,i,this),(f||_.isEmpty(n._events))&&delete this._listeningTo[u];return this}}}(),ti={listenTo:"on",listenToOnce:"once"},_.each(ti,function(n,t){p[t]=function(t,i,r){var u=this._listeningTo||(this._listeningTo={}),f=t._listenId||(t._listenId=_.uniqueId("l"));return u[f]=t,r||typeof i!="object"||(r=this),t[n](i,r,this),this}}),function(){function s(n,i){var r=t[n]||{},u=t[i]||{};return r[i]=u,t[n]=r,t[i]=u,n+"<"+i}function u(n,i){t[n]&&(i?delete t[n][i]:delete t[n])}function f(n,i){var u=t[n],r;return i=i||u,r="",u&&_.size(u)>0&&(u.__reached__=!0,_.each(u,function(n,t){t!="__reached__"&&(n===i?r+=t:n.__reached__||(r+=f(t,i)))}),r&&(r=n+" < "+r),delete u.__reached__),r}function e(t,i){var r=n[t];if(r)return _.isFunction(i)&&i(r),r;if(_.isFunction(i))n.on("moduleDefined",function(r){r==t&&i(n[t])})}function o(t,r,e){var v=!0,c,h,l,a;for(_.isFunction(r)&&(e=r,r=[]),c=0;r&&c<r.length;c++)if(h=r[c],_.isString(h))if(l=n[h],l)r[c]=l;else{v=!1,a=s(t,h),clearTimeout(i[a]),i[a]=setTimeout(_.bind(function(n){var i='Module "'+t+'" is not defined.',r=f(t);i+=r?" Circular reference found: "+r:' Required dependency "'+n+'" not found.';throw i;},this,h),window.SM4_REQUIRE_TIMEOUT||1e4);n.on("moduleDefined",_.bind(function(f,s){s==f&&(u(t,f),n[t]||o(t,r,e),clearTimeout(i[t+"<"+f]),delete i[t+"<"+f])},n,h))}if(v)return n[t]=e.apply(null,r),n.trigger("moduleDefined",t),u(t),n[t]}var n=_.extend({},p),i={},t={};typeof ft=="object"&&(_.each(ft,function(n,t){e(t,n),delete ft[t]}),ft=null),c=e,r=o}(),r("Events",function(){return p}),r("GlobalEvents",["Events"],function(n){return e=_.extend({},n),e.addEventListener=e.on,e.removeEventListener=e.off,e.raiseEvent=e.trigger,e});var pt=function(){var i=function(){var t=0,i,r=function(){t=0,n.isFunction(i)&&i()};return{newCallback:function(i){return t++,function(){n.isFunction(i)&&i(),t--,t==0&&r()}},allDone:function(n){i=n,t==0&&r()}}},t={};return t.iterator=function(n){var t=function(i){var r=function(){return n.length&&n[i].apply(null,arguments),r.next()};return r.next=function(){return i<n.length-1?t(i+1):null},r};return t(0)},t.waterfall=function(n,i){if(i=i||_.noop,!n.length)return i();var r=function(n){return function(t){if(t)i(t),i=_.noop;else{var u=Array.prototype.slice.call(arguments,1),f=n.next();f?u.push(r(f)):u.push(i),setTimeout(function(){n.apply(null,u)},0)}}};r(t.iterator(n))()},{fork:function(){var r=arguments.length-1,u=arguments[arguments.length-1],f,t,i;if(!n.isFunction(u))throw new a("AsyncOperations - fork: last argument must be a function.");for(f=function(){r--,r==0&&u()},t=0;t<arguments.length-1;t++){if(i=arguments[t],!n.isFunction(i))throw new a("AsyncOperations - fork: "+(t+1)+" argument must be a function.");i(f)}},createAsyncManager:function(){return new i},waterfall:t.waterfall}}(),li=function(){function u(){}function f(f,e,o){o&&o.width&&o.height&&o.buttonSpriteUrl||u("parameter buttonInfo of embedClipboardFlash(containerId, callback, buttonInfo) must contain width, height and buttonSpriteUrl");var s="_copyCallback_"+t;t++,window[n]||(window[n]=[]),window[n][s]=function(){return e()},r.embedSWF(i.clipboardFlashUrl,f,o.width,o.height,"9.0.0",null,{buttonSpriteUrl:encodeURIComponent(o.buttonSpriteUrl),copyCallbackName:"window."+n+"."+s},{allowscriptaccess:"always",wmode:"transparent",scale:"noscale",salign:"lt",menu:"false"},{id:f})}var n="Flux4_Core_Utils_Clipboard_GlobalCallbacks",r=function(){function b(){var u,r,f,i;if(!c){if(n.ie&&n.win){u=o("span");try{r=t.getElementsByTagName("body")[0].appendChild(u),r.parentNode.removeChild(r)}catch(e){return}}for(c=!0,p&&(clearInterval(p),p=null),f=y.length,i=0;i<f;i++)y[i]()}}function k(n){c?n():y[y.length]=n}function ut(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)r.attachEvent("onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u(),n()}}else r.onload=n}function ot(){for(var f=e.length,r,i,t=0;t<f;t++)r=e[t].id,n.pv[0]>0?(i=u(r),i&&(e[t].width=i.getAttribute("width")?i.getAttribute("width"):"0",e[t].height=i.getAttribute("height")?i.getAttribute("height"):"0",l(e[t].swfVersion)?(n.webkit&&n.webkit<312&&st(i),s(r,!0)):e[t].expressInstall&&!v&&l("6.0.65")&&(n.win||n.mac)?ft(e[t]):ct(i))):s(r,!0)}function st(n){var s=n.getElementsByTagName(f)[0],e,t,h,i,r,c,u;if(s){if(e=o("embed"),t=s.attributes,t)for(h=t.length,i=0;i<h;i++)t[i].nodeName.toLowerCase()=="data"?e.setAttribute("src",t[i].nodeValue):e.setAttribute(t[i].nodeName,t[i].nodeValue);if(r=s.childNodes,r)for(c=r.length,u=0;u<c;u++)r[u].nodeType==1&&r[u].nodeName.toLowerCase()=="param"&&e.setAttribute(r[u].getAttribute("name"),r[u].getAttribute("value"));n.parentNode.replaceChild(e,n)}}function ht(t){n.ie&&n.win&&l("8.0.0")&&r.attachEvent("onunload",function(){var n=u(t),i;if(n){for(i in n)typeof n[i]=="function"&&(n[i]=function(){});n.parentNode.removeChild(n)}})}function ft(i){var f,e,c;if(v=!0,f=u(i.id),f){i.altContentId?(e=u(i.altContentId),e&&(h=e,w=i.altContentId)):h=g(f),!/%$/.test(i.width)&&parseInt(i.width,10)<310&&(i.width="310"),!/%$/.test(i.height)&&parseInt(i.height,10)<137&&(i.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation";var l=n.ie&&n.win?"ActiveX":"PlugIn",a=t.title,y="MMredirectURL="+r.location+"&MMplayerType="+l+"&MMdoctitle="+a,s=i.id;n.ie&&n.win&&f.readyState!=4&&(c=o("div"),s+="SWFObjectNew",c.setAttribute("id",s),f.parentNode.insertBefore(c,f),f.style.display="none",r.attachEvent("onload",function(){f.parentNode.removeChild(f)})),nt({data:i.expressInstall,id:rt,width:i.width,height:i.height},{flashvars:y},s)}}function ct(t){if(n.ie&&n.win&&t.readyState!=4){var i=o("div");t.parentNode.insertBefore(i,t),i.parentNode.replaceChild(g(t),i),t.style.display="none",r.attachEvent("onload",function(){t.parentNode.removeChild(t)})}else t.parentNode.replaceChild(g(t),t)}function g(t){var u=o("div"),e,i,s,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(s=i.length,r=0;r<s;r++)i[r].nodeType==1&&i[r].nodeName.toLowerCase()=="param"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function nt(t,r,e){var b,p=u(e),k,s,d,w,c,h,v,a,l,y;if(typeof t.id==i&&(t.id=e),n.ie&&n.win){k="";for(s in t)t[s]!=Object.prototype[s]&&(s=="data"?r.movie=t[s]:s.toLowerCase()=="styleclass"?k+=' class="'+t[s]+'"':s!="classid"&&(k+=" "+s+'="'+t[s]+'"'));d="";for(w in r)r[w]!=Object.prototype[w]&&(d+='<param name="'+w+'" value="'+r[w]+'" />');p.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+k+">"+d+"<\/object>",ht(t.id),b=u(t.id)}else if(n.webkit&&n.webkit<312){c=o("embed"),c.setAttribute("type",it);for(h in t)t[h]!=Object.prototype[h]&&(h=="data"?c.setAttribute("src",t[h]):h.toLowerCase()=="styleclass"?c.setAttribute("class",t[h]):h!="classid"&&c.setAttribute(h,t[h]));for(v in r)r[v]!=Object.prototype[v]&&v!="movie"&&c.setAttribute(v,r[v]);p.parentNode.replaceChild(c,p),b=c}else{a=o(f),a.setAttribute("type",it);for(l in t)t[l]!=Object.prototype[l]&&(l.toLowerCase()=="styleclass"?a.setAttribute("class",t[l]):l!="classid"&&a.setAttribute(l,t[l]));for(y in r)r[y]!=Object.prototype[y]&&y!="movie"&&lt(a,y,r[y]);p.parentNode.replaceChild(a,p),b=a}return b}function lt(n,t,i){var r=o("param");r.setAttribute("name",t),r.setAttribute("value",i),n.appendChild(r)}function u(n){return t.getElementById(n)}function o(n){return t.createElement(n)}function l(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),i[2]=parseInt(i[2],10),r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function et(r,u){var h,e,s;n.ie&&n.mac||(h=t.getElementsByTagName("head")[0],e=o("style"),e.setAttribute("type","text/css"),e.setAttribute("media","screen"),n.ie&&n.win||typeof t.createTextNode==i||e.appendChild(t.createTextNode(r+" {"+u+"}")),h.appendChild(e),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(s=t.styleSheets[t.styleSheets.length-1],typeof s.addRule==f&&s.addRule(r,u)))}function s(n,t){var i=t?"visible":"hidden";c?u(n).style.visibility=i:et("#"+n,"visibility:"+i)}var i="undefined",f="object",tt="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",it="application/x-shockwave-flash",rt="SWFObjectExprInst",r=window,t=document,a=navigator,y=[],e=[],p=null,h=null,w=null,c=!1,v=!1,n=function(){var c=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i&&typeof t.appendChild!=i&&typeof t.replaceChild!=i&&typeof t.removeChild!=i&&typeof t.cloneNode!=i,u=[0,0,0],n=null,e,o;if(typeof a.plugins!=i&&typeof a.plugins[tt]==f)n=a.plugins[tt].description,n&&(n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i){e=null,o=!1;try{e=new ActiveXObject(d+".7")}catch(p){try{e=new ActiveXObject(d+".6"),u=[6,0,21],e.AllowScriptAccess="always"}catch(p){u[0]==6&&(o=!0)}if(!o)try{e=new ActiveXObject(d)}catch(p){}}if(!o&&e)try{n=e.GetVariable("$version"),n&&(n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(p){}}var s=a.userAgent.toLowerCase(),h=a.platform.toLowerCase(),l=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=h?/win/.test(h):/win/.test(s),y=h?/mac/.test(h):/mac/.test(s);return{w3cdom:c,pv:u,webkit:l,ie:!1,win:v,mac:y}}(),at=function(){if(n.w3cdom){if(k(ot),n.ie&&n.win)try{t.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var r=u("__ie_ondomload");r&&(r.onreadystatechange=function(){this.readyState=="complete"&&(this.parentNode.removeChild(this),b())})}catch(f){}n.webkit&&typeof t.readyState!=i&&(p=setInterval(function(){/loaded|complete/.test(t.readyState)&&b()},10)),typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",b,null),ut(b)}}();return{registerObject:function(t,i,r){if(n.w3cdom&&t&&i){var u={};u.id=t,u.swfVersion=i,u.expressInstall=r?r:!1,e[e.length]=u,s(t,!1)}},getObjectById:function(t){var o=null,r,e;return n.w3cdom&&c&&(r=u(t),r&&(e=r.getElementsByTagName(f)[0],!e||e&&typeof r.SetVariable!=i?o=r:typeof e.SetVariable!=i&&(o=e))),o},embedSWF:function(t,r,u,e,o,h,c,a,y){var w,b,p;if(n.w3cdom&&t&&r&&u&&e&&o)if(u+="",e+="",l(o)){if(s(r,!1),w=typeof y==f?y:{},w.data=t,w.width=u,w.height=e,b=typeof a==f?a:{},typeof c==f)for(p in c)c[p]!=Object.prototype[p]&&(typeof b.flashvars!=i?b.flashvars+="&"+p+"="+c[p]:b.flashvars=p+"="+c[p]);k(function(){nt(w,b,r),w.id==r&&s(r,!0)})}else h&&!v&&l("6.0.65")&&(n.win||n.mac)&&(s(r,!1),k(function(){var n={};n.id=n.altContentId=r,n.width=u,n.height=e,n.expressInstall=h,ft(n)}))},getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:l,createSWF:function(t,i,r){return n.w3cdom&&c?nt(t,i,r):undefined},createCSS:function(t,i){n.w3cdom&&et(t,i)},addDomLoadEvent:k,addLoadEvent:ut,getQueryParamValue:function(n){var u=t.location.search||t.location.hash,r,i;if(n==null)return u;if(u)for(r=u.substring(1).split("&"),i=0;i<r.length;i++)if(r[i].substring(0,r[i].indexOf("="))==n)return r[i].substring(r[i].indexOf("=")+1);return""},expressInstallCallback:function(){if(v&&h){var t=u(rt);t&&(t.parentNode.replaceChild(h,t),w&&(s(w,!0),n.ie&&n.win&&(h.style.display="block")),h=null,w=null,v=!1)}}}}(),t=0;return{embedClipboardFlash:f}}(),wt=function(n,t){function e(t,i){return o.trace("CookieDataCache"+(n?"["+n+"]:":":")+t,i)}function i(){var t=h.getCookie(n),i=[];if(t)try{i=u.parse(t)}catch(r){e("cookie parsing error: "+r,!0)}return i}function s(n){return n.expires<=(new Date).getTime()}function r(n,t){return _.detect(n,function(n){return n.key==t&&!s(n)})}function f(i){var r=_.reject(i,function(n){return s(n)});r.length>0?h.setCookie(n,u.stringify(r),t):h.setCookie(n,"",-1)}return n||e("cookieName is not defined"),t||(t=9e5),{containsKey:function(n){return!!r(i(),n)},getValue:function(n){return(r(i(),n)||{}).value},add:function(n,u){var o=i(),e=r(o,n);e||(e={key:n},o.push(e)),_.isUndefined(u)||(e.value=u),e.expires=(new Date).getTime()+t,f(o)},removeKey:function(n){var t=i(),u=r(t,n);u&&(u.expires=-1,f(t))},clear:function(){f([])}}};r("CookieHelper",function(){function n(n){var t=_.detect(document.cookie.split("; "),function(t){return t.indexOf(n)==0});if(t)return unescape(t.substring(n.length+1))}function t(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/;"}function i(n,t,i){var u,r;i&&(u=new Date,u.setTime(u.getTime()+i),i="; expires="+u.toGMTString()),r=location.hostname.split("."),r.length>1&&(r=r[r.length-2]+"."+r[r.length-1]),document.cookie=n+"="+t+i+"; path=/; domain="+r}function r(n){this.setCookie(n,"",-1e3)}return{ONE_YEAR:31536e6,getCookie:n,setCookie:t,setCookieToRootDomain:i,removeCookie:r}}),r("CRC32",function(){function n(n){var u=n+"",e="",i,r,s=0,f,t,o;for(i=r=0,s=u.length,f=0;f<s;f++)t=u.charCodeAt(f),o=null,t<128?r++:o=t>127&&t<2048?String.fromCharCode(t>>6|192)+String.fromCharCode(t&63|128):String.fromCharCode(t>>12|224)+String.fromCharCode(t>>6&63|128)+String.fromCharCode(t&63|128),o!==null&&(r>i&&(e+=u.substring(i,r)),e+=o,i=r=f+1);return r>i&&(e+=u.substring(i,u.length)),e}function t(n){for(var i,r=n&65535,t=r.toString(16).toUpperCase();t.length<4;)t="0"+t;for(r=n>>>16&65535,i=r.toString(16).toUpperCase();i.length<4;)i="0"+i;return i+t}return{generate:function(i){var u;i=n(i);var r=0,f=0,e=0;for(r=r^-1,u=0;u<i.length;u++)e=(r^i.charCodeAt(u))&255,f="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(e*9,8),r=r>>>8^f;return r=r^-1,t(r)}}}),r("Debug",function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}return o={trace:function(n,i,r){if(n="WDK4:"+n,this.enabled&&window.console&&window.console.log){var u=t()+" "+n;console.error&&i||console.warn&&r?r?console.warn(u):console.error(u):console.log(u)}},warn:function(n){this.trace(n,!1,!0)},error:function(n){this.trace(n,!0)},enabled:!1}}),r("HtmlHelper",function(){function t(t,i){function nt(t,i,r,u){var f=t.find(i);t.is(i)&&f.push(t),f.each(function(){h(n(this),r,u)})}function h(n,t,i){var f=t+(i?g:0),r,u;n.text().replace(s,"").length>f&&(r=n.html(),u=l(r,t),i&&(u+='<a class="more">&nbsp;more<\/a>'),n.html(u).find(".more").click(function(){this.parentNode.innerHTML=r}))}function c(t){var i=n("<div>").html(t);return i.contents().each(function(){var i=n(this),t;this.nodeType==8?i.remove():(t=i.html(),!!t&&t.length>0&&i.html(c(t)))}),i.html()}function l(n,t){n=c(n);var f=0,e=[],o="",r=0,h=!1,l=!1,a=!1,u="",v=0,i;for(n=n.replace(s,""),n=n.replace(/<br>/gi,"<br/>");f<t&&f!=t&&v<n.length;)i=n.charAt(r),i=="<"&&(o="",a=!0,n.length>r+1&&n.charAt(r+1)=="/"?l=!0:h=!0),a?(o+=i,i==">"&&(h&&!rt(o)&&e.push(o),l&&e.pop(),h=!1,l=!1,a=!1)):(f++,i=="&"&&(f-=tt(n,r))),u+=i,r++,v++;return v<n.length&&(u+="..."),e.length>0&&(u=it(e,u)),u}function tt(t,i){for(var f=t.substring(i,i+7),e=f.charAt(0),r,u=1;u<f.length;u++){if(r=f.charAt(u),r=="<"||r=="&")break;e+=r}return e.length-n("<span>"+e+"<\/span>").text().length}function it(n,t){for(var i=0;i<n.length;i++){for(var u=n[i],f=u.charAt(0)+"/",e=1,r=u.charAt(e);r!=" "&&r!=">";)f+=r,e++,r=u.charAt(e);f+=">",t+=f}return t}function rt(n){for(var i=n.length-2,t=n.charAt(i);t!="<"&&t!="/"&&t==" ";)i--,t=n.charAt(i);return t=="/"?!0:!1}function a(n){var t,r,i;try{return t=Array.prototype.slice.call(n)}catch(u){for(t=[],r=n.length,i=0;i<r;i++)t.push(n[i]);return t}}function u(n){if(typeof n=="string")return n;if(n.nodeType===r.TEXT_NODE)return n.nodeValue;var t=document.createElement("div");return t.appendChild(n),t.innerHTML}function f(t,i){n(t).html(i)}function y(n){var s=[],t,h,f,i,u,e={node:n,nodeType:n.nodeType,subNodes:null},o=[];if(n.nodeType===r.TEXT_NODE){for(i=n.nodeValue.split(st),t=1,f=i.length;t<f;t++)i[t].indexOf("/")||(i[t-1]+="/",i[t]=i[t].substring(1));u=n.nodeValue}else if(n.nodeType===r.ELEMENT_NODE){for(h=a(n.childNodes),t=0,f=h.length;t<f;t++)o.push(y(h[t])),s=s.concat(o[o.length-1].texts);u=s.join(""),i=[u]}else u="",i=[];return e.text=u,e.texts=i,e.subNodes=o,e}function p(n){for(var l,w,h="",o=[],v,a=[],t,s=[],y,k,d=n.node,i=0,c=n.subNodes.length;i<c;i++)if(t=n.subNodes[i],t.nodeType===r.TEXT_NODE)for(y=t.texts,l=0,w=y.length;l<w;l++)a.push([y[l],r.TEXT_NODE,undefined]);else k=t.text,a.push([k,r.ELEMENT_NODE,t]);for(i=0,c=a.length;i<c;i++)t=a[i],v=h+t[0],e(v,!0)?(h=v,t[1]===r.ELEMENT_NODE?o.push(u(t[2].node)):o.push(t[0])):(e(h)?s.push(b(o.join(""))):s.push(o.join("")),h="",o=[],t[1]===r.ELEMENT_NODE?(t[2]=p(t[2]),s.push(u(t[2].node))):s.push(t[0]));return e(h)?s.push(b(o.join(""))):s.push(o.join("")),f(d,s.join("")),n}function ht(t,i){var h=[],e=[],c,b,y=!1,s,p,l,f,k=!1;for(t=a(t),c=0,b=t.length;c<b;c++)s=t[c],s.nodeType===r.TEXT_NODE?(y=!0,l=s.nodeValue):(p=w(s,n.inArray(s.nodeName,v)>=0),y=!p[1],l=p[0]),y?e.push(l):(e&&(f=e.join(""),i||(f=o(f)),h.push(f),e=[]),h.push(u(l)),k=!0);return e&&(f=e.join(""),i||(f=o(f)),h.push(f)),[h,k]}function w(t,i,e){var s,h=n.inArray(t.nodeName,v)===-1;return t?t.nodeType===r.TEXT_NODE?[i?t.nodeValue:o(t.nodeValue),!1]:(t.nodeType===r.ELEMENT_NODE&&t.nodeName!=="A"&&(s=ht(t.childNodes,i),f(t,s[0].join("")),h=h||s[1]),[e?t.innerHTML:u(t),h]):["",!1]}function e(n,t){return!n||ot.test(n)?!1:t&&n.length<=8?!0:ut.test(n)&&ft.test(n)}function b(t){var i=n("<div>"+t+"<\/div>").text();for(i.indexOf("www.")||(i="http://"+i);i.charAt(i.length-1).match(et);)i=i.substring(0,i.length-1);return'<a href="'+i+'" target="_blank">'+t+"<\/a>"}function o(n){var t=document.createElement("div"),i;return f(t,n),i=y(t),t=p(i).node,t.innerHTML}function ct(i){var r=n("<div>"+i+"<\/div>");return t?r.text():w(r[0],!1,!0)[0]}function k(t){var i=n("<div><\/div>");return t.contents().each(function(){var t,r,u;this.nodeType==3?i.append(lt(this.nodeValue)):(t=n(this),r=t.html(),!!r&&r.length>0&&(u=k(t),t.html(u)),i.append(t))}),i.html()}function lt(t){var r,u,f;if(t.length<=i)return t;for(r=n("<div><\/div>"),u=1,f=0;f<t.length;f++)r.append(t.charAt(f)),u==i?(r.append(n("<wbr />")),u=1):u++;return r.html()}function d(t,i){var u,f,r;return t||(t=""),u=t.replace(/&(?!amp;[\w]{2,5};)/g,"&amp;"),u=u.replace(/\n/g,"<br/>"),f=n("<div>").html(u),r="",f.contents().each(function(){if(this.nodeType==3)r+=this.nodeValue;else{var t=n(this);r+=t.is(i)?n("<div>").html(t).html():d(t.html(),i)}}),r}var g=50,s=/(\n|\r)\s{4,}/gi,r={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},v="B,SPAN,WBR,EM,STRONG,I".split(","),ut=/^(((https?|ftp):\/\/)|(www\.))/,ft=/\S$/,et=/[.,!:;\\?]/,ot=/\s/,st=/\b/;return{controlHtmlLength:nt,linkWrapper:ct,truncateHtml:l,toWbr:k,getTextFromHtmlSelectively:d,cutHtmlLength:h}}return t}),r("JSON",function(){return u={stringify:function(n){var t=window.JSON.stringify(n,function(n,t){var i=n&&this[n];return typeof i=="object"&&i instanceof Date?"/Date("+i.getTime()+")/":t});return t&&t.replace(/"\/(Date\(\d+\))\/"/g,'"\\/$1\\/"')},parse:function(n){return eval("("+n+")")},dictionaryToJson:function(n){var t={};return n instanceof Array&&_.each(n,function(n){t[n.Key]=n.Value}),t},parseDate:function(n){return new Date(parseInt(n.replace(/\/Date\(|\)\//gi,"")))}}}),h=function(){function n(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/"}function t(n){for(var r=document.cookie.split("; "),i,t=0;t<r.length;t++)if(i=r[t],i.indexOf(n)==0)return unescape(i.substring(n.length+1));return null}return{getCookie:t,setCookie:n,setActivityFeedCacheCookie:function(){n("_af_skipCache",!0,6e4)},isActivityFeedCacheCookieExist:function(){return!!t("_af_skipCache")},setActivityRatingCookie:function(t,i){n("_af_rating"+t,i,36e5)},getActivityRatingCookie:function(n){var i=t("_af_rating"+n);return i?i*1:0},setSentimentTagCacheCookie:function(){n("_st_skipCache",!0,3e5)},isSentimentTagCacheCookieExist:function(){return!!t("_st_skipCache")}}}(),r("LocalStorageCache",["JSON","BaseSettings"],function(n,t){return function(i){function e(){try{}catch(n){}}var r=s.prototype.isLocalStorageEnabled()?window.localStorage:null,a=(i.TTL||5)*6e4,h=t.getCommunityUcid(),u=i.dataKey,c=u,f=u.timestampKeyPrefix||u+"Saved",l=f;return i.useUcid!==!1&&(u=c+h,f=l+h),{save:function(t){if(!r)return!1;var o=+new Date,i;try{return i=n.stringify(t),r.setItem(u,i),r.setItem(f,o),!0}catch(s){return e("Saving failed: "+s,!0),!1}},read:function(){if(!r)return null;try{var i=parseInt(r.getItem(f),10),t;return i+a<=+new Date?(this.reset(),null):(t=r.getItem(u),t?n.parse(t):null)}catch(o){e("Reading failed: "+o,!0);return}},reset:function(){if(!r)return!1;try{return r.removeItem(u),r.removeItem(f),!0}catch(n){return e("Reset failed: "+n,!0),!1}},resetAll:function(){if(!r)return!1;try{for(key in r)r.hasOwnProperty(key)&&(key.indexOf(c)===0||key.indexOf(l)===0)&&r.removeItem(key);return!0}catch(n){return e("Reset all failed: "+n,!0),!1}}}}}),ii=function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}function i(n){typeof window.Flux4=="object"&&(Flux4._errors||(Flux4._errors=[]),Flux4._errors.push({message:n,timestamp:t()}))}return window.addEventListener&&window.addEventListener("error",i),{traceError:function(n){if(window.console&&window.console.error){var r=t()+" WDK4:"+n;i(n),console.error(r)}}}}(),r("MtvnUserIdHelper",["CookieHelper","DAAPI"],function(n,t){function c(){}function e(){}function s(){}function l(f){var o=i(),l;o?o!=f&&(l=new t("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:u,isAction:!1,skipAkamaiBatch:!0}],{}),l.methods().updateMtvnCookieValue({mtvnUserId:o},e,s),n.setCookie(h,o,n.ONE_YEAR)):c("cookie '"+r+"' not found",!1)}function a(){var r=i(),h=n.getCookie(f),o;!r||r==h||(o=new t("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:u,isAction:!1,skipAkamaiBatch:!0}],{}),o.methods().updateMtvnCookieValue({mtvnUserId:r},e,s),n.setCookie(f,r,n.ONE_YEAR))}function i(){return n.getCookie(r)}var r="vmn_uuid",u="http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/UpdateCookie?mtvnUserId={mtvnUserId}",h="savedvmn_uuid",f="loggedoutvmn_uuid";return{processMtvnUserId:l,processMtvnUserIdForLoggedOut:a,getMtvnCookie:i}}),et={overrideMethod:function(n,t,i){var r=n[t],u=i.length>2;n[t]=function(){if(u){var n=Array.prototype.slice.call(arguments);return n.unshift(r,arguments),i.apply(this,n)}return i.call(this,r,arguments)}}},r("RequestHelper",["Debug","UserAgentHelper","CRC32"],function(t,r,u){var f={},e="application/x-www-form-urlencoded";return w={loadScript:function(r,e,o){var s="F"+u.generate(r),h,c;r=i.addQueryParameter(r,"callback",s),f[s]=f[s]||[],f[s].push(e),f[s].length==1&&(h=n("<script>").attr({src:r,type:"text/javascript"}),b.create(function(i,u){if(h.remove(),u&&u!=200)if(n.isFunction(o))o(i,u);else{var e="There was an error (HTTP "+u+") with request to url "+r+".";i&&(e+=" Error: "+i)}else n.each(f[s],function(){this.call(null,i)});delete f[s]},s),h.bind("error",o),c=document.getElementsByTagName("HEAD")[0]||document.documentElement,c.insertBefore(h[0],c.firstChild))},invokePostRequest:function(t,i,u,f,e){var o={url:t,type:"POST",data:i,crossDomain:!0,async:!e,success:u,error:f,xhrFields:{withCredentials:!0},beforeSend:function(n){n&&(n.withCredentials=!0)}};/ShareService_Share/.test(t)||(o.contentType="application/json"),r.firefox&&(o.async=!0),n.ajax(o)},getRequest:function(t,i,r,u,f){n.ajax({url:t,type:"GET",data:i,dataType:"json",async:!f,xhrFields:{withCredentials:!0},success:r,error:u,crossDomain:!0})},postFormRequest:function(t,i,r,u){n.ajax({url:t,type:"POST",data:i,success:r,contentType:e,xhrFields:{withCredentials:!0},error:u})},setPostContentType:function(n){e=n},_getPostContentType:function(){return e}}}),r("StringHelper",function(){var n="...";return{replace:function(n,t,i){return _.isString(n)?(t=t||{},i=i||/\{(.*?)\}/g,n.replace(i,function(n,i){var r=t[i];return _.isUndefined(r)||_.isNull(r)?"":r})):null},truncate:function(t,i){if(_.isUndefined(t)||_.isNull(t))return"";var r=t.substring(0,i);return i>0&&t.length>i&&(r+=n),r},isEmail:function(n){return/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9._%-]+\.[a-zA-Z0-9._: /]+$/i.test(n)},isPhone:function(n){return/^\(?([0-9]{3})\)?\s*[\. -]?\s*([0-9]{3})\s*[\. -]?\s*([0-9]{4})\s?((ext|x)\s*\.?:?\s*([0-9]+))?$/i.test(n)},camelize:function(n){return n.charAt(0).toLowerCase()+n.substr(1)},capitalize:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},compactNumber:function(n){return n>999999?Math.round(n/1e6)+"m":n>999?Math.round(n/1e3)+"k":n}}}),r("TabSync",["JSON","BaseSettings","GlobalEvents","UrlBuilder"],function(t,i,r,u){function y(){}function p(n){var t=document.createElement("a");return t.href=n,t.hostname}function d(n){var s=p(n.originalEvent.origin),u,e,o;if(s==a&&(u=t.parse(n.originalEvent.data),u)){if(e=u.eventName.split("::")[1],e!="eventFired"&&y("received event: "+e),e=="ready"){h=f[0].contentWindow,k("setCommunityId",{id:i.getCommunityUcid()},function(){setTimeout(g,0)});return}e=="eventFired"?(o=c[u.id],o&&(o.callback&&o.callback(u),delete c[u.id])):r.trigger("TabSync:"+e,u.eventData)}}function w(){f.length||h||(s=u.tabSyncServerUrl,a=p(s),n(window).bind("message",d),f=n("<iframe />").css({position:"absolute",left:-32767,top:-32767}),n("body").append(f),setTimeout(function(){f[0].src=s},5))}function g(){for(var n=0;n<l.length;n++)b(c[l.shift()])}function b(n){h.postMessage(t.stringify(n),s)}function nt(n){e||(n.id=v,c[v++]=n,f.length&&h?b(n):(l.push(n.id),w()))}function k(t,i,r){n.isFunction(i)&&(r=i,i={});var u={eventName:t,eventData:i,callback:r};t!="eventFired"&&y("raising event: "+t),nt(u)}var e,l;try{e=!(window.postMessage&&window.localStorage&&window.JSON)}catch(tt){e=!0}var s,a,f={},h=null,c={},v=0;return l=[],{trigger:k,init:w,disabled:e}}),r("TrackingHelper",["UserAgentHelper","MtvnUserIdHelper"],function(n,r){function c(){s||(h=Math.random(),s=!0)}function l(){c(),y._lastTrackingImage=null;try{var n=new Image;n.onError=_.noop,n.onAbort=_.noop,n.src=p(),y._lastTrackingImage=n}catch(t){}}function p(){return c(),[decodeURIComponent(y._trackingUrl),"?","CMU=",f("CommunityUcid",""),"&CU=",f("ContentUcid",""),"&UU=",f("UserUcid",""),"&LUU=",f("LoggedUserUcid",""),"&PT=",f("PageTypeId","17"),"&CUR=",f("ContentUri",""),"&AU=",f("AbsoluteUri",""),"&WN=",f("WidgetName",""),"&FTG=",encodeURIComponent(h),"&rnd=",encodeURIComponent(Math.random()),"&REF=",f("ReferrerUrl"),"&RT=",f("ReportType",""),"&RP=",f("RP",""),"&RPL=",f("RPL",""),"&RAIU=",f("RAIU",""),"&RAS=",f("RAS",""),"&AIA=",f("activityItemAuthor",""),"&AICD=",f("activityItemClickDetail",""),"&MUID=",f("MtvUuid",""),"&UMT=",f("UserMemberType",""),"&ULS=",f("UserLoginSate",""),"&UNMT=",f("UserNetworkMemberType",""),"&DEV=",y.getDeviceType(f("Device",null))].join("")}function a(){e={}}function u(n,t){e[n]=t}function f(n,t){return e[n]||e[n]===0?encodeURIComponent(e[n]):t}function w(n,t){var i=null;_.isUndefined(n.userLoginState)||(i={userLoginState:n.userLoginState,userMemberType:n.userMemberType,userNetworkMemberType:n.userNetworkMemberType}),i||t!==!0||(i=y.getLoggedInUserInfo()),i&&(u("UserLoginSate",i.userLoginState),i.userLoginState!==0&&(u("UserMemberType",i.userMemberType),u("UserNetworkMemberType",i.userNetworkMemberType)))}function b(){var t=location.href;return n.mobile&&t.indexOf("redirectUrl")>-1?v(t):t}function v(n){return n.indexOf("redirectUrl")===-1?n:v(i.getQueryParameter(n,"redirectUrl"))}var e={},s,h,o={web:1,mobile:2,app:3,player:4};return y={_trackingUrl:"http://t.flux.com/tracking.gif",_lastTrackingImage:null,getLoggedInUserInfo:function(){return t.user?{userLoginState:t.user.communityMember?2:1,userMemberType:t.user.communityMemberType,userNetworkMemberType:t.user.memberType}:{userLoginState:0}},trackWidget:function(n,t,i){a(),u("CommunityUcid",n),u("WidgetName",t),u("ContentUri",i),l()},trackForReporting:function(n,t){a(),u("CommunityUcid",n.communityUcid),u("ContentUri",n.contentUri),u("UserUcid",n.userUcid),u("LoggedUserUcid",n.loggedUserUcid),u("WidgetName","Reporting"),u("ReportType",n.reportType),u("RP",n.product),u("RPL",n.productLocation),u("RAIU",n.activityItemUcid),u("RAS",n.activityService),u("ContentUcid",n.contentUcid),u("activityItemAuthor",n.activityItemAuthor),u("activityItemClickDetail",n.activityItemClickDetail),u("MtvUuid",r.getMtvnCookie()),u("Device",n.device),u("ReferrerUrl",b()),w(n,t),l()},isNativeApp:!1,getDeviceType:function(t){return t&&o[t.toLowerCase()]?o[t.toLowerCase()]:this.isNativeApp===!0?o.app:n.mobile?o.mobile:o.web}}}),nt=function(){var n=0;return{generate:function(){return"F"+(new Date).getTime()+n++}}}(),r("UserAgentHelper",function(){function t(n){var i=n.match(/(firefox|msie|safari|chrome)[\/\:\s]?(\d+\.\d*)?[\d\.]*/i),u=n.match(/(trident).*rv\:(\d+\.\d*)/i),f=n.match(/AppleWebKit[\/\:\s]?(\d+\.\d*)?[\d\.]*.*Mobile/i),e=n.match(/(iphone|ipad|ipod)/i),t={},r;return i?(t[i[1].toLowerCase()]=!0,t.version=i[2]||0,t.safari&&(r=n.match(/(version|phantomjs|crios)\/(\d+\.\d*)?[\d\.]* (mobile\S* )?safari/i),t.version=r&&r[2]||0)):u&&(t.msie=!0,t.version=u[2]),f&&(t.chrome||(t.safari=!0),t.version=t.version||f[1]||0),t.version&&(t.version=parseFloat(t.version)||0),e&&(n.match(/CriOS/)&&(t.chrome=!0,delete t.safari),t.ios=!0,t[e[1].toLowerCase()]=!0),n.match(/android/i)&&(t.android=!0),n.match(/iemobile/i)&&(t.winphone=!0),(t.ios||t.android||t.winphone||window._SM4_simulateMobileDevice)&&(t.mobile=!0),(!t.msie||t.version>7)&&(t.supported=!0),(t.android&&n.match(/FBAN\/FB4A/i)||t.ios&&n.match(/FBAN\/FB(IOS|ForIP)/i))&&(t.fbapp=!0),t.ios&&n.match(/Twitter for iP/i)&&(t.twapp=!0),(t.fbapp||t.twapp)&&(t.webview=!0),t}var n=t(navigator.userAgent);n._apply=t,n.cookies=!1;try{document.cookie="cookietest=1",n.cookies=document.cookie.indexOf("cookietest=")!=-1,document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(i){}return n}),b={create:function(n,t,i){return t=t||nt.generate(),window[t]=i?function(){window[t]=undefined;try{delete window[t]}catch(i){}return n.apply(this,arguments)}:function(){window[t]=undefined;try{delete window[t]}catch(r){}var i=arguments;window.setTimeout(function(){n.apply(this,i)},0)},t}},r("XdReceiver",["Debug","JSON","UrlBuilder","CRC32"],function(t,i,r,u){return{XdReceiver:function(f){function h(n){var t=f.attr("src"),r=t.match(/:\/\/(.[^\/]+)/)[1];f.get(0).contentWindow.postMessage(i.stringify(n),"http://"+r)}function c(n){h(n.data[0]),f.unbind("load",c)}var o=null,s=!1,e="";return f.load(function(){s=!1,e=f.attr("src")}),{loadAndListen:function(h,c,l){if(this.stopListening(),n.isFunction(c)&&(e=h,e=r.addQueryParameter(e,"callbackName",b.create(c,"F"+u.generate(e),!0)),!l)){e=r.addQueryParameter(e,"postMessage","true");var a={};o=function(n){var r=n.origin.toLowerCase(),u;if(e.toLowerCase().indexOf(r)!=0){a[r]=(a[r]||0)+1,a[r]<=10&&t.trace("Hosts differ. Original: "+e+", message received from: "+n.origin,!0);return}try{u=i.parse(n.data)}catch(n){}u&&c(u)},window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent("onmessage",o)}s=!0,f.attr("src",e)},stopListening:function(){o&&(window.addEventListener?window.removeEventListener("message",o,!1):window.detachEvent("onmessage",o),o=null)},send:function(n){f.attr("src")&&!s?h(n):f.load([n],c)}}}}}),r("BaseSettings",function(){function i(){if(t=n("script[widgets4Debug=true],script.widgets4Core")[0],!t){var i=new RegExp("http://k?widgets[34].flux(-dev|-staging)?.com/(Core|Loader)","i");n("script").each(function(){if(i.test(this.src))return t=this,!1})}return t}var t;return i(),{_getCurrentScript:i,getCommunityUcid:function(){return t.getAttribute("id")},getCulture:function(){var n=c("UrlBuilder");return n.getQueryParameter(n._pageUrl(),"culture")||t.getAttribute("culture")}}}),r("Bootstrapper",["AuthenticationTools","GlobalEvents","UserAgentHelper","CookieHelper","MtvnUserIdHelper","Debug"],function(i,r,f,e,o,s){function l(){t.user||t.community.readOnlyMode||o.processMtvnUserIdForLoggedOut();r.on({FbTlToggleChanged:function(n){!t.user||(t.user.publishToFbTimeline=n)},FbTlPromoOverlayDisabled:function(n){!t.user||(t.user.disableFbTimelineFirstTimeNotification=n)},FbTlAlertOverlayDisabled:function(n){!t.user||(t.user.disableFbTimelinePostedNotification=n)},UserPhoneSaved:function(){!t.user||(t.user.hasPhone=!0)}});loadCounter=!!e.getCookie("FluxLoadCounter"+t.community.ucid)==!1?1:Number(e.getCookie("FluxLoadCounter"+t.community.ucid))+1,e.setCookie("FluxLoadCounter"+t.community.ucid,loadCounter,e.ONE_YEAR)}function c(){f.mobile&&!!n.cookie("mobileAuthEvent")&&setTimeout(function(){var i=n.cookie("mobileAuthEvent");i=u.parse(i),r.trigger(i.eventName,{widgetName:!i.productLocation?"Auth":i.productLocation},t.user),e.setCookieToRootDomain("mobileAuthEvent","",-1)},1)}function a(){if(!!t.user&&!t.community.readOnlyMode){var n=e.getCookie(savedMtvnUserIdCookieName)||t.user.loggedMtvnUserId;o.processMtvnUserId(n)}t.user||i.removeBigDoorCookie(),i.dropMasterCookiesOnBrandsDomain(),c(),!it().isContextValid()}function v(){h||(h=!0,l()),a()}var h=!1;return{_fireMobileAuthEventIfNeeded:c,onContextReload:v}}),r("Context",["UserAgentHelper","UrlBuilder","GlobalEvents","RequestHelper","Bootstrapper","BaseSettings","LocalStorageCache"],function(i,r,u,f,e,s,h){function c(){try{}catch(n){}}var l=new h({dataKey:"FluxContext"}),a=s.getCommunityUcid();return t={_queue:[],_resetContextCache:function(n){var t;return n?(t=l.reset(),t&&c("Flux cache reset for community "+a)):(t=l.resetAll(),t&&c("Flux cache reset for all communities")),t||c("Flux cache reset failed"),t},_readContextCache:function(){if(i.mobile)return null;c("Reading context from cache");var n=l.read();return n===undefined?(c("Reading context from cache failed",!0),null):n},reset:function(){this._resetContextCache()},loadIfEmpty:function(n){this.community?n():this._reload(n,!0,!1)},_reload:function(t,i,o){var l=!1,a=r.buildContextUrl(),h=_.bind(function(t){n.extend(this,t),u.trigger("ContextLoaded",this.copy()),n.each(this._queue,function(t,i){try{n.isFunction(i)&&i()}catch(r){console.error(r)}}),this._queue=[],e.onContextReload(),this._resetContextCache(!0)},this),s;this._queue.push(t),this._queue.length===1&&(i&&(s=this._readContextCache(),l=!!s),s?h(s):(this._resetContextCache(!o),c("Loading context from URL"),f.loadScript(a,h)))},reload:function(n){this._reload(n,!1,!0)},copy:function(){return this.community?{community:n.extend(!0,{},this.community),user:!this.user?null:n.extend(!0,{},this.user)}:null},hostedPage:_.isBoolean(window.FluxHostedPage)&&window.FluxHostedPage}}),r("Core",["UrlBuilder","WidgetManager","AuthenticationTools","UserAgentHelper","TrackingHelper","WidgetData","WidgetList","ExternalUrlOverlay","LocalizedResources","TabSync","RoadBlocker","Authentication","ExternalAPIAuth","OverlayManager"],function(i,r,f,s,h,c,l,a,v,y,p,w,b,nt){function it(){}function at(i){t.loadIfEmpty(function(){var t=p.getInstance(!0).performCheck(i);n.isFunction(i.resultCallback)&&i.resultCallback(t)})}function kt(){var i,r;typeof window.Flux4!="object"&&(window.Flux4={}),typeof window.Flux!="object"&&(window.Flux={}),i=window.Flux4,i.createWidget=rt.createWidget,i.getWidgetApi=rt.getWidgetApi,i.signIn=function(n){var i=arguments;t.loadIfEmpty(function(){i.length>1?(i=[].slice.apply(i),w.getInstance(i[0]).signIn.apply(null,i.slice(1))):w.getInstance(n.settings).signIn(n.clickEvent,n.title,n)})},i.signUp=function(n){var i=arguments;t.loadIfEmpty(function(){i.length>1?(i=[].slice.apply(i),w.getInstance(i[0]).signUp.apply(null,i.slice(1))):w.getInstance(n.settings).signUp(n.clickEvent,n.title,n)})},i.signOut=function(n,i){t.loadIfEmpty(function(){w.getInstance().signOut(n,i)})},i.performRoadBlockerCheck=function(n){n=n||{},n.reloadContext&&t.community?f.authenticationChanged(function(){at(n)}):at(n)},i.thouToFluxSignUp=function(n,i,r,u){t.loadIfEmpty(function(){w.getInstance(r).thouToFluxSignUp(n,i,u)})},i.sutSignUp=function(n,i,r){t.loadIfEmpty(function(){w.getInstance(i).sutSignUp(n,r)})},i.getContext=function(i){var r=t.copy();if(n.isFunction(i)){if(!!r){i(r);return}e.once("ContextLoaded",function(n){i(n)})}else return r},i.loadContext=function(i){t.loadIfEmpty(function(){n.isFunction(i)&&i(t.copy())})},i.showInterimForm=function(n,i){t.loadIfEmpty(function(){w.getInstance(n).showInterimForm(i)})},i.addEventListener=function(){arguments[0]&&(arguments[0]=="SignIn"||arguments[0]=="SignUp"||arguments[0]=="Join")?e.once.apply(e,arguments):e.on.apply(e,arguments)},i.removeEventListener=function(){e.off.apply(e,arguments)},i.raiseEvent=function(){e.trigger.apply(e,arguments)},i.showOverlay=function(n){t.loadIfEmpty(function(){n&&nt.showOverlay("authentication",n)})},i.confirm=function(n){t.loadIfEmpty(function(){n&&nt.confirm("authentication",n)})},i.alert=function(n){t.loadIfEmpty(function(){n&&nt.alert("authentication",n)})},i.openFeedbackOverlay=function(){t.loadIfEmpty(function(){a.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.feedbackUrl})})},i.openReportAbuse=function(n,i){if(!n){it("ReportAbuse deep link: obligatory parameter 'itemId' is missed",!0);return}if(!i){it("ReportAbuse deep link: obligatory parameter 'type' is missed",!0);return}var r="&itemId="+n+"&flagItem="+i;i.toLowerCase()=="content"&&(r+="&contentUri="+n),t.loadIfEmpty(function(){a.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.reportAbuseUrl+r})})},i.syncExternalAuth=function(n,i,r,u,f){t.loadIfEmpty(function(){b.login(t.community.externalAuthUrl+"?userid="+n+"&ts="+i+"&tsOfUpdate="+r+"&signature="+u+"&postMessage=true",f)})},i.verifyEmail=function(){t.loadIfEmpty(function(){w.getInstance().verifyEmail()})},i.passwordReset=function(){t.loadIfEmpty(function(){w.getInstance().passwordReset()})},i.linkAccounts=function(){t.loadIfEmpty(function(){w.getInstance().linkAccounts()})},i.changeGlobalContentId=function(n){e.trigger("GlobalContentIdChanged",n)},i.setAnimationDefaults=function(t){var t=_.clone(t),i=k.prototype._validateSettings(tt.animation.type,t,undefined,!0);i.hasError?_.each(i.messages,function(n){it(n.text,n.type==error)}):(ft(tt.animation,t),g=n.extend({},i.defaultSettings,t))},i.disconnectCommunity=function(n){var t=f.getUserAuthParams();y.trigger("synchronizeAuthCookie",{disconnectFromCommunity:!0,cookie:t,communityId:n},function(){e.trigger("AuthCookieSynchronized",t)})},r=_.extend(window.Flux||{},i)}function ft(n,t){_.isObject(n.type)||(n.type={}),_.each(t,function(t,i){_.isObject(n.type[i])||(n.type[i]={}),_.isObject(t)&&!_.isFunction(t)?ft(n.type[i],t):n.type[i].defaultValue=t})}function dt(){var t,r;document.createStyleSheet?(t=document.createStyleSheet(i.commonCssUrl,0),r=t.ownerNode||t.owningElement):(r=t=n("<link>").attr({type:"text/css",rel:"stylesheet",href:i.commonCssUrl}),n(n("head")[0]||n("body")[0]||document.documentElement).prepend(t)),n("<!--[if IE 9]><link rel='stylesheet' type='text/css' href='"+i.commonCssIE9Url+"'/><![endif]-->").insertAfter(r),it("Common css has been added")}function vt(t){if(!t.apiOnly&&!t._inheritOnly&&_.isUndefined(t.container)&&_.isUndefined(t.containerId)&&!ht){var i="Flux4Widget_"+st;st++,document.write('<div id="'+i+'"><\/div>'),t.container=n("#"+i).removeAttr("id")}}function yt(t,i,u,f,e,o,s){if(!f){it(o,!0);return}var h=null;i.container&&(h=n(i.container),delete i.container),i.containerId&&(h=n("#"+i.containerId),delete i.containerId),c.get(t,f,e,function(n){n.controlData=s,r.invokeWidget(h,t,n,i,u)})}function gt(n,t){if(r.isSingletonWidget(n)){var i=r.tryGetWidgetByName(n);if(!!i)return it('"'+n+'" is singleton, will be reused'),t&&t(i.getExternalInterface()),!0}return!1}function pt(n,r,u){et?t.loadIfEmpty(function(){v.loadIfNeed(function(){var e=l.getWidgetInfo(n),h='Widget "'+n+'" is not allowed. Creation is failed',o,t,f;e&&(f=t=i.buildWidgetUrl(e),r._url?t=i.addQueryParameter(r._url,"version",r._version):(r._version?t=i.replaceWidgetVersion(f,r._version):r._version=i.getQueryParameter(f,"version"),t==f&&(o=e.dependencies),s.mobile&&(t=i.addQueryParameter(t,"platform","mobile"),ct.prototype.media.smallScreen.matches&&(t=i.addQueryParameter(t,"media","smallScreen"))))),yt(n,r,u,t,o,h)})}):ot.push(arguments)}function wt(t){var f=t[0],r=null,u=null,i;switch(t.length){case 1:it("createWidget called with no settings");break;case 2:i=t[1],n.isFunction(i)?u=i:r=i;break;case 3:r=t[1],u=t[2];break;default:it("Incorrect args count for createWidget",!0);return}return{name:f,settings:r||{},callback:u}}function ti(n){vt(n.settings),gt(n.name,n.callback)||window.setTimeout(function(){pt(n.name,n.settings,n.callback)},30)}function ii(n){var u,f,t,i;it('Create widget "'+n+'"...'),u={QuickMenu:"UserBar",Comments:"Comments",ContentAction:"ContentAction"};for(f in u)f==n&&(n=u[f]);(t=wt(Array.prototype.slice.call(arguments)),t)&&(i=n.match(/^(\w+)#?(\d+)?>?(.+)?$/),t.name=i[1],t.settings._version=i[2],t.settings._url=i[3],t.settings._externalSettings&&r.applyExternalSettings(t),this._createWidget(t))}function ri(n){it('Get API for widget "'+n+'"...');var t=wt(Array.prototype.slice.call(arguments));t&&(t.settings.apiOnly=!0,this._createWidget(t))}function ui(){ut={}}function bt(t,i,r){var f;return s.safari&&!s.mobile&&n.cookie("eventInfo")?f=u.parse(n.cookie("eventInfo")):(t||i||r)&&(f={widgetName:"auth",eventName:t?"SignIn":i?"SignOut":r?"Join":""}),f}var et=!1,ot=[],st=1,ht=!1,lt=!1,ut={},rt={_createWidget:ti,_getEventInfo:bt,initialize:function(r,u,s,c){(i.getQueryParameter(window.location.href,"closeWindow")=="true"&&window.close(),lt!==!0)&&(lt=!0,o.enabled=r,d.loadFacebookJDK=s,h.isNativeApp=c,it("Register Flux4 object..."),kt(),ft(tt.animation,ni),g=ni,nt.tryOpenUserProfileOverlayViaDeeplink(),o.enabled&&(Flux4.defaultAnimation=ni),n(function(){it("DOM is ready"),ht=!0,u&&dt(),w.getInstance().checkAuthRedirectParams(),l.load(function(){et=!0,e.trigger("CoreInitialized"),n.each(ot,function(){pt.apply(null,this)})}),y.init();e.on("TabSync:synchronizeAuthCookie",function(n){var i=n.cookie,r;if(!_.isEqual(i,ut)){if(ut=i,r=f.getUserAuthParams(),i.umbrellaKey!=r.umbrellaKey)return;if(signedIn=!r.loggedIn&&i.loggedIn,signedOut=r.loggedIn&&!i.loggedIn||n.disconnectFromCommunity,userGlobalTypeChanged=i.globalMemberType!=r.globalMemberType,joined=i.isMember!=r.isMember,signedIn||signedOut||userGlobalTypeChanged||i.isMember!=r.isMember||i.initialConnection!=r.initialConnection||i.hasRoadblock!=r.hasRoadblock){if(!signedIn&&!signedOut&&n.communityId!=t.community.ucid&&!userGlobalTypeChanged)return;f.authenticationChanged(null,!0,bt(signedIn,signedOut,joined),signedIn)}}})}))},createWidget:ii,getWidgetApi:ri,createControl:function(n,t,r,u){it('Create control "'+n+'" with version '+t.version+"..."),vt(r);var f=i.buildControlUrl(n,t.version),e='Control "'+n+'" is not allowed. Creation is failed';yt(n,r,u,f,null,e,t)},setLastAuthCookie:ui};return _.bindAll(rt,"initialize","createWidget","createControl","getWidgetApi","setLastAuthCookie"),rt}),r("LocalizedResources",["UrlBuilder","RequestHelper","BaseSettings"],function(t,i,r){function e(t){return u={},n.each(t,function(n,t){u[t.name.toLowerCase().replace("widgets4,","")]=t.strings}),u}function o(){var t=r.getCulture(),n=c("Context");return t||(t=!n.user||!n.user.localization||!n.user.localization.cultureName?n.community.localization.cultureName:n.user.localization.cultureName),t}var u,f;return{_getResources:function(){return u},_setResources:e,loadIfNeed:function(n){var r=o(),s=f!=r,h;s&&(u={}),r.toLowerCase()!="en-us"&&(!f||s)?(h=t.buildLocalizedResourcesUrl(r),i.loadScript(h,function(t){f=r,e(t),n()})):(f=r,n())},merge:function(t,i,r){var f=u?u[t.toLowerCase()]:null;return n.extend({},i,f||{},r)},getCurrentCulture:o}}),r("UrlBuilder",["StringHelper","BaseSettings"],function(r,u){function l(n,t,i){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var u="[\\?&#]"+t+"=([^&#]*)",f=new RegExp(u),r=f.exec(n);return r?i?r[1]:decodeURIComponent(r[1]):""}function ft(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\#&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:""}function s(n,t){var u=n.split("#"),i;!u[1]||(n=u[0]);var e=l(n,t,!0),f=t+"="+e,o=f.length,r=n.indexOf(f);return r>0&&(i=r+o,n[r-1]!="?"||i==n.length?r--:i++,i=Math.min(i,n.length),n=n.substring(0,r)+""+n.substring(i)),!u[1]||(n=n+"#"+u[1]),n}function h(n,t,i,r){var u=n.split("#"),f;return n=u[0],n=s(n,t),f=n.indexOf("?"),f==-1?n+="?":f<n.length-1&&(n+="&"),n+=t,i&&(n+="="+(r?i:g(i))),typeof u[1]=="string"&&(n+="#"+u[1]),n}function g(n){return encodeURIComponent(n)}function et(n){return decodeURIComponent(String(n).replace(/\+/g," "))}function ot(n,t,i){return n=n.replace(/#.*$/,""),n=s(n,t),n+="#"+t,i&&(n+="="+i),n}function nt(n){return!o.enabled||!n||n.toLowerCase().indexOf((y.toLowerCase()+"="+p).toLowerCase())!=-1?n:h(n,y,p)}function st(n){var t=n.match(tt);return t&&t[1]}var y="enableWidgetsDebug",p="true",w="http://cus.flux.com/api/widgetsService/widgetList?communityUcid={communityUcid}",it="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/widgets4Context",e="s.fluxstatic.com/widgets4",rt="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/LocalizedResources?culture={culture}&resourceGroupId=50",ut="graph.facebook.com",b=w.replace(/^.+\/cus(.flux.*.com\/).+$/,"$1"),k=location.search||location.hash,f=l(k,"enableDevEnv"),a=".flux-dev.com/",d,tt,v;return f||(f=l(k,"enableStagingEnv"),a=".flux-staging.com/"),f&&(f=f.split(",")),d=/((?!\?)[\w]+=&|[&?][\w]+=$)/g,tt=/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i,v="http://"+e+"/CSS/common.css?v=32",i={_pageUrl:function(n){if(typeof n=="string")location.href=n;else return location.href},_openWindow:function(n,t){return window.open(n,t||"_blank")},commonCssUrl:v,commonCssIE9Url:v.replace(".css","-ie9.css"),coreFlashUrl:"http://"+e+"/Flash/Core/Core.swf",clipboardFlashUrl:"http://"+e+"/Flash/Clipboard/Clipboard.swf",zeroClipboardFlashUrl:"http://"+e+"/Flash/ZeroClipboard/ZeroClipboard10.swf",tabSyncServerUrl:"http://"+e+"/TabSync/Server.min.html",facebookSignUpUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/FacebookSignUp2",logoutUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/Logout",buildWidgetUrl:function(n){if(n)return f&&_.contains(f,n.name)&&(c("WidgetData").getCustomCss(u.getCommunityUcid(),n.name),n.url=n.url.replace(b,a),n.url=s(s(n.url,"communityUcid"),"customCss")),nt(n.url)},replaceWidgetVersion:function(n,t){return t?n.replace(/version\=\d+/,"version="+t):n},buildControlUrl:function(n,t){var i=c("WidgetList").getControlInfo(n);if(i)return nt(i.url.replace("{version}",t||""))},buildWidgetListUrl:function(){return w.replace("{communityUcid}",u.getCommunityUcid())},buildContextUrl:function(){var n="";return typeof FluxAuthPresentation!="undefined"&&(n="&authPresentation="+FluxAuthPresentation),it.replace("{communityUcid}",u.getCommunityUcid())+n},buildDaapiUrl:function(t){var s,o,e;if(t.params)for(s in t.params)o=t.params[s],_.isString(o)&&o.trim()&&(t.params[s]=encodeURIComponent(o));return e=r.replace(t.template,n.extend({communityUcid:u.getCommunityUcid()},t.params||{})),t.bypassCache&&(e=h(e,"skipCache","true")),t.product&&(e=i.addQueryParameter(e,"product",t.product,!0)),t.productLocation&&(e=i.addQueryParameter(e,"productLocation",t.productLocation,!0)),t.device&&(e=i.addQueryParameter(e,"device",t.device,!0)),e=e.replace(d,""),f&&(e=e.replace(a,b)),e},addQueryParameter:h,encode:g,decode:et,addAnchorParameter:ot,getDomainName:st,getQueryParameter:l,getAnchorParameter:ft,removeQueryParameter:s,buildLocalizedResourcesUrl:function(n){if(t.community)return r.replace(rt,{communityUcid:u.getCommunityUcid(),culture:n})},addCultureQueryParameter:function(n){var t=u.getCulture();return t?h(n,"culture",t):n},getProductLocationName:function(n){return(n||"").toLowerCase()},addDeviceQueryParameter:function(n){return h(n,"device",c("TrackingHelper").getDeviceType())},getThumbnailUrl:function(n,t){var i,u,r;if(n&&n.CustomTemplate)return i=n[t]||t,n.CustomTemplate.indexOf(ut)>0?(u=i.split("x"),n.CustomTemplate+"?width="+u[0].match(/\d+/)[0]+"&height="+u[1].match(/\d+/)[0]):n.CustomTemplate.replace(i?"(THUMBNAIL_SIZE)":"THUMBNAIL_SIZE",i);r="http://s.fluxstatic.com/widgets4/Img/";switch(t){case"Small":return r+"anonymous40.png";case"Medium":return r+"anonymous50.png";case"Large":return r+"anonymous70.png"}return""}}}),r("WidgetData",["UrlBuilder","WidgetList","UserAgentHelper","RequestHelper","StyleSheetHelper"],function(t,i,r,u,f){function a(n,t){s[n]=t}function h(t,i,r,u){var f=(i.name+":"+i.version).toLowerCase();o[t]={id:f,callbacks:u&&n.isFunction(u)?[u]:[]},r&&r.push(f)}function v(n,u,f){n&&(_.each(n.widgets,function(n){var s=i.getWidgetInfo(n.name),o=t.buildWidgetUrl(s),l,a;s&&o&&(l=t.getQueryParameter(o,"version"),!n.version||n.version==l?n.version=l:(o=t.replaceWidgetVersion(o,n.version),a=!0),r.mobile&&(o=t.addQueryParameter(o,"platform","mobile"),ct.prototype.media.smallScreen.matches&&(o=t.addQueryParameter(o,"media","smallScreen"))),c(o)&&(h(o,n,u),a||e._processAllDependencies(s.dependencies,u,f)))}),_.each(n.controls,function(n){var i=t.buildControlUrl(n.name,n.version);i&&c(i)&&h(i,n,f)}))}function c(n){return!s[n]&&!o[n]}function y(n,t){var r=[],u=[],i=n;return t&&(e._processAllDependencies(t,r,u),i=e._addArrayToUrl(i,"widgets",r),i=e._addArrayToUrl(i,"controls",u)),i}function p(n,i,r){var u=r.join(",");return!u?n:t.addQueryParameter(n,i,u)}function w(t){var r,e,i,u,f;for(r in t){e=r.toLowerCase();for(i in o)if(u=o[i],u.id==e){f=t[r],a(i,f),delete o[i],n.each(u.callbacks,function(n,t){t(f)});break}}}var s={},o={},l="cus.flux.com",e={_addArrayToUrl:p,_processAllDependencies:v,_buildUrlWithDependencies:y,_loadWidgetHandler:w,get:function(n,i,r,f){var c=s[i],l=o[i],a;c?f(c):l?l.callbacks.push(f):(h(i,{name:n,version:t.getQueryParameter(i,"version")},null,f),a=e._buildUrlWithDependencies(i,r),u.loadScript(a,e._loadWidgetHandler))},getCustomCss:function(n,t){var i="http://"+l+"/api/widgetsService/CustomCss?communityUcid="+n+"&widgetName="+t;u.loadScript(i,function(n){f.embedStyleSheet(n)})}};return e}),r("WidgetList",["LocalStorageCache","Debug","UrlBuilder","RequestHelper"],function(n,t,i,r){function u(){try{}catch(n){}}var e=new n({dataKey:"FluxWidgetList",TTL:60}),o=["widgets","controls"],f={load:function(n){var h=!1,c=function(t){u("Done"),h||(e.save(t),u("Saved to cache")),f.isLoaded=!!t,_.each(o,function(n){f[n]={},_.each(t[n],function(t){f[n][t.name.toLowerCase()]=t,u(n+": "+t.name+" -> "+t.url)})}),n()},s;u("Load data..."),s=t.enabled?null:e.read(),s?(h=!0,u("Read from cache"),c(s)):(u("Loading from URL"),r.loadScript(i.buildWidgetListUrl(),c))},getWidgetInfo:function(n){return f.widgets[n.toLowerCase()]},getControlInfo:function(n){return f.controls[n.toLowerCase()]}};return f}),r("DAAPI",["UrlBuilder","UserAgentHelper","DaapiAkamaiBatch"],function(t,i,r){return function(f,e,s,h){function c(){var n="DAAPI["+f+"]:";e&&(n+="Instance["+e+"]:")}function b(t,i,r){return!n.isFunction(i)||!n.isFunction(t)?(c('onComplete or onError delegate is not specified. Request with template "'+r+'" has been skipped',!0),!1):!0}function k(n,t,i,r){n&&n.readOnly?(c("ReadOnly mode detected",!0),i(new a(lt.readOnlyMode,n))):n&&n.d&&!_.isUndefined(n.d.StatusCode)&&n.d.StatusCode?(c("Widgets web service call returned error: code "+n.d.StatusCode+", message: "+n.d.ErrorText,!0),i(new a("WebService#"+n.d.StatusCode,n))):(!!r&&_.isFunction(r)&&r(n),t(n))}function d(n,t){return _.isUndefined(t)?!1:t&&!_.isString(n[t])?(c('Parameter "'+t+'" is configured as skip cache parameter, but its value is not string or absent',!0),!1):!0}function g(n,t){return n[t]+"_"+f}function nt(n){return n+"Completed"}function rt(n,i,f){return function(){var tt=arguments.callee,it=arguments[arguments.length-2],l=arguments[arguments.length-1],o,e,s,y;if(b(it,l,n)){o=!1,_.isBoolean(arguments[arguments.length-3])?(o=arguments[arguments.length-3],e=arguments[arguments.length-4],s=!!arguments[arguments.length-5],e.skipLocalCache&&(y=e.skipLocalCache,delete e.skipLocalCache)):(e=arguments[arguments.length-3],s=!!arguments[arguments.length-4],d(e,i)&&(o=p.containsKey(g(e,i)),o&&c("Skip cache param has been detected: name="+i+" value="+e[i]))),n.indexOf("FindActivities2")!==-1&&c(u.stringify(ft(e)));var nt=Boolean(t.getQueryParameter(n,"skipCache")),h=function(t){v(tt,e,t),k(t,it,l,function(t){nt||y||ri.set(n,e,t)})},rt=function(){var i=t.buildDaapiUrl({template:n,params:e,bypassCache:o}),u=function(n,t){v(tt,e,n);var r;switch(t){case 400:r="There was an error (HTTP 400) with daapi request "+i+". Most likely that url is malformed. Check that you provided all information in it: community UCID, content UCID (if applicable), sorting/filtering options.";break;case 500:r="There was an error (HTTP 500) with request to url "+i+". There might be some server side troubles. Please check url again and if you continue to experience this problem - report this URL to Social Media support team.";break;default:r="There was an error (HTTP "+t+") with request to url "+i+"."}n&&(r+=" Error: "+n),c(r,!0),l(new a(lt.systemError,n))};c("GET "+(s?"sync ":"")+i),f=!t.getQueryParameter(i,"cacheDuration")?f:!0,s?w.getRequest(i,{},h,function(n,t){u(t,n.status)},s):f?w.loadScript(i,h,u):r.enqueueRequest(i,h,u)};!!o||nt||y?rt(nt):ri.get(n,e,h,rt)}}}function ut(i,r){return function(){var l=arguments.callee,a=arguments[arguments.length-2],e=arguments[arguments.length-1],o,s;if(b(a,e,i)){var f=arguments[arguments.length-3],nt=!!arguments[arguments.length-4],tt=f.device;delete f.device,o=t.buildDaapiUrl({template:i,params:n.extend({},f),product:(h.settings||{}).product,productLocation:(h.settings||{}).productLocation,device:y.getDeviceType(tt)}),s=u.stringify(f||{}),c("POST "+(nt?"sync ":"")+o),w.invokePostRequest(o,s,function(n){v(l,s,n);var t=function(n){n.Status==1&&d(f,r)&&(p.add(g(f,r)),c("Skip cache param has been added: value="+f[r])),n.Status&&n.Status!=1&&n.Status!=47?_.isFunction(e)&&e(n):a(n)};k(_.isString(n)?u.parse(n):n,t,e)},function(){v(l,s,null),c("There was an error with daapi POST request "+o,!0),_.isFunction(e)&&e()},nt)}}}function ft(n){var t={dashboardShowAllCommunities:!1,dashboardShowOnlyFollowFeed:!1,dashboardIsUserBar:!1,cultureLcid:0,includeChildren:!1,includeGuestActivities:!1,showParentAddedChild:!1,popularActivitiesCount:0,sortByTopCounter:!1};return _.each(n,function(i,r){t[r]==i&&delete n[r]}),n}var tt=!1,p=new wt("WDK4SkipDaapiCacheFlags"),l={},it=function(n){return _.detect(_.functions(l),function(t){return l[t]==n})},v=_.bind(function(t,i,r){var u=nt(it(t));h&&n.isFunction(h.callExternalInterface)&&h.callExternalInterface(u,i,r)},this);n.each(s,function(n,t){var r=tt||!!t.skipAkamaiBatch||!i.mobile;l[t.name]=t.isAction?ut(t.template,t.skipCacheParam):rt(t.template,t.skipCacheParam,r)}),this.initEvents=function(t){var i=[];return this.externalInterface=t,n.each(_.functions(l),function(n,r){var u=nt(r);t[u]=_.noop,i.push(u)}),i},this.methods=function(){return l}}}),r("DaapiAkamaiBatch",["RequestHelper","CRC32"],function(t,r){function s(){}function c(){var i,r;u=null,i=f,f=[],r={},n.each(i,function(){r[this.name]=this.url}),t.setPostContentType("application/x-www-form-urlencoded"),t.postFormRequest(e,n.param(r),function(r){n.each(i,function(){var i=r[this.name];i&&!i.akamaiError?n.isFunction(this.onComplete)&&this.onComplete(i):t.loadScript(this.url,this.onComplete,this.onError)})},function(r){s("There was an error (HTTP "+r.status+") with request to url "+e+"."),n.each(i,function(){t.loadScript(this.url,this.onComplete,this.onError)})},!0)}var h=500,e="http://daapiak.flux.com/combine.esi",u=null,f=[];return{enqueueRequest:function(t,e,o){if(!u||(clearTimeout(u),u=null),!i.getQueryParameter(t,"callback")){var l=r.generate(t);f.push({name:l,url:t,onComplete:e,onError:o})}else s('Url should not have a "callback" parameter.',!0),n.isFunction(o)&&o("",400);u=setTimeout(c,h)}}});var ri=function(){function t(n,t){var i=[],r,f;for(r in t)f=r+"="+(t[r]!=null?t[r]:""),i.push(f);return i=i.sort(),n+"_"+u.stringify(i)}var n={};return{get:function(i,r,u,f){var e=t(i,r);return n[e]?u(n[e]):f(),n[e]},set:function(i,r,u){var f=t(i,r);n[f]=u},reset:function(i,r){n[t(i,r)]=undefined}}}(),a=function(n,t){this.id=n,this.description=t},lt=function(){var t={};return n.each(["unexpected","unknown","invalidParameters","systemError","notFound","forbidden","notLoggedIn","ratingUnsupportedSystem","ratingIllegal","ratingIllegalSystem","invalidCaptcha","readOnlyMode","faceBookAccountAlreadyLinkedToAnother","accountNotFound","incorrectPassword"],function(n,i){t[i]=i}),t}();r("PostAuthAction",["PostAuthActionParams","UserAgentHelper"],function(i,r){return function(u){function e(){r.mobile&&t.user&&t.user.communityMember&&(f.readyToUse()||f.readyToUse(!0))}var f=i.get();return{save:function(){f.readyToUse(!1),f.add(u,n.makeArray(arguments))},tryExecute:function(n,t){if(e(),f.readyToUse()){var i=f.getValue(u);i&&(t&&i.push.apply(i,t),n.apply(null,i),f.removeKey(u))}},getActionParams:function(){return f}}}}),r("PostAuthActionParams",function(){var n,t="readyToUse";return{get:function(){return n||(n=new wt("PostAuthActionParams",3e5),n.readyToUse=function(i){if(typeof i=="undefined")return n.getValue(t);i?n.add(t,i):n.clear()}),n}}}),r("RoadBlocker",["Debug","Context","GlobalEvents"],function(t,i,r){return{getInstance:function(u,f){function e(){}function o(){u&&setTimeout(function(){r.trigger("roadBlock",{widgetName:f},i.user)},1)}function s(t){return n.isFunction(t)&&i.community.readOnlyMode?(t(new a(lt.readOnlyMode)),o(),!0):!1}return{needsRoadblocking:function(n){var t;return i.user?(n&&i.user.roadBlocker.FRD||(t=i.user.roadBlocker.redirectUrl),t)?!0:!1:!0},performCheck:function(n){var r,t;return(typeof n.fromSignIn=="string"&&(n.title=n.fromSignIn,n.fromSignIn=!1),typeof n.eventName=="boolean"&&(n.silent=n.eventName),typeof n.title=="boolean"&&(n.silent=n.title),r=c("Authentication").getInstance(null,f),!i.user)?s(n.readOnlyModeHandler)?!1:(r.signIn(null,n.title,{productLocation:n.productLocation,useOriginalRedirect:n.useOriginalRedirect||!1,blockedAction:n.blockedAction}),o(),e("User is not logged in"),!1):(e("Perform check, checkFrdOnly = "+!!n.checkFrdOnly),n.eventName=!n.eventName?"Join":n.eventName,n.checkFrdOnly&&i.user.roadBlocker.FRD||(t=i.user.roadBlocker.redirectUrl),t)?s(n.readOnlyModeHandler)?!1:n.silent?!1:(r.isOverlayMode()?(r.showInterimForm(null,n.fromSignIn,n.title,n.eventName,n.productLocation,n.blockedAction),o()):(t=t.replace("(returnPath)",encodeURIComponent(location.href)),e("Perform redirect to "+t),window.location.href=t),!1):(e("Action allowed"),e("Bypass check"),!0)},userCanPostComment:function(n){if(!i.user)e("User is not logged in, bypass check");else{if(e("Can user post a comment?"),i.user.isSystemBanned||i.user.isCommunityBanned)return e("User is banned"),!1;if(i.user.roadBlocker.userCanPostComment)e("Action allowed");else return e("User can't post a comment"),this.performCheck({checkFrdOnly:!1,checkFrdOnly:n}),!1}return!0}}}}}),r("StyleSheetHelper",["UserAgentHelper"],function(t){function s(n){var t=n.match(/\}/g);return t?t.length:0}function h(t){var i=document.createElement("style"),r;return i.type="text/css",i.className="flux4Style",i.styleSheet&&(i.styleSheet.cssText=""),r=n(n("head")[0]||document.body||document.documentElement),t?r.append(i):r.prepend(i),i}function c(n,t){n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t}var e=500,f=[],r=null,i="",o="\n",u=0;return{_createStyleSheet:h,_insertStyles:c,embedStyleSheet:function(n,h){var c,l;_.include(f,n)||(f.push(n),h&&(n=this._matchBreakpoints(n,h.breakpoint||h.breakpoints,h._breakpoints),delete h._breakpoints),c=!r,t.msie&&t.version<=9?(i+=o,l=s(n),u+l>e&&(c=!0,i="",u=0),u+=l,i+=n):(c=!0,i=n),c&&(r=this._createStyleSheet()),this._insertStyles(r,i))},_matchBreakpoints:function(n,t,i){var f,r,u,e,o;if(n.indexOf("@media")>=0)for(t=_.isArray(t)?t:[t],i=_.isArray(i)?i:[i],f="(@media|and)\\s*\\(\\s*(min|max)-width\\s*:\\s*{0}\\s*px\\s*\\)",r=0;r<i.length;r++)for(u=-1;u<2;u++)e=i[r]+u,o=t[r]+u,n=n.replace(new RegExp(f.replace(/\{0\}/,e),"g"),"$1 ($2-width:"+o+"px)");return n}}}),r("UserProfileHelper",["UrlBuilder","WidgetManager","UserAgentHelper","GlobalEvents","Context"],function(t,i,r,f,e){function s(n){return/(Account|Auth\/4300)\/MobileUserProfile/.test(n)}function h(n){return _.each(i.getPersistentWidgets(),function(i,r){n=t.addQueryParameter(n,r.toLowerCase()+"Settings",btoa(i))}),n}var l={_addPersistentSettings:h,_checkIsMobileUserProfileLocation:s,getMobileUserProfileUrl:function(n,i){var r=e.community.userProfileUrl.replace("ProfileAccount/Edit","Auth/4300/MobileUserProfile/Edit"),u,f;return i?r=t.addQueryParameter(r,"doNotShowBackButton",!0):(u=t._pageUrl(),f=t.getQueryParameter(u,"redirectUrl"),f||u.indexOf(r)!=0||(f=u),r=t.addQueryParameter(r,"redirectUrl",f)),r=this.getUserProfileUrl(r,n),r=t.addQueryParameter(r,"touch","true"),h(r)},getUserProfileUrl:function(n,i,r,u){r&&(n=t.addQueryParameter(n,"userProfileTabId",r)),u&&(n=t.addQueryParameter(n,"userProfileTabParam",u)),n=t.addDeviceQueryParameter(n);var f=n.indexOf("#")!=-1&&n.indexOf("#openUserProfile")==-1;return f?t.addQueryParameter(n,"openUserProfile",i):t.addAnchorParameter(n,"openUserProfile",i)},openMobileUserProfile:function(n,r,f,o,h){var l,p,v,y,c;h=h||{},h.settings=h.settings||{};var w=function(n){n.origin.indexOf(t.getDomainName(e.community.authentication.accountDeactivatedUrl))==-1||n.data!=="deactivated"||!l||(p=setInterval(k,2e3))},k=function(){(!l||l.closed==undefined||l.closed)&&(clearInterval(p),i.reloadWidgets())},a=t._pageUrl(),b=function(n){var i,u,r;return s(a)?(i=a,n&&(i=t.addQueryParameter(i,"userprofileSettings","*")),i):(u=t.getQueryParameter(a,"redirectUrl"),!!u)?u:h.settings._hostedPage?a:(r=t.removeQueryParameter(a,"openUserProfile"),r=t.removeQueryParameter(r,"userProfileTabId"),t.removeQueryParameter(r,"userProfileTabParam"))};if(f&&(f=f.toLowerCase(),f=="social"?(f="account",v="thirdPartyConnections"):(o&&typeof o=="string"&&(y=u.parse(decodeURIComponent(o))),v=y&&y.subTabId),f=="account"&&e.user&&e.user.ucid==n)){if(c=this.getMobileAccountUrl(v),c=t.addQueryParameter(c,"redirectUrl",b()),h.settings._hostedPage){if(r)return t._pageUrl(c),!1}else return r?(c=t.addQueryParameter(c,"doNotShowBackButton",!0),window.addEventListener("message",w,!1),l=t._openWindow(c)):t._pageUrl(c),!1;return!1}if(c=this.getMobileUserProfileUrl(n,!s(a)),c=this.getUserProfileUrl(c,n,f,o),c=t.addQueryParameter(c.replace(/#openUserProfile=.+$/,""),"openUserProfile",n),c=t.addQueryParameter(c,"redirectUrl",b(!0)),h.settings._hostedPage){if(r)return t._pageUrl(c),!1}else return r?(window.addEventListener("message",w,!1),l=t._openWindow(c)):t._pageUrl(c),!1;return!0},getMobileAccountUrl:function(n){var i;return n&&(i=e.user[n+"OverlayUrl"]),i||(i=e.community.userProfileUrl),i=t.addQueryParameter(i,"product","Profile"),i=t.addQueryParameter(i,"productLocation","ProfileOverlay"),i=t.addQueryParameter(i,"touch","true"),i=t.addDeviceQueryParameter(i),h(i)},isTabEnabled:function(t,r){var u,e;if(n.isFunction(r))if(u=i.tryGetWidgetByName("UserProfile"),!u){e=this;f.once("WidgetLoaded:userprofile",function(){e.isTabEnabled(t,r)})}else r(u.getExternalInterface().isTabEnabled(t))},openUserProfile:function(t,u,e,s,h){!t;var l=i.tryGetWidgetByName("UserProfile");if(!l)if(rt.smallScreen.matches&&r.mobile)this.openMobileUserProfile(t,u,s,h);else if(i.isLoadingSingleton("userprofile"))f.on("WidgetLoaded:userprofile",function(){l=i.tryGetWidgetByName("UserProfile"),l.getExternalInterface().openProfile(t,u,s,h)});else c("Core").createWidget("UserProfile",{container:n("<div>")},function(n){n.openProfile(t,u,s,h)});else l.getExternalInterface().openProfile(t,u,s,h)}};return _.bindAll(l,"openUserProfile","openMobileUserProfile","getUserProfileUrl","getMobileUserProfileUrl","isTabEnabled"),l}),r("Widget",["GlobalEvents","UserAgentHelper","DAAPI","StringHelper","LocalizedResources"],function(i,r,f,e,s){return k=function(t,i,r,e){this._widgetName=i,this._container=t,this._settings=e,this._defaultSettings=null,this._controls=r.controls,this._daapiUrls=r.daapiUrls,this._markup=r.markup,this._strings=r.strings,e._parentWidget&&(e._inheritOnly&&(this._daapiUrls=_.map(r.daapiUrls,function(n){var t=_.find(e._parentWidget._daapiUrls,function(t){return t.name==n.name});return t||n}),this._markup=_.extend({},this._markup,e._parentWidget._markup),this._strings=_.extend({},this._strings,e._parentWidget._strings)),this._parentWidget=e._parentWidget,delete e._parentWidget),this._style=r.style,this._controlData=r.controlData,this._context={},this._updateContext(),this._renderCompleteList=[],this._instanceId=++k.instanceCounter,this._clearContainer=!0,this._createThisProxy();try{this._trace("Create...");var s=new f(this._widgetName,this._instanceId,this._daapiUrls,this.thisProxy),o=new ht(this._widgetName,r,s);ut.apply(this,o),this._instance=new r.constructor(n,this.thisProxy,o,this._context,n.extend({},lt),u),this.thisProxy._isMVC?(delete this.thisProxy._isMVC,this.thisProxy.require("MainView",_.bind(function(n){e._inheritOnly||(this._mainView=new n,this._instance.externalInterface=this._mainView.externalInterface,this._prepareExternalInterface(o)),_.defer(_.bind(function(){this.trigger("constructed")},this))},this))):(this._prepareExternalInterface(o),_.defer(_.bind(function(){this.trigger("constructed")},this)))}catch(h){this._trace(h+". Creation is failed",!0),this._isError=!0}},k.instanceCounter=0,k.prototype={render:function(t,i){if(i&&(this._updateContext(),this._updateThisProxy()),!_.isFunction(this._instance.render)&&(!this._mainView||this._mainView.render===ut.View.prototype.render)){_.isFunction(t)&&t();return}if(!this._container){this._onRenderError("containerId or container is not specified",t);return}if(!this._container.length){this._onRenderError("container is not found",t);return}try{this._trace("Render...");var r=!i||this._clearContainer?n("<div />"):this._container.children(":first"),u=_.bind(function(){this._container&&(!i||this._clearContainer)&&this._container.empty().append(r),_.isFunction(t)&&t(),n.each(this._renderCompleteList,function(n,t){t()}),this._renderCompleteList=[]},this);this._mainView?(this._clearContainer=!1,i?_.isFunction(this._mainView.reload)&&this._mainView.reload():(this._mainView.setElement(r),this._mainView.render(u))):this._clearContainer=this._instance.render(r,u,i)!==!1,this._trace("Done")}catch(f){this._onRenderError(f,t)}},_prepareExternalInterface:function(n){this._instance.externalInterface||(this._instance.externalInterface={});var t=n.initEvents(this._instance.externalInterface);this._controlData&&(this._instance.externalInterface.getCoreEventNames=function(){return t}),this._trace("Done")},getExternalInterface:function(){return this._instance.externalInterface},getApi:function(){return this._instance.API},getStyle:function(){return this._style},isError:function(){return this._isError},getName:function(){return this._widgetName},_onRenderError:function(t,i){this._trace(t+". Render is failed",!0),this._isError=!0,n.isFunction(i)&&i()},_updateContext:function(){this.__super__&&this.__super__._updateContext(),this._context.activitySystemUnavailable=t.activitySystemUnavailable,this._context.community=n.extend({},t.community),this._context.user=!t.user?null:n.extend({},t.user),this._context.hostedPage=t.hostedPage,this._context.currentCulture=s.getCurrentCulture()},_trace:function(){},_warn:function(){},_error:function(n){ii.traceError("Widget["+this._widgetName+"]:Instance["+this._instanceId+"] Error: "+n)},_getSettings:function(){return n.extend({},this._defaultSettings,this._settings)},_getInitialSettings:function(){return this._settings},_createThisProxy:function(){var i=this,t={clientId:this._widgetName+"_"+this._instanceId,settings:this._getSettings(),initialSettings:this._getInitialSettings(),trace:_.bind(this._trace,this),error:_.bind(this._error,this),createControl:_.bind(this._createControl,this),renderComplete:_.bind(function(n){this._renderCompleteList.push(n)},this),createWidget:_.bind(this._createWidget,this),extendWidget:_.bind(this._extendWidget,this),getExternalInterface:_.bind(this.getExternalInterface,this),callExternalInterface:function(n){var t=Array.prototype.slice.call(arguments,1);i._callExternalInterface(n,t,[])}};t.setDefaultSettings=_.bind(function(n){this._defaultSettings,this._defaultSettings=n;var i=t.settings._persistentSettings;i&&r.mobile&&(this._settings=this._settings||{},typeof i=="function"&&i(this._settings),c("WidgetManager").addPersistentWidget(this)),t.settings=this._getSettings()},this),t.processSettings=_.bind(function(i){var r,u;if(this._settings._forceValidation===!1){t.setDefaultSettings();return}for(r in i)_.isObject(i[r])&&!_.isUndefined(tt[r])&&(i[r]=n.extend(tt[r],i[r]));if(u=this._validateSettings(i),u.hasError)throw"Malformed settings";else t.setDefaultSettings(u.defaultSettings)},this),t.defaultErrorHandler=function(n){if(!!n&&!!n.id)throw new a("Error has occured: "+n.id);},this.thisProxy=t,this._updateThisProxy()},_callExternalInterface:function(t,r,u){var e=this.thisProxy,s=e.getExternalInterface()||{},o=s[t],f=[].concat(r);u=u||[],u.push(this.getName()),f=f.concat([e.settings.callbackData,u.join(".")]),n.isFunction(o)&&o.apply(null,f),this._parentWidget?this._parentWidget._callExternalInterface(t,r,u):i.trigger.apply(i,[t].concat(f))},_updateThisProxy:function(){this.__super__&&this.__super__._updateThisProxy();var t=this.thisProxy,r=s.merge(this._widgetName,this._strings,this._settings.localizedStrings),i=n.extend({},this._markup),u,f=/\$\{(.*?)\}/gm;for(u in i)i[u]=e.replace(i[u],r,f);this._style=e.replace(this._style,r,f),t.strings=r,t.markup=i,t.daapiUrls={},n.each(this._daapiUrls,function(){t.daapiUrls[this.name]=this})},_createWidget:function(t,i,r){_.isUndefined(i.productLocation)&&(i.productLocation=this.thisProxy.settings.productLocation);var u=n.extend(!0,{_parentWidget:this},i);u.animation=n.extend(!0,{},this._settings.animation,u.animation),Flux4.createWidget(t,u,r)},_extendWidget:function(n,t){var i=_.extend({_parentWidget:this,_inheritOnly:!0},this.thisProxy.settings,t);Flux4.createWidget(n,i,_.bind(function(n){var t=n.thisProxy;this.__super__=n,this.trigger("superWidgetLoaded"),t.define("",function(){return t})},this))},_createControl:function(t,i,r){if(this._controls&&this._controls[t]){var u=n.extend(!0,{_parentWidget:this},i);_.isUndefined(u.containerId)&&(u.containerId=null),_.isUndefined(u.productLocation)&&(u.productLocation=this.thisProxy.productLocation),u.animation=n.extend(!0,{},this._settings.animation,u.animation),c("Core").createControl(t,{version:this._controls[t],parentName:this._widgetName},u,function(n){r(n)})}else this._trace('Control "'+t+'" is not registered for widget "'+this._widgetName+'"',!0)}},_.extend(k.prototype,p),k}),tt={animation:{},container:{type:["string","object"]},containerId:{type:"string"}},r("WidgetManager",["Widget","StyleSheetHelper","StringHelper","LocalizedResources"],function(r,f,s,h){function l(){}function v(n){return _.contains(d,n.toLowerCase())}function w(n){return _.contains(a,n.toLowerCase())}function nt(n,t){return y&&localStorage.setItem(b+n,t),t}function k(n){if(y)return localStorage.getItem(b+n)}var c=[],d=["userprofile","auth"],p={},a=[],g=_.template('<div class="<%=className%>" data-version="<%=version%>" />'),b="SM4_persistentSettings_",y=!1;try{y="localStorage"in window&&window.localStorage!==null}catch(tt){}return bt={addPersistentWidget:function(n){if(!k(n._widgetName)){var t=n._settings,i;"animation"in t&&(i=t.animation,delete t.animation),p[n._widgetName]=u.stringify(t),_.isUndefined(i)||(t.animation=i)}},applyExternalSettings:function(n){var t=i.getQueryParameter(location.href,n.name.toLowerCase()+"Settings"),r;t&&(t=atob(t)),r=t&&t!="*"?nt(n.name,t):k(n.name),r&&(delete n.settings._version,n.settings=_.extend(u.parse(r),n.settings))},getPersistentWidgets:function(){return p},reloadWidgets:function(i){t.reload(function(){h.loadIfNeed(function(){n.each(c,function(){this.render(null,!0)}),n.isFunction(i)&&i()})}),!!window.Flux&&n.isFunction(window.Flux.reloadWidgets)&&window.Flux.reloadWidgets()},removeWidget:function(t){l('Remove widget "'+t.getName()+'"...'),n.each(c,function(n,i){if(i==t)return c.splice(n,1),!1}),v(t.getName())&&n.each(a,function(n,i){if(t.getName().toLowerCase()==i)return a.splice(n,1),!1}),n(t._container).parent().html("")},getClassName:function(n,t){var i=s.camelize(n)+(t&&t.controlData?t.controlData.version:"");return i+" sm4_"+i},invokeWidget:function(t,i,u,o,s){var y,h;if(l('Invoke widget "'+i+'"...'),v(i)){if(w(i)){l("The widget is singleton and already loading...");return}a.push(i.toLowerCase())}if(t&&t.length&&(y=n(g({className:this.getClassName(i,u),version:o._version})),t.addClass("flux4Widget").addClass("flux4").append(y),t=y),h=new r(t,i,u,o),!h.isError()){h.on("constructed",function(){var n,r;if(o.apiOnly){_.isFunction(s)&&s(h.getApi()),h.thisProxy.trace("API successfully returned");return}if(n=h.getStyle(),n&&f.embedStyleSheet(n,h.thisProxy.settings.responsive),o._inheritOnly){_.isFunction(s)&&s(h),h.thisProxy.trace("Successfully inherited");return}t&&h.__super__&&(r=this.getClassName(h.__super__._widgetName),t[0].className=r+" "+t[0].className),h.render(function(){if(_.isFunction(s)){var n=h.thisProxy.settings.responsive;s(h.getExternalInterface(),h._settings._returnBreakpoints&&!!n?n.breakpoint||n.breakpoints:null)}e.trigger("WidgetLoaded:"+i.toLowerCase())}),c.push(h),h.isError()?l("Widget has been created, but with errors",!0):l("Widget has been created successfully")},this);return h}},isLoadingSingleton:w,tryGetWidgetByName:function(n){return _.detect(c,function(t){return n==t.getName()})},isSingletonWidget:v}}),r("WidgetSettingsValidation",["Widget","StringHelper"],function(t,i){function f(n){return _.isArray(n)?"array":typeof n}function r(n){return _.isArray(n)&&(n=n.join('", "')),'"'+n+'"'}function e(n,t){_.each(t,function(t){switch(t.type){case"error":n._error(t.text);break;case"warn":n._warn(t.text)}})}function u(t){if(!n.isPlainObject(t))return!1;for(var i in t)if(i=="defaultValue"||u(t[i]))return!0;return!1}return t.prototype._validateSettings=function(t,o,s,h){function c(n,t,i){var r=n;return s&&(r=s+"."+r),_.isUndefined(t)||(r+="["+t+"]"),i&&(r+="."+i),r}function l(n,t,r,u){u=u||a,t=t.replace("{0}",'settings parameter "'+r+'"'),u.push({type:n,text:i.capitalize(t)})}var v=!1,a=[],p=this,y,w;return o=o||this._settings,s=s||"",y={},_.each(t,function(n,t){if(_.isObject(n)){var i=o[t];n.caseSensitive===!1&&!_.isUndefined(i)&&_.isString(i)&&(o[t]=i.toLowerCase()),_.isUndefined(n.defaultValue)?n.required&&(_.isUndefined(i)||_.isNull(i))&&(l("error","Required {0} is missing",c(t)),v=!0):y[t]=n.defaultValue,_.isUndefined(i)&&u(n.type)&&(o[t]={})}},this),w=n.extend({},y,o),_.each(t,function(n,t){_.isObject(n)&&_.isFunction(n.defaultValue)&&!_.isUndefined(n.type)&&n.type!="function"&&(y[t]=n.defaultValue.call(w))}),_.each(o,function(i,u){var e,s,y,b,d,k,nt,tt,h;if(u.charAt(0)!="_"&&!_.isNull(i)){if(e=t[u],u=="animation"&&n.isEmptyObject(i)){o[u]=_.clone(g);return}if(_.isUndefined(e))t["*"]||l("warn","Unknown {0}",c(u));else{if(s=_.isString(e)||_.isArray(e)?e:e.type||f(e.defaultValue),!_.isUndefined(s)&&(s=="number"&&(typeof i=="number"&&isNaN(i)?i="":typeof i=="string"&&i&&!isNaN(+i)&&(i=+i),o[u]=i),s=_.isArray(s)?s:[s],y=[],d=_.find(s,function(t){var s,h;if(n.isPlainObject(t))return n.isPlainObject(i)?(s=p._validateSettings(t,i,c(u),!0),s.hasError?(b=!0,y.push(s.messages)):(o[u]=n.extend({},s.defaultSettings,i),a=a.concat(s.messages)),!s.hasError):(l("error","{0} is not a "+r("object"),c(u),y),!1);if(h=e.itemTypesMap,t=="array"&&_.isArray(i)&&n.isPlainObject(h)){var w=h["*"],k=!0,v=[];return _.each(i,function(t,i){var f=t.id,e,s;if(_.isUndefined(f)||_.isString(f)?_.isUndefined(f)?_.isUndefined(w)?l("error","Id must be set for {0}",c(u,i)):e=w:(e=_.find(h,function(n,t){if(!_.isUndefined(n.id)&&_.isString(t))return t.toLowerCase()==f.toLowerCase()}),_.isUndefined(e)&&l("error","{0} has unknown id: "+r(f),c(u,i))):l("error","{0} is not a string",c(u,i,"id")),!_.isUndefined(e)&&(s=p._validateSettings(e,t,c(u,i+(_.isString(f)?":"+f:"")),!0),s.messages.length&&(a=a.concat(s.messages)),!s.hasError))return o[u][i]=n.extend({},s.defaultSettings,t),!0;l("error","{0} is ignored",c(u,i+(_.isString(f)?":"+f:""))),v.push(i)}),_.each(v,function(n,t){i.splice(n-t,1)}),v.length&&!i.length&&(k=!1,b=!0,l("error","{0} array has no valid items",c(u))),k}return f(i)==t}),!d)){v=!0,_.each(y,function(n){a=a.concat(n)}),k=_.map(s,function(t){return n.isPlainObject(t)?"object":t}),b?l("error","{0} has validation error",c(u)):(nt=k.length==1?"{0} is not a ":"{0} doesn't match any of expected types: ",l("error",nt+r(k),c(u)));return}_.isFunction(e)&&(e={validate:e}),n.isPlainObject(e)&&(_.isArray(e.enumValues)&&(tt=_.find(e.enumValues,function(n){return n==i}),tt||(v=!0,l("error","{0} has unknown value: "+r(i)+". One of the following values is expected: "+r(e.enumValues),c(u)))),_.isFunction(e.validate)&&(h=e.validate.call(w,i,c(u)),_.isObject(h)&&h.error&&(h.error?(v=!0,l("error",h.message)):l("warn",h.message)),_.isString(h)&&(v=!0,l("error",h))),_.isUndefined(e.min)||(_.isNumber(e.min)?i<e.min&&(o[u]=e.min,l("warn","Value of {0} must be not less than "+e.min+". The value has been changed to "+e.min,c(u))):v=!0),_.isUndefined(e.max)||(_.isNumber(e.max)?i>e.max&&(o[u]=e.max,l("warn","Value of {0} must be not greater than "+e.max+". The value has been changed to "+e.max,c(u))):v=!0))}}},this),h||e(p,a),{hasError:v,messages:a,defaultSettings:y}},{_printValues:r,_printMessages:e,_hasDefaultValue:u}}),ui=function(t){var i=fi.get();return{save:function(){i.add(t,n.makeArray(arguments))},tryGetParams:function(){var n=i.getValue(t);return n&&i.removeKey(t),n}}},fi=function(){var n;return{get:function(){return n||(n=new wt("WidgetStateSaveContainerParams",3e5)),n}}}(),r("Authentication",["AuthenticationTools","UserAgentHelper","CookieHelper","TrackingHelper","WidgetManager","UserProfileHelper","DAAPI","PostAuthActionParams","ExternalUrlOverlay","WidgetList","RoadBlocker"],function(r,f,s,c,a,v,y,p,w,b,k){var g=function(nt,tt){function lt(){return"Auth"+(r.isNewAuth()?"":" oldAuth")}function at(n){if(l)n(l);else e.on("authWidgetLoaded",function(){n(l)})}function rt(t){n.isFunction(t)&&(b.isLoaded?at(function(){t(l)}):b.load(function(){at(function(){t(l)})}))}function et(n,t,u,f,o,s){reloadPageOnOverlayClose=!1,t=i.addQueryParameter(t,"fbAutoLoginDisabled","true"),_.isUndefined(tt)||(t=i.addQueryParameter(t,"productLocation",i.getProductLocationName(tt))),w.show(lt(),{pageUrl:i.addCultureQueryParameter(t),size:u,clickEvent:f,onPageLoaded:o,onClose:function(){p.get().readyToUse(!1),vt(),reloadWidgets&&a.reloadWidgets()},callback:n,overlayClass:s,useOldReceiver:!r.isNewAuth(),resizeCallback:function(){e.trigger("overlayResized")}})}function vt(){reloadPageOnOverlayClose&&t.hostedPage&&window.location.reload()}function st(n,e){if(f.safari&&!_.isUndefined(n.setAuthCookieUrl)){t.reset(),n.action=e,f.mobile||!n.eventName||!n.productLocation||r.saveProductLocationInCookies(n.productLocation),h.setCookie(authRedirectParamsCookieName,u.stringify(n),6e4);var o=decodeURIComponent(n.setAuthCookieUrl);return location.href=i.addQueryParameter(o,"returnUrl",location.href),!0}return!1}function ci(){var i=h.getCookie(authRedirectParamsCookieName),n;if(!i)return!1;try{n=u.parse(i)}catch(r){}return h.setCookie(authRedirectParamsCookieName,"",-1),n&&!_.isUndefined(n.action)&&t.loadIfEmpty(function(){if(n.action=="deactivationCompleted"){ni();return}if(t.user){if((n.action=="processOverlayCallback"||n.action=="signIn"||n.action=="signUp")&&n.roadBlockerCheck==="true"){roadBlocker.performCheck({fromSignIn:n.eventName==="SignIn",eventName:n.eventName,productLocation:n.productLocation});return}ot(n)}}),!0}function yt(n){return n?{eventName:n,widgetName:tt}:null}function ft(t,i){var r=yt(t),u;return r&&i?(u=decodeURIComponent(i),r.widgetName=u.indexOf(":")!=-1?u.split(":")[0]:u):!f.mobile&&f.safari&&(r.widgetName=n.cookie("productLocation")),r}function ot(u,o){var c,s,l;if(ii()||ri()){ht();return}if(u.eventName==="SignIn"){c=!1;e.on("OverlayCancelled",function(){c||(si(tt),c=!0)})}if(_.isUndefined(u.resetAuth)||h.setCookie("MasterAuthIsRequested","",-1),_.isUndefined(u.BigDoorCookie)||r.addBigDoorCookie(u.BigDoorCookie),_.isUndefined(u.reloadSignIn)||r.authenticationChanged(null,!0,ft(u.eventName,u.productLocation)),u.set3POUFirstTimeCookie=="true"&&r.setThirdPartyJustLoggedInCookie(),u.userUcidForRedirectToFollowingTab&&t.user&&!t.user.roadBlocker.redirectUrl)return v.openUserProfile(u.userUcidForRedirectToFollowingTab,null,null,"following"),!0;if(_.isUndefined(u.showFlyUpType)){if(u.errorMsg&&!r.isAuth41()){w.hide(function(){alert(decodeURIComponent(String(u.errorMsg).replace(/\+/g," ")))});return}}else switch(u.showFlyUpType){case"ShowAlienAccountFlyUp":return w.hide(function(){g.getInstance().showAlienAccountFlyUp(u)}),!0;case"ShowMergeAccountsFlyUp":w.hide(function(){g.getInstance().showMergeAccountsFlyUp(u)})}if(_.isUndefined(u.postAuthRedirectUrl))if(_.isUndefined(u.roadBlockerCheck))if(u.isCommunityMember=="false")r.authenticationChanged(function(){vi(null,!0,!0)},!1,ft(u.eventName,u.productLocation));else if(_.isUndefined(u.reload)&&u.isCommunityMember!="true")u.logOut=="true"?(r.removeBigDoorCookie(),r.reload(null,ft("signOut",u.productLocation))):_.isUndefined(u.showSignUpForm)?_.isUndefined(u.reloadSignIn)&&_.isUndefined(u.showSignInForm)?u.closeOverlay=="true"||u.closeOverlay===!0?(w.hide(),vt()):_.isUndefined(u.setheight)&&n.isFunction(o)&&_.isUndefined(u.unload)&&o():t.user?r.authenticationChanged(function(){wt(u.email)},null,ft(u.eventName,u.productLocation)):u.showFlyUpType||u.errorMsg?!u.errorMsg||li(u.errorMsg):w.hide(function(){kt(u),ti(null,undefined,{email:u.email})}):w.hide(function(){dt()});else return p.get().readyToUse(!0),r.reload(null,ft(u.eventName,u.productLocation||u.widgetName||"auth"),!0),!0;else pt(u);else s=decodeURIComponent(u.postAuthRedirectUrl),u.redirectOverlay!="true"||f.mobile?w.hide(function(){f.mobile&&(s=i.addQueryParameter(s,"redirectUrl",location.href),s=i.removeQueryParameter(s,"callbackname")),r.authenticationChanged(function(){window.location.href=s},!1,ft(u.eventName,u.productLocation))}):(r.authenticationChanged(null,!0,ft(u.eventName,u.productLocation)),reloadPageOnOverlayClose=!0,w.redirectToUrl(s,r.postAuthOverlaySize())||(l=!1,et(function(){},s,r.postAuthOverlaySize(),undefined,function(){l||(l=!0,w.redirectToUrl(s,r.postAuthOverlaySize()))},"postAuthRedirect")))}function pt(n){var t=n.eventName,i=decodeURIComponent(n.productLocation),u=n.blockedAction;r.authenticationChanged(function(){roadBlocker.performCheck({fromSignIn:t==="SignIn",eventName:t,productLocation:i,blockedAction:u})},!1,ft(t,i))}function li(n){n=i.decode(n);var r=i.addDeviceQueryParameter(t.community.errorMessageUrl);r=i.addQueryParameter(r,"message",n),et(ot,r,{height:170,width:430},undefined,undefined,"auth41")}function wt(n,u){if(!ct(u)){var e=new it(tt).useDirectBrandAuthDomain()?t.community.facebookContext.baseDirectAuthUrl+"Account4300/SignIn?product=Auth":t.community.authentication.signInUrl,f=i.addDeviceQueryParameter(nt.customSigninPage||bt(e));n&&(f=i.addQueryParameter(f,"email",n)),et(function(n){st(n,"signIn")||ot(n)},f,r.signInOverlaySize(),u,undefined,"signInOverlay")}}function ai(n,i,u){(t.user||!ct(u))&&et(function(n){st(n,"signUp")||ot(n)},r.replaceUrlLocation(n),i||r.signInOverlaySize(),u,undefined,"signUpOverlay")}function ct(n){if(!t.community.authentication.signUpAndSignInEnabled&&r.isNewAuth()){var u=i.addDeviceQueryParameter(bt(t.community.authentication.thouSignInSignUpUrl));return et(function(n){!t.user&&st(n,"signUp")||ot(n)},u,r.thouSignInSignUpOverlaySize(),n),!0}return!1}function bt(n){return r.isAuth41()&&l&&l.isDeviceSupported||f.safari&&f.mobile?i.addQueryParameter(n,"callbackUrl",location.href):n}function dt(n,u,f,e){if(u||!t.user){var o=i.addDeviceQueryParameter(n||nt.customSignupPage||t.community.authentication.signUpUrl);r.isOverlayMode()?ai(o,f,e):window.location.href=r.replaceUrlLocation(o)}}function gt(t,i,r){rt(function(t){t.keepCurrentAccount.call(null,r,n.extend(ut(),{thouSignUpMode:!0}))})}function vi(n,u,f){var s,e,o;if(!t.user.communityMember){if(s=t.user.globalThirdPartyOnly||t.user.communityThirdPartyOnly,e=(t.user.initialThirdPartyConnection||"").toLowerCase(),s&&(e==="facebook"||e==="twitter")&&!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth){e==="facebook"?new it(tt).triggerFacebookAuthFlow():e==="twitter"&&new it(tt).triggerTwitterAuthFlow();return}if(ct(n))return;if(r.isNewAuth()&&s||!d.enabled()&&t.user.facebookOnly){gt(!1,!1,n);return}}o=i.addDeviceQueryParameter(r.replaceUrlLocation(nt.customInterimPage||t.community.authentication.interimPageUrl)),r.isThirdPartyJustLoggedIn()&&(o=i.addQueryParameter(o,"fbJustLoggedIn",1)),et(function(n){ot(n,function(){p.get().readyToUse(!0),n.load||r.reload(null,ft(n.eventName,n.productLocation),f)})},o,r.interimOverlaySize(),n,function(){r.removeThirdPartyJustLoggedInCookie()},"interimOverlay"),reloadPageOnOverlayClose=!!u||r.isThirdPartyJustLoggedIn()}function ni(){function u(){n||(n=!0,kt())}var n=!1;e.on("OverlayCancelled",u);et(ot,i.addDeviceQueryParameter(t.community.authentication.accountDeactivatedUrl),r.accountDeactivatedOverlaySize())}function ut(){return{product:"Auth",productLocation:i.getProductLocationName(tt||lt()),device:c.getDeviceType()}}function ti(i,r,u){if(!t.user){if(_.isUndefined(u)||!u.productLocation||ui(u),oi(),t.community.authentication.enableApiBasedLogin){fi();return}rt(function(t){t.signIn.call(null,i,n.extend(ut(),{title:r},u))})}}function yi(){return ii()?(!n.cookie("FluxBD")&&!!t.user&&t.user.age>0&&r.addFluxBDCookie(new Date(new Date-t.user.age*s.ONE_YEAR).toDateString()),ht({redirectUrl:location.href},"Sorry, you are ineligible to join "+t.community.name+"."),!0):!1}function pi(){return ri()?(ht({isBanned:!0},"You are banned in this community."),!0):!1}function ii(){var r=+t.community.authentication.minAllowedAge,u=n.cookie("FluxBD"),i,f;if(!u)i=!t.user?-1:t.user.age;else if(f=Math.abs(new Date-new Date(u)),i=Math.floor(f/s.ONE_YEAR),i>=0&&i==r+1)return new Date(u).setFullYear((new Date).getFullYear())+864e5>new Date;return!!r&&i>=0&&i<r}function ri(){return!!t.user&&(t.user.isCommunityBanned||t.user.isSystemBanned)}function ht(t){t=t||{},w.hide(function(){rt(function(i){i.showIneligibleAgeError.call(null,null,n.extend(ut(),{title:"ErrorMessage"},t))})})}function ui(n){n.productLocationForced=!0}function fi(){}function hi(n,t){st(n||{},"deactivationCompleted")||r.authenticationChanged(function(){t(n),reloadPageOnOverlayClose=!0})}return nt=nt||{},authRedirectParamsCookieName="FluxAuthRedirectParams",reloadPageOnOverlayClose=!1,reloadWidgets=!1,roadBlocker=k.getInstance(!1,tt),savedMtvnUserIdCookieName="savedvmn_uuid",l||ei||t.loadIfEmpty(function(){if(r.isAuth41()&&!l){var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");ei=!0,Flux4.createWidget("Auth",{container:t},function(n){l=n})}}),{isNewAuth:r.isNewAuth,isOverlayMode:r.isOverlayMode,signIn:ti,signUp:function(i,r,u){!u||!u.productLocation||ui(u),rt(function(f){t.user||f.signIn.call(null,i,n.extend(ut(),{title:r,eventName:"SignUp"},u));return})},thouToFluxSignUp:gt,sutSignUp:function(n,r){var u=i.addDeviceQueryParameter(nt.customSignupPage||t.community.authentication.signUpUrl);dt(n?i.addQueryParameter(u,"sutid",n):u,!1,null,r)},fluxSignIn:function(i,r){if(!t.user){var u=this;if(t.community.authentication.enableApiBasedLogin){fi();return}rt(function(t){n.isFunction(t.signInToFlux)&&(oi(),t.signInToFlux.call(null,i,n.extend(ut(),{title:r})))})}},joinCommunity:function(i,r,u){if(!t.user.communityMember){var f=this;rt(function(t){t.joinCommunity.call(null,i,n.extend(ut(),{title:r,eventName:"Join"}),u)})}},showInterimForm:function(i,r,u,f,e,o){t.user&&(typeof r=="string"&&(u=r,r=!1),rt(function(t){t.showInterimForm.call(null,i,n.extend(ut(),{title:u,eventName:f},{productLocation:e,blockedAction:o}))}))},checkAuthRedirectParams:ci,signOut:function(u,f,e){var c,o,h;t.user&&(!s.getCookie(savedMtvnUserIdCookieName)||s.setCookie(savedMtvnUserIdCookieName,"",-1),r.removeBigDoorCookie(),c=new y("Authentication",null,[{name:"logout",template:i.logoutUrlTemplate,isAction:!0}],{settings:ut()}),o=f,n.isFunction(o)||(o=_.noop),h=function(){u?window.location.reload():r.reload(function(){var t=r.getFluxAuthCookieState(),i;!!t&&t.loggedIn&&(i=r.getUserAuthParams(),r.setFluxAuthCookieState(i)),n.isFunction(e)&&e()},yt("signOut"))},c.methods().logout({},function(){r.dropMasterCookiesOnBrandsDomain(!0,function(){d.enabled()&&t.user.facebookConnected?d.signOut(function(){h()}):h()})},o))},deactivationCompleted:function(n){hi(n,ni)},resetAuthAndShowError:function(n){hi(n,ht)},showAlienAccountFlyUp:function(n){var i=n;et(function(n){_.isUndefined(n.showSignInForm)||n.showSignInForm!=!0?_.isUndefined(n.redirectParentUrl)?n.reload?window.location.reload():n.closeOverlay?w.hide(function(){window.location.reload()}):setTimeout(function(){e.trigger("OnAlienAccountFlyUpShowed",i)},0):w.hide(function(){window.location.href=n.redirectParentUrl}):w.hide(function(){wt()})},decodeURIComponent(String(n.errorMsgOverlayUrl+"&isInitSignIn=true")).replace(/\+/g," "),{width:376,height:!t.user?176:205},null,null)},showMergeAccountsFlyUp:function(t){rt(function(r){var u=decodeURIComponent(t.errorMsgOverlayUrl);r.accountsMerged.call(null,null,n.extend(ut(),{title:"Success!"},{email:i.getQueryParameter(u,"userEmail"),userName:i.getQueryParameter(u,"userName")}))})},verifyEmail:function(){rt(function(t){var r=location.href,u=i.getQueryParameter(r,"verification_value"),f;u&&(f=i.getQueryParameter(r,"redirectUrl"),t.verifyEmail.call(null,null,n.extend(ut(),{title:"EmailVerification"},{redirectUrl:f,verificationValue:u})))})},passwordReset:function(){rt(function(t){var r=location.href,u=i.getQueryParameter(r,"verification_value"),f=i.getQueryParameter(r,"redirectUrl");t.passwordReset.call(null,null,n.extend(ut(),{title:"Password Reset"},{redirectUrl:f,verificationValue:u}))})},linkAccounts:function(){rt(function(t){var r=location.href,u=i.getQueryParameter(r,"verification_value"),f=i.getQueryParameter(r,"redirectUrl");t.linkAccounts.call(null,null,n.extend(ut(),{title:"Connect Accounts"},{redirectUrl:f,verificationValue:u}))})},getAuthWidget:rt,processAuthentication:ot,authenticationChanged:r.authenticationChanged,redirectToSetAuthCookieUrlIfNeed:st,checkAndShowIfNeededIneligibleAgeError:yi,checkAndShowIfNeededUserBannedError:pi,authenticationChangedAndRoadBlock:pt,getPreAuthInterimUrl:function(t){n.isFunction(t)&&rt(function(n){t(n.getAuthUrl()+"PreAuthInterim")})}}};return{getInstance:g}}),r("AuthenticationTools",["WidgetManager","UserAgentHelper","CookieHelper","UrlBuilder","GlobalEvents","DAAPI","ExternalUrlOverlay","TabSync"],function(i,r,f,e,s,l,a,v){function it(t,r){i.reloadWidgets(function(){n.isFunction(t)&&t(),r&&k(r,!0)}),d(r)}function rt(n){return r.safari&&!r.mobile&&(n.eventName=="SignIn"||n.eventName=="SignUp"||n.eventName=="Join")}function k(n,i){if(!t.user&&rt(n)){ut(n);return}setTimeout(function(){s.trigger(n.eventName,{widgetName:n.widgetName},t.user),i&&et(n.eventName)},1)}function d(n){r.safari&&!r.mobile&&n&&(n.eventName=="SignIn"||n.eventName=="SignUp"||n.eventName=="Join")&&k(n,!1)}function ut(t){var i=p();n.cookie("eventInfo",u.stringify(t),{path:"/",domain:i,expires:1})}function ft(t){var i=p();n.cookie("productLocation",t,{path:"/",domain:i,expires:1})}function et(){r.mobile&&!!n.cookie("mobileAuthEvent")&&f.setCookieToRootDomain("mobileAuthEvent","",-1)}function b(){var t;try{t=n.cookie("fluxAuthCookieState"),!t||(t=u.parse(t))}catch(i){}return t}function g(n){var i=t.community.authentication.baseFluxAuthenticationUrl+"Cookies/GetCookiesFromMasterDomain",u;i=e.addQueryParameter(i,"skipCache",!0),r.android&&(i=e.addQueryParameter(i,"ts",(new Date).getTime())),u=new l("Authentication",null,[{name:"dropMasterCookiesOnBrandsDomain",template:i,isAction:!1,skipAkamaiBatch:!0}],{}),u.methods().dropMasterCookiesOnBrandsDomain({},n,n)}function nt(){return{loggedIn:!!t.user,isMember:!!t.user&&t.user.communityMember,initialConnection:!t.user?"":t.user.initialThirdPartyConnection,hasRoadblock:!!t.user&&!!t.user.roadBlocker.redirectUrl,globalMemberType:t.user?t.user.globalMemberType:"",umbrellaKey:t.community.authentication.umbrellaKey}}function st(){var n=b();y||(y=n),!!n&&n.authStateChanged&&(n=nt(),n.authStateChanged=!1,_.isEqual(n,y)||(c("Core").setLastAuthCookie(),v.trigger("synchronizeAuthCookie",{cookie:n,communityId:t.community.ucid},function(){s.trigger("AuthCookieSynchronized",n)}),y=n,tt(n)))}function p(){var n=location.hostname.split(".");return n.length>1&&(n=n[n.length-2]+"."+n[n.length-1]),n}function ht(i,r){var u=b(),f=function(){st(),n.isFunction(r)&&r()};!u||i?g(f):(f(),u.loggedIn==!!t.user&&u.isMember==(!!t.user&&t.user.communityMember)&&u.initialConnection==(!t.user?"":t.user.initialThirdPartyConnection)&&(u.hasRoadblock!==!0||t.user.roadBlocker.redirectUrl)||g(f))}function tt(t){var i=p();n.cookie("fluxAuthCookieState",u.stringify(t),{path:"/",domain:i,expires:1})}var w="fbJustLoggedIn",y;return ot={isNewAuth:function(){return t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},isAuth41:function(){return t.community.authentication.pageDisplayMode==4},isOverlayMode:function(){return t.community.authentication.pageDisplayMode==2||t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},signInOverlaySize:function(){return{height:this.isNewAuth()?335:300}},thouSignInSignUpOverlaySize:function(){return{width:383,height:233}},interimOverlaySize:function(){return{height:300}},postAuthOverlaySize:function(){return{width:735,height:450}},accountDeactivatedOverlaySize:function(){return{width:400,height:300}},authenticationChanged:function(t,i,r,u){function f(){it(function(){n.isFunction(t)&&t(),u&&setTimeout(function(){si(r&&r.widgetName)},1)},r)}i?f():a.hide(f),y=undefined},reload:function(n,i,r){t.hostedPage?a.hide(function(){location.reload()}):this.authenticationChanged(n,!1,i,r)},replaceUrlLocation:function(n){return n.replace("(location)",encodeURIComponent(location.href))},setThirdPartyJustLoggedInCookie:function(){h.setCookie(w,"1",3e5)},isThirdPartyJustLoggedIn:function(){return h.getCookie(w)=="1"},removeThirdPartyJustLoggedInCookie:function(){h.setCookie(w,"",-1)},addBigDoorCookie:function(n){f.setCookieToRootDomain("BDACWE",n,31536e6)},addFluxBDCookie:function(n){f.setCookieToRootDomain("FluxBD",n,864e5)},removeBigDoorCookie:function(){!h.getCookie("BDACWE")||f.setCookieToRootDomain("BDACWE","",-1)},getBrandDomain:p,dropMasterCookiesOnBrandsDomain:ht,getUserAuthParams:nt,getFluxAuthCookieState:b,setFluxAuthCookieState:tt,triggerAuthEventForSafariIfNeeded:d,saveProductLocationInCookies:ft}}),r("ExternalAPIAuth",["XdReceiver"],function(t){function u(t){if(!_.isUndefined(t.errorMsg)){n.isFunction(i)&&i(t.errorMsg);return}var r=c("Authentication");t.setAuthCookieUrl&&r.getInstance().redirectToSetAuthCookieUrlIfNeed(t,"processOverlayCallback")||(r.getInstance().processAuthentication(t),setTimeout(function(){n.isFunction(i)&&i("None")},100))}var i=null,r=new t.XdReceiver(n("<iframe>").hide().appendTo(n("body")));return{login:function(t,f){i=f,r.loadAndListen(t,n.proxy(u,this),!1)}}}),st=null,dt=!1,r("ThirdPartyDirectAuth",["AuthenticationTools","UserAgentHelper","Authentication"],function(r,u,f){return it=function(s){function g(){return!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0&&!!t.community.facebookContext.baseDirectAuthUrl}function nt(n){f.getInstance().checkAndShowIfNeededIneligibleAgeError()||v()&&st.triggerFacebookAuthFlow(n)}function tt(n){f.getInstance().checkAndShowIfNeededIneligibleAgeError()||v()&&st.triggerTwitterAuthFlow(n)}function it(n){t.loadIfEmpty(function(){!t.community.facebookContext||t.community.facebookContext.enableThirdPartyAuth!==!0||n()})}function v(){return!!st}function rt(n,t){var r="http://widgets4.flux.com/iframe/auth_iframe.html";return r=!n?r:i.addQueryParameter(r,"product",n),!t?r:i.addQueryParameter(r,"productLocation",t)}function y(n){return n.product||"Auth"}function h(n){var t=decodeURIComponent(c(n));return t.indexOf(":")!=-1&&(t=t.split(":")[0]),t}function c(n){return n.productLocation||i.getProductLocationName(s)}function ut(n){return!n.blockedAction?"":n.blockedAction}function ft(n,t){var r=decodeURIComponent(t),f,o,u,e;if(n.errorMsgOverlayUrl)!n.showFlyUpType||(r=i.addQueryParameter(r,"showFlyUpType",n.showFlyUpType)),u=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!u||(u=u.split("&"));else return r;for(f=0,o=u.length;f<o;f++)e=u[f].split("="),r=i.addQueryParameter(r,e[0],e[1]);return r}function p(n){var r="",t,e,u,f;if(!n.showFlyUpType||(r="showFlyUpType="+n.showFlyUpType),!!n.errorMsgOverlayUrl)for(t=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!t||(t=t.split("&")),u=0,e=t.length;u<e;u++)f=t[u].split("="),r+="&"+f[0]+"="+f[1];return!n.errorMsg||(r+="&errorMsg="+i.decode(n.errorMsg)),!n.eventName||(r+="&eventName="+n.eventName),r}function et(t){var r;if(t=t||{},!f.getInstance().checkAndShowIfNeededIneligibleAgeError()){a||(a=n("<iframe/>").addClass("flux4AuthFrame").appendTo("body"));var s=function(i){if(!!t.redirectUrl&&u.mobile){location.href=decodeURIComponent(t.redirectUrl);return}if(!_.isUndefined(i.showIneligibleAge)){l.preAuthInterim.call(null,null,{dob:i.showIneligibleAge,redirectUrl:window.location.href,errorCode:i.errorCode});return}!i.setAuthCookieUrl||f.getInstance(null,h(t)).redirectToSetAuthCookieUrlIfNeed(i,"processOverlayCallback"),t.ignoreXdArguments===!0?document.location.href=a[0].src:l.processOverlayCallback(i),n.isFunction(t.callback)&&t.callback(p(i))},e=t&&t.domain||i.getQueryParameter(document.location.href,"domain")||document.domain,o=i.getQueryParameter(document.location.href,"callbackName")||t.callbackName||b.create(s,null,!0);t&&t.ignoreXdArguments&&(e=i.getQueryParameter(document.location.href,"domain"),o=i.getQueryParameter(document.location.href,"callbackName")),r=[rt(y(t),c(t)),"#token=",t.token,"&secretToken=",t.secretToken,"&product=",y(t),"&productLocation=",c(t),"&action=",t.action,"&provider=",t.provider,"&domain=",e,"&callbackName=",o,"&locationModifier=",t.locationModifier,"&callbackUrl=",t.callbackUrl,"&redirectUrl=",t.redirectUrl,"&touch=",u.mobile,"&ignorePostRedirect=",!t.ignorePostRedirect?!1:t.ignorePostRedirect,"&linkAccountEmail=",t.linkAccountEmail,"&callbackUrlForBackButton=",encodeURIComponent(d()),"&device=",k(),"&blockedAction=",ut(t),"&userProfileFollowingTabIsNeededToShow=",w(),].join(""),u.mobile&&(!t||t.redirectUrl)||!t||t.ignoreXdArguments?document.location.href=r:(r+="&product="+y(t),r+="&productLocation="+c(t),a.attr("src",r))}}function ot(e){var s,l,o,a;f.getInstance(null,h(e)).checkAndShowIfNeededIneligibleAgeError()||(e=e||{},l=function(t){if(u.mobile&&window.focus(),s.close(),!!t.redirectToParentPage){u.mobile&&window.location.assign(i.decode(t.redirectToParentPage));return}ht(e,t)&&(t.roadBlockerCheck=lt(t),f.getInstance(null,h(e)).redirectToSetAuthCookieUrlIfNeed(t,"processOverlayCallback")),!!e.callbackUrl&&e.ignoreXdArguments?window.location.href=ft(t,e.callbackUrl):n.isFunction(e.callback)&&(r.isAuth41()||!t.errorMsg||alert(i.decode(t.errorMsg)),e.callback(p(t),function(){ct(t,e)}))},o=i.addQueryParameter(e.url,"provider","twitter"),o=i.addQueryParameter(o,"productLocation",c(e)),o=i.addQueryParameter(o,"domain",e.domain||document.domain),o=i.addQueryParameter(o,"ignorePostRedirect",!e.ignorePostRedirect?!1:e.ignorePostRedirect),o=i.addQueryParameter(o,"roadBlockCheckSafari",!e.roadBlockCheckSafari?!1:e.roadBlockCheckSafari),o=i.addQueryParameter(o,"callbackName",b.create(l,"ProcessDirectThirdpartyAuthCallback",!0)),o=i.addQueryParameter(o,"touch",u.mobile),o=i.addQueryParameter(o,"device",k()),o=i.addQueryParameter(o,"callbackUrlForBackButton",d()),o=i.addQueryParameter(o,"locationModifier",e.locationModifier),w()&&(o=i.addQueryParameter(o,"userProfileFollowingTabIsNeededToShow",!0)),a=f.getInstance(null,h(e)),u.ios&&u.chrome?a.getPreAuthInterimUrl(function(n){n?(n=i.addQueryParameter(n,"redirectUrl",location.href),n=i.addQueryParameter(n,"touch","true")):n=document.location.href,t.reset(),window.location.href=i.addQueryParameter(o,"callbackUrl",n)}):s=window.open(o,"TwitterAuthFacadePopup","width=800, height=500, status=1, location=1, resizable=yes"))}function ht(n,t){return!n.ignorePostRedirect&&!!t.setAuthCookieUrl}function ct(n,t){f.getInstance(null,h(t)).processAuthentication(n)}function w(){return!!l&&l.userProfileFollowingTabIsNeededToShow}function k(){return u.mobile?"2":"1"}function d(){return location.href}function lt(n){return u.safari&&!!n.roadBlockerCheck?_.isUndefined(n.roadBlockCheckSafari)?n.roadBlockerCheck:n.roadBlockCheckSafari:n.roadBlockerCheck}function at(){if(t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0){var n=t.community.directAuthDomain;return!(!n||0===n.length||/^\s*$/.test(n))}return!0}var a;return it(function(){if(!dt){dt=!0;var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");Flux4.createWidget("SocialAuth",{container:t,enableUiLayout:!1,productLocation:"Auth"},function(n){st=n,e.trigger("ThirdPartyDirectAuth.SocialAuthRendered")})}}),{isReady:v,isContextValid:at,triggerFacebookAuthFlow:nt,triggerTwitterAuthFlow:tt,processDirectFacebookAuth:et,processDirectTwitterAuth:ot,useDirectBrandAuthDomain:g}}}),hi=function(){function r(n,i){return n.needFluxProxy?"http://"+t+"/api/widgetsService/ExternalScriptProxy?uri="+n.url+"&communityUcid="+i:n.url}var t="cus.flux.com",i={twitter:{url:"http://platform.twitter.com/widgets.js",isLoaded:function(){return!!window.twttr&&!!window.twttr.widgets}},tumblr:{url:"http://platform.tumblr.com/v1/share.js",isLoaded:function(){return!1}},foursquare:{url:"https://platform.foursquare.com/js/widgets.js",isLoaded:function(){return!!window.fourSq},needFluxProxy:!0},pinterest:{url:"http://assets.pinterest.com/js/pinit.js",attributes:{"data-pin-shallow":"true","data-pin-build":"parsePinBtns"},isLoaded:function(){return window.parsePinBtns}},google:{url:"https://apis.google.com/js/platform.js",isLoaded:function(){return!!window.gapi}}};return{loadLibrary:function(t,u,f,e){var o=i[t.toLowerCase()];o&&(o.isLoaded()?u():o.isLoading?o.callbacks.push(u):(o.isLoading=!0,o.callbacks||(o.callbacks=[]),n.isFunction(u)&&o.callbacks.push(u),n.ajax({url:r(o,f),attributes:_.extend({},o.attributes,e),success:function(){delete o.isLoading,n.each(o.callbacks,function(n,t){t()}),delete o.callbacks},dataType:"script_extended"})))}}}(),jQuery.ajaxTransport("script_extended",function(n,t){if(n.crossDomain){var i,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(u,f){var e,o;if(i=document.createElement("script"),e=t.attributes,!!e)for(o in e)i.setAttribute(o,e[o]);i.async="async",n.scriptCharset&&(i.charset=n.scriptCharset),i.src=n.url,i.onload=i.onreadystatechange=function(n,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&!e&&r.removeChild(i),i=undefined,t||f(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){if(i)i.onload(0,1)}}}});var d=function(){function i(){}function r(){return typeof window.FB=="object"}function s(){return typeof window.fbAsyncInit=="function"||n("body div#fb-root").length>0}function h(){}function f(){return t.community.facebookContext}function c(t,i){r()?i():(n.ajaxSetup({cache:!0}),n.getScript(t,function(){i()}))}var u=0,e=10;return{loadFacebookJDK:!0,enabled:function(){return f()},signOut:function(n){i("Sign Out"),f()&&this.loadJdk({},function(){FB.getLoginStatus(function(t){t.session?FB.logout(n):n()})})},loadJdk:function(i,u,f){var s=n("#fb-root"),o,e;if(s.length==0&&n("body").prepend('<div id="fb-root"><\/div>'),o=(i?i.locale:null)||"en_US",e=t.community.facebookContext.useNewFacebookApi,this.loadFacebookJDK&&!window.FB)c(document.location.protocol+"//connect.facebook.com/"+o+(e?"/sdk.js":"/all.js"),function(){FB.init(n.extend({appId:i.appId||t.community.facebookContext.appId,status:!0,oauth:!0,cookie:!1,version:e?"v2.0":""},i)),u()});else{if(!r()){this.waitFacebookJdk(u,f);return}u()}},waitFacebookJdk:function(t,i){var o=function(){n.isFunction(i)&&i(),h()},c=function(){n.isFunction(t)&&t()},f;r()?c():s()?(u=0,f=setInterval(function(){r()?(clearInterval(f),c()):++u>=e&&(clearInterval(f),o())},500)):o()},getFacebookShareCounters:function(t,r,u){if(u&&!t){r({shareCount:0,followCount:0});return}if(!t){i("getFacebookShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){i("getFacebookShareCounters: callback must be specified and must be a function",!0);return}this.loadJdk({},function(){FB.getLoginStatus(function(n){var u;u=n.status==="connected"?"/?id="+encodeURIComponent(t):{method:"links.getStats",urls:encodeURIComponent(t)},FB.api(u,function(n){var t;!n||n.error_msg||n.error?(i("getFacebookShareCounters: FB API request failed",!0),r(n)):(t=n.share?n.share.share_count:n[0]&&n[0].total_count?parseInt(n[0].total_count,10):n.shares||0,r({shareCount:t,followCount:t}))})})},function(n){i("getFacebookShareCounters: failed to load JDK",!0),r({error:n})})}}}(),ai={subscribe:function(t,i,r){typeof window.FB!="object"||_.isNull(window.Fb)||(this[t]||(this[t]={},FB.Event.subscribe(t,_.bind(function(i){var r=this[t][i.toLowerCase()];n.isFunction(r)&&r()},this))),this[t][i.toLowerCase()]=r)}},vi=function(){function r(n,t){if(!window.gapi||!window.gapi.plusone){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,!n||(i.text="{lang: '"+n+"'}"),i.src="https://apis.google.com/js/plusone.js",i.onload=i.onreadystatechange=function(){window.gapi&&window.gapi.plusone&&(i.onload=i.onreadystatechange=null,i=undefined,t())},r.insertBefore(i,r.firstChild)}}var t=!1,i=[];return{loadApiScript:function(u,f){window.gapi&&window.gapi.plusone?setTimeout(f,0):(i.push(f),t||(t=!0,r(u,function(){t=!1,n.each(i,function(n,t){t()})})))},renderButton:function(n,t){if(!window.gapi||!window.gapi.plusone)throw new a("GooglePlusOneButton.renderButton: google api os not loaded. Invoke loadApiScript first.");gapi.plusone.render(n,t)}}}(),yi=function(){function r(n,t){if(!window.gapi||!window.gapi.plus){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,!n||(i.text="{lang: '"+n+"'}"),i.src="https://apis.google.com/js/plusone.js",i.onload=i.onreadystatechange=function(){window.gapi&&window.gapi.plus&&(i.onload=i.onreadystatechange=null,i=undefined,t())},r.insertBefore(i,r.firstChild)}}var t=!1,i=[];return{loadApiScript:function(u,f){window.gapi&&window.gapi.plus?setTimeout(f,0):(i.push(f),t||(t=!0,r(u,function(){t=!1,n.each(i,function(n,t){t()})})))},renderButton:function(n,t){if(!window.gapi||!window.gapi.plus)throw new a("GoogleShareButton.renderButton: google api os not loaded. Invoke loadApiScript first.");gapi.plus.render(n,t)}}}(),at=function(){function i(){}function t(t,r,u,f,e){n.when||i(funcName+": ERROR - jquery does not contain $.when (Deffered functionality), seems that jquery version is less the 1.5",!0);var o=function(){var i=n.Deferred();return d.getFacebookShareCounters(t,i.resolve,u),i.promise()},s=function(){var t=n.Deferred();return gt.getTwitterShareCounters(r,t.resolve,u),t.promise()};n.when(o(),s()).then(function(n,t){f({Facebook:n,Twitter:t})}).fail(function(t){n.isFunction(e)&&e(t)})}return{getAllShareCounters:function(n,i,r){t(n,n,!1,i,r)},getAllFollowCounters:function(n,i,r){t(n,null,!0,i,r)}}}(),gt;r("Twitter",["DAAPI"],function(t){function i(){}return gt={getTwitterShareCounters:function(r,u,f){if(f&&!r){u({shareCount:0,followCount:0});return}if(!r){i("getTwitterShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(u)){i("getTwitterShareCounters: callback must be specified and must be a function",!0);return}var e=new t("Twitter",null,[{name:"getTwitterShareCounters",template:"http://urls.api.twitter.com/1/urls/count.json?url={URL}",isAction:!1,skipAkamaiBatch:!0}],{});e.methods().getTwitterShareCounters({URL:r},function(n){u({shareCount:n.count,followCount:0})},function(n){i('getTwitterShareCounters: seems that "http://urls.api.twitter.com/1/urls/count.json?url={URL}&callback={callback}" stop working',!0),u({error:n})})}}}),r("CoreProxy",["UtilsProxy","UserAgentHelper","Authentication","UIProxy","ThirdPartyDirectAuth","DAAPI","PostAuthAction","RoadBlocker"],function(n,t,i,r,u,f,o,s){return ht=function(f,o,h){this.DAAPI=h.methods(),this.utils=new n;var c=o.controlData?o.controlData.parentName:f;this.userAgent=t,this.authentication=i.getInstance(null,c),this.UI=new r(this.authentication,f),this.performRoadBlockerCheck=function(n,t,i,r,u,f,e){return s.getInstance(!0,c).performCheck({checkFrdOnly:n,readOnlyModeHandler:t,fromSignIn:!1,title:i||undefined,eventName:r,useOriginalRedirect:u,productLocation:f||undefined,blockedAction:e})},this.needsRoadblocking=function(n){return s.getInstance(!0,c).needsRoadblocking(n)},this.thirdPartyDirectAuth=new u(c),this.initEvents=function(n){return[].concat(h.initEvents(n),this.UI.initEvents(n))},this.events=e,this.Events=p},ht.prototype={reloadWidgets:bt.reloadWidgets,loadFacebookJdk:_.bind(d.loadJdk,d),getAllShareCounters:_.bind(at.getAllShareCounters,at),getAllFollowCounters:_.bind(at.getAllFollowCounters,at),createPostAuthAction:function(n){return new o(n)},createWidgetStateContainer:function(n){return new ui(n)}},ht}),rt={smallScreen:window.matchMedia("(max-width:767px) and (orientation:portrait), (max-width:1023px) and (orientation:landscape), (max-height:660px) and (orientation:landscape)"),narrow:window.matchMedia("(max-width:767px)"),wide:window.matchMedia("(min-width:1024px)"),portrait:window.matchMedia("(orientation: portrait)")},r("UIProxy",["UserProfileHelper","UserAgentHelper","ExternalUrlOverlay","OverlayManager"],function(i,r,u,f){return ct=function(n,t){this.authentication=n,this.widgetName=t},ct.prototype={_addExternalOverlayEvent:function(t,i){var r=this.externalInterface,u,f;return r&&n.isFunction(r[i])?(u=_.bind(r[i],r),n.isFunction(t)?t.externalEventAdded||(f=_.wrap(t,function(n){n(),u()})):f=u,n.extend(f,{externalEventAdded:!0})):t},initEvents:function(t){this.externalInterface=t;var i=[f.EVENTS.OPEN,f.EVENTS.CLOSED];return n.each(i,function(){t[this]=_.noop}),i},showOverlay:function(n){n&&(n.onShowComplete=this._addExternalOverlayEvent(n.onShowComplete,f.EVENTS.OPEN),n.onClose=this._addExternalOverlayEvent(n.onClose,f.EVENTS.CLOSED),f.showOverlay(this.widgetName,n))},hideOverlay:function(n){f.hideOverlay(this.widgetName,this._addExternalOverlayEvent(n,f.EVENTS.CLOSED))},correctOverlayPosition:function(){f.correctPosition(this.widgetName)},initAuthElements:function(n,i){var u=this,f=function(n){var t={cookieEnabled:r.cookies};i=i||{},i.productLocation&&(t.productLocation=i.productLocation),i.blockedAction&&(t.blockedAction=i.blockedAction),u.authentication.signIn(n,i.title||"",t)};n.find(".signIn").click(_.bind(f,this.authentication)).end().find(".signUp").click(_.bind(this.authentication.signUp,this.authentication)).end().find(".joinCommunity").click(_.bind(this.authentication.joinCommunity,this.authentication)),!t.user&&t.community.facebookContext&&this.authentication.isNewAuth()?(n.find(".connectTo3PContainer").show(),n.find(".connectTo3P").addClass("thirdPartyAuth").click(_.bind(this.authentication.signIn,this.authentication))):n.find(".connectTo3PContainer").hide()},initLoggedUserElements:function(i,r){if(t.user){if(_this=this,t.user.communityMember&&i.find(".loggedProfileUrl").removeClass("loggedProfileUrl").wrap(n("<a>").addClass("loggedProfileUrl")).click(function(n){n.preventDefault(),_this.openUserProfile(t.user.ucid,n,t.user.profileUrl)}),r){var u=t.user.thumbnails[r];u&&i.find("img.loggedUserThumbnail").replaceWith(_this.renderUserAvatar({url:u,isFacebook:t.user&&t.user.showFacebookUserWatermark,mode:"userbar"}))}i.find(".loggedDisplayName").each(function(){n(this).html()==""&&n(this).html(t.user.name),!t.user.communityMember&&t.user.communityThirdPartyOnly&&n(this).hide()})}},isUserProfileTabEnabled:i.isTabEnabled,openUserProfile:i.openUserProfile,showExternalUrlOverlay:function(n){if(n)return u.show(this.widgetName,n)},hideExternalUrlOverlay:function(n){u.hide(n)},redirectExternalUrlOverlay:function(n,t){u.redirectToUrl(n,t)},correctExternalUrlOverlayPosition:function(n,t,i){u.correctPosition(n,t,i)},renderUserAvatar:function(n){var u=n.isFacebook?n.isFacebook:n.url.indexOf("graph.facebook.com")!=-1,t="sm4_userAvatar",i="",r="";return n.mode&&(t+=" m-sm4_userAvatar_"+n.mode),n.isSpecial&&(t+=" m-sm4_userAvatar_special",i+='<span class="e-sm4_userAvatar_icoSpecial" data-icon="&#xe00c;"><\/span>'),u&&(t+=" m-sm4_userAvatar_facebook",i+='<span class="e-sm4_userAvatar_icoFb" data-icon="&#xe001;"><\/span>'),!1&&(t+=" m-sm4_userAvatar_twitter",i+='<span class="e-sm4_userAvatar_icoTw" data-icon="&#xe003;"><\/span>'),n.width&&n.height&&(r='width="'+n.width+'" height="'+n.height+'"'),'<div class="'+t+'"><img class="e-sm4_userAvatar_thumbnail" '+r+' src="'+n.url+'" />'+i+"<\/div>"},renderUserTypeLabel:function(n,t){if(n){var i="",r=n;return n=="TopCommenter"&&(i='<span class="e-sm4_userTypeLabel_icoTopCommenter" data-icon="&#x21;"><\/span> ',r=t[n]),'<div class="sm4_userTypeLabel">'+i+r+"<\/div>"}},media:rt},ct}),r("UtilsProxy",["CookieHelper","UserProfileHelper","StringHelper","HtmlHelper","XdReceiver"],function(n,t,r,u,f){return vt=function(){this.XdReceiver=f.XdReceiver},vt.prototype={_:_,readCookie:h.getCookie,writeCookie:h.setCookie,setActivityFeedCacheCookie:h.setActivityFeedCacheCookie,isActivityFeedCacheCookieExist:h.isActivityFeedCacheCookieExist,setActivityRatingCookie:h.setActivityRatingCookie,getActivityRatingCookie:h.getActivityRatingCookie,setSentimentTagCacheCookie:h.setSentimentTagCacheCookie,isSentimentTagCacheCookieExist:h.isSentimentTagCacheCookieExist,setCookieToRootDomain:n.setCookieToRootDomain,addBigDoorCookie:ot.addBigDoorCookie,removeBigDoorCookie:ot.removeBigDoorCookie,setThirdPartyJustLoggedInCookie:ot.setThirdPartyJustLoggedInCookie,replace:r.replace,truncateString:r.truncate,camelize:r.camelize,capitalize:r.capitalize,compactNumber:r.compactNumber,validateEmail:r.isEmail,validatePhone:r.isPhone,getQueryParameter:i.getQueryParameter,getAnchorParameter:i.getAnchorParameter,removeQueryParameter:i.removeQueryParameter,trackWidget:y.trackWidget,trackForReporting:y.trackForReporting,getLoggedInUserInfo:y.getLoggedInUserInfo,generateUID:nt.generate,externalWidgets:hi,googlePlusOneButton:vi,googleShareButton:yi,registerNamedCallback:function(n){return b.create(n,null,!0)},addQueryParameter:i.addQueryParameter,addAnchorParameter:i.addAnchorParameter,getDomainName:i.getDomainName,addCultureQueryParameter:i.addCultureQueryParameter,addDeviceQueryParameter:i.addDeviceQueryParameter,getThumbnailUrl:i.getThumbnailUrl,fork:pt.fork,waterfall:pt.waterfall,storage:s,createAsyncManager:pt.createAsyncManager,facebookEvents:ai,clipboard:li.embedClipboardFlash,zeroClipboardFlashUrl:i.zeroClipboardFlashUrl,postFormRequest:w.postFormRequest,setPostContentType:w.setPostContentType,getRequest:w.getRequest,loadScript:w.loadScript,buildUrl:function(n,t){return i.buildDaapiUrl({template:n,params:t})},overrideMethod:et.overrideMethod,_template:function(n,t){return _.template(n,t,{variable:"data"})},getUserProfileUrl:t.getUserProfileUrl,getMobileUserProfileUrl:t.getMobileUserProfileUrl,openMobileUserProfile:t.openMobileUserProfile,HtmlHelper:u},vt});var f=function(){function n(n,i,r,u){var f=u?t[u]:"bottom",e={opacity:n};n=="show"&&i.css(f,"-=5px"),e[f]="+=5px",i.animate(e,{duration:200,complete:r})}var t={Up:"bottom",Down:"top",Left:"right",Right:"left"};return{fadeIn:function(n,t){n.fadeIn(400,t)},fadeOut:function(n,t){n.fadeOut(400,t)},fadeInFast:function(n,t){n.fadeIn(200,t)},fadeOutFast:function(n,t){n.fadeOut(200,t)},slideDown:function(n,t){n.slideDown(400,t)},slideUp:function(n,t){n.slideUp(400,t)},slideDownFast:function(n,t){n.slideDown(200,t)},slideUpFast:function(n,t){n.slideUp(200,t)},slideFadeIn:function(t,i,r){n("show",t,i,r)},slideFadeOut:function(t,i,r){n("hide",t,i,r)}}}(),pi={absoluteShow:f.fadeInFast,absoluteHide:f.fadeOutFast,inlineShow:f.slideDownFast,inlineHide:f.slideUpFast,notificationShow:f.fadeInFast,notificationHide:f.fadeOutFast,newItemsShow:f.slideDownFast,hideDelay:400},wi={contentShow:f.fadeInFast,show:f.slideFadeIn,hide:f.slideFadeOut,showDelay:150,hideDelay:275},bi={contentShow:f.fadeInFast,show:f.slideFadeIn,hide:f.slideFadeOut,showDelay:300,hideDelay:400},ki={contentShow:f.fadeInFast,show:f.slideFadeIn,hide:f.slideFadeOut,showDelay:200,hideDelay:400},di={contentShow:f.fadeInFast,show:f.slideFadeIn,hide:f.slideFadeOut,showDelay:200,hideDelay:400},gi={contentShow:f.fadeInFast,show:f.slideFadeIn,hide:f.slideFadeOut,showDelay:200,hideDelay:400},nr={show:f.fadeInFast,hide:f.fadeOutFast,hideDelay:300},tr={flyoutShow:f.fadeIn,flyoutHide:f.fadeOut,flyoutHideDelay:500},ir={tabContentShow:f.fadeInFast},rr={show:f.fadeInFast,shadowShow:f.fadeInFast,hide:f.fadeOutFast,shadowHide:f.fadeOutFast},ur={newActivityShow:f.slideDown,notificationHide:f.slideUp,notificationHideDelay:1e4},fr={absoluteShow:f.fadeIn,absoluteHide:f.fadeOut,absoluteHideDelay:500,inlineShow:f.slideDown,inlineHide:f.slideUp},ni={userBar:pi,tooltip:wi,badge:bi,contentQuickView:ki,flag:di,userQuickView:gi,overlay:rr,dropdown:nr,share:tr,userProfile:ir,comments:ur,follow:fr},g={};r("ExternalUrlOverlay",["OverlayManager","UrlBuilder","StringHelper","XdReceiver"],function(i,r,u,f){function v(t){_.isUndefined(t.closeOverlay)||t.closeOverlay!="true"?_.isUndefined(t.setheight)||this.setSize(t):(this.hide(),kt(t)),t.widgetName=y(e.pageUrl),n.isFunction(e.callback)&&e.callback(t)}function y(t){var f="Auth",u,e,r,i;return t&&(u=decodeURIComponent(t),u.indexOf("?")!=-1&&(e=u.split("?")[1],r={},n(e.split("&")).each(function(n,t){var i=t.split("=");r[""+i[0]]=i[1]}),r.productLocation&&(i=decodeURIComponent(r.productLocation),i.indexOf(":")!=-1&&(i=i.split(":")[0]),f=i))),f}function p(){var i=e.pageUrl,u;i=r.addQueryParameter(i,"domain",document.domain),i=r.addQueryParameter(i,"fluxHosted",t.hostedPage),u=n("<iframe>").attr({frameborder:0,marginheight:0,marginwidth:0,scrolling:"no",onmousewheel:"//don't remove this [SMWD-10263]"}).height(e.size.height).hide().load(function(){n.isFunction(e.onPageLoaded)&&e.onPageLoaded()}).appendTo(o),e.size.width&&u.width(e.size.width),h=new f.XdReceiver(u),h.loadAndListen(i,n.proxy(v,this),e.useOldReceiver)}function c(){o&&(h.stopListening(),o=null,h=null,s=null,e=null)}function l(n,t,r){i.correctPosition(s,n,t,r)}var o=null,h=null,s=null,e=null;return{show:function(t,r){if(!!o)throw new a("ExternalUrlOverlay [show] : another overlay already open. Close it first.");s=t,e=n.extend({size:{width:400,height:500},animationDuration:{fade:50,resize:50}},r),o=n(u.replace('<div style="width: {width}px;"><div class="loaderBar" align="center" style="width: {width}px; height: {height}px;"><div class="loaderIcon">&nbsp;<\/div><\/div><\/div>',e.size)),e=n.extend(e,{initContent:o,onClose:function(){c(),n.isFunction(r.onClose)&&r.onClose()},onShowComplete:n.proxy(p,this)}),i.showOverlay(s,e)},hide:function(t){if(!o){n.isFunction(t)&&t();return}i.hideOverlay(s,function(){c(),n.isFunction(t)&&t()})},setSize:function(t,i){var u,r,f;o&&(o.find(".loaderBar").length>0&&o.find(".loaderBar").remove().end().find("iframe").fadeIn(e.animationDuration.fade),u=Number(t.setheight),u!=0)&&(r=t.setwidth?Number(t.setwidth):0,f={height:u},r&&(f.width=r,o.css("width","auto")),o.find("iframe").animate(f,e.animationDuration.resize,function(){if(e){var t=r||e.alwaysCentered;t?l(!1,!e.alwaysCentered,e.resizeCallback):n.isFunction(e.resizeCallback)&&e.resizeCallback()}n.isFunction(i)&&i()}))},correctPosition:l,redirectToUrl:function(n,t){return o?(o.find("iframe").attr("src",n),this.setSize({setheight:t.height,setwidth:t.width},function(){o.find("iframe").attr("scrolling","auto")}),!0):!1}}}),r("Overlay",["UserAgentHelper","StringHelper"],function(t,i){return function(r){function y(){var t,i;if(u)return t={},t.left=Math.max((n(window).width()-u.width())/2,0),s&&(t.left+=n(window).scrollLeft()),i=document.compatMode==="CSS1Compat"?n(window).height():window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t.top=Math.max((i-u.height())/2,0),t}function a(t,i,r){var f=y(!0);i&&delete f.top,t?(u.css(f),n.isFunction(r)&&r()):u.animate(f,h.show,r)}function k(t){var i={position:s?"absolute":"fixed",top:s?n(window).scrollTop()+"px":"0px",left:"0px",width:"100%",height:"100%",zIndex:t};return n("<div>").css(i).addClass("flux4").addClass("flux4Widget")}function v(){t.android&&rt.smallScreen.matches||n("html").addClass("m-sm4_html_disableScrolling")}function d(t){if(!t.shadowCss||f.css(t.shadowCss),b?g.overlay.shadowShow(f,v):(f.show(),setTimeout(v,h.show)),!e){var i=n.extend(y(!0),{});u.children().hide(),u.css(i).css("visibility","visible"),n.isFunction(t.onStartFadeIn)&&setTimeout(function(){t.onStartFadeIn()},1),u.find(".closeButton").fadeIn(h.show/2),g.overlay.show(o,function(){n.isFunction(t.onShowComplete)&&setTimeout(function(){t.onShowComplete()},1)})}}function p(){l==="resize"?a(!0):setTimeout(function(){a(!0)},300)}var h={show:50,hide:50},f=null,e=!1,u=null,w=null,s=!1,o=null,l="onorientationchange"in window?"orientationchange":"resize",b=!t.msie||t.version>8;return{getWidgetName:function(){return r},show:function(h){if(!u&&h&&(h.initContent||h.shadowOnly)){s=t.android||t.mobile&&!rt.smallScreen.matches,e=!!h.shadowOnly;var a=k(h.zIndex);f=n("<div>").addClass("overlayShadow"),h.shadowClass&&f.addClass(h.shadowClass),a.append(f.hide()),e||(o=h.initContent.addClass("overlayContent"),u=n("<div>"),u.addClass("overlayContentWrapper").append(n('<div class="closeButton"><b>&#xe00a;<\/b><i>&#xe009;<\/i><\/div>').click(function(){c("OverlayManager").hideOverlay(r,h.onClose,!0)})).append(o),h.overlayClass&&u.addClass(h.overlayClass),a.append(n("<div>").addClass(i.camelize(r)+" sm4_overlay_wrapper").append(u))),a.appendTo(n("body")),v(),d(h),e||n(window).bind(l,p),h.maxDisplayTime&&setTimeout(function(){c("OverlayManager").hideOverlay(r,h.onClose,!0)},h.maxDisplayTime)}},hide:function(t){(u||f||!e)&&(e||(n(window).unbind(l,p),u.width(o.outerWidth()).height(o.outerHeight()),g.overlay.hide(u,function(){u.closest(".flux4").remove(),n.isFunction(t)&&setTimeout(t,1),u&&u.find("iframe").attr("src","").end().children().remove(),u=w=null})),g.overlay.shadowHide(f,function(){e&&f.parent().remove(),f=null,n("html").removeClass("m-sm4_html_disableScrolling")}))},correctPosition:function(n,t,i){a(n,t,i)}}}}),r("OverlayManager",["Overlay","WidgetManager","GlobalEvents","UserAgentHelper"],function(t,r,u,f){function a(n){for(var t=o.length-1;t>=0;t--)if(o[t].getWidgetName()==n)return t;return-1}function w(n){e=e?n.zIndex?Math.max(n.zIndex,e+1):e+1:n.zIndex||p}function b(){var u=location.href;!i.getQueryParameter(u,"openUserProfile")&&!i.getAnchorParameter(u,"openUserProfile")||i.getQueryParameter(u,"userprofileSettings")||i.getQueryParameter(u,"touch")=="true"||(s=new t(""),n(function(){s.show({shadowClass:"auth41",zIndex:999,shadowOnly:!0}),setTimeout(function(){if(!r.tryGetWidgetByName("UserProfile")&&!r.isLoadingSingleton("userprofile")){var t=n('<div id="openUserProfile"><\/div>').appendTo("body");c("Core").createWidget("UserProfile",{container:t})}},5e3)}))}function k(t){var i=n('<div class="confirmationContent"><div class="confirmField"><strong><span class="confirmMsg"><\/span><\/strong><div class="buttonsLine"><a class="btnCancel"><\/a><a class="primaryButton btnPost"><\/a><\/div><\/div><\/div>');return i.find(".confirmMsg").html(t.msg),i.find(".btnCancel").html(t.cancelLbl),i.find(".btnPost").html(t.yesLbl),!t.className||i.addClass(t.className),i}function v(n,t){var i=document.createElement("iframe"),r;i.setAttribute("src","data:text/plain"),document.documentElement.appendChild(i),r=i.contentWindow[t](n.msg),t=="confirm"&&r?n.onConfirm():_.isFunction(n.onClose)&&n.onClose(),i.parentNode.removeChild(i)}function y(n){return f.mobile&&rt.narrow.matches&&(_.isBoolean(n)?n:!0)}var o=[],p=9999,e=null,s=null,h={OPEN:"onOverlayOpen",OPENED:"onOverlayOpened",CLOSED:"onOverlayClosed",CANCELLED:"OverlayCancelled"},l={EVENTS:h,showOverlay:function(n,i){!s||s.hide();var r=new t(n);w(i),i.zIndex=e,o.push(r),r.show(i),u.trigger(h.OPENED,n)},confirm:function(n,t){if(y(t.nativePopupOnMobile)){v(t,"confirm");return}var i=k(t);i.find(".btnPost").click(function(){l.hideOverlay(n),typeof t.onConfirm=="function"&&t.onConfirm()}),i.find(".btnCancel").click(function(){l.hideOverlay(n)}),l.showOverlay(n,{initContent:i,shadowCss:t.shadowCss})},tryOpenUserProfileOverlayViaDeeplink:b,hideOverlay:function(t,i,r){var f=a(t);f>-1&&(o[f].hide(function(){n.isFunction(i)&&i(),r&&u.trigger(h.CANCELLED),u.trigger(h.CLOSED,t)}),e--,o.splice(f,1)),o.length==0&&(e=null)},correctPosition:function(n,t,i,r){var u=a(n);u>-1&&o[u].correctPosition(t,i,r)},alert:function(t,i){if(y(i.nativePopupOnMobile)){v(i,"alert");return}i.initContent=n('<div class="confirmationContent"><div class="confirmField alert"><strong><span class="confirmMsg">'+i.msg+"<\/span><\/strong><\/div><\/div>"),this.showOverlay(t,i)}};return l}),ut=function(){var r=[],y=r.push,f=r.slice,w=r.splice,t=function(n,t){var i=n||{};t||(t={}),this.cid=_.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),this.initialize.apply(this,arguments)},e,o,h;_.extend(t.prototype,p,{idAttribute:"id",initialize:_.noop,set:function(n,t,i){var r;if(n==null)return this;if(typeof n=="object"?(r=n,i=t):(r={})[n]=t,i||(i={}),!this._validate(r,i))return!1;this.initialize.call(this,r,i),this.trigger("change",this,i)},destroy:function(n){n||(n={}),n.silent||this.trigger("destroy",this,this.collection,n)},isValid:function(n){return this._validate({},_.extend(n||{},{validate:!0}))},_validate:function(n,t){if(!t.validate||!this.validate)return!0;n=_.extend({},this.attributes,n);var i=this.validationError=this.validate(n,t)||null;return i?(this.trigger("invalid",this,i,_.extend(t,{validationError:i})),!1):!0}});var i=function(n,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),n&&this.reset(n,_.extend({silent:!0},t))},c={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1};_.extend(i.prototype,p,{model:t,initialize:_.noop,toJSON:function(n){return this.map(function(t){return t.toJSON(n)})},add:function(n,t){return this.set(n,_.extend({merge:!1},t,l))},remove:function(n,t){var f=!_.isArray(n),r,e,u,i;for(n=f?[n]:_.clone(n),t||(t={}),r=0,e=n.length;r<e;r++)(i=n[r]=this.get(n[r]),i)&&(delete this._byId[i.id],delete this._byId[i.cid],u=this.indexOf(i),this.models.splice(u,1),this.length--,t.silent||(t.index=u,i.trigger("remove",i,this,t)),this._removeReference(i,t));return f?n[0]:n},set:function(n,i){var v,k;i=_.defaults({},i,c),i.parse&&(n=this.parse(n,i)),v=!_.isArray(n),n=v?n?[n]:[]:_.clone(n);for(var d,u,f,h,l,y=i.at,nt=this.model,p=this.comparator&&y==null&&i.sort!==!1,tt=_.isString(this.comparator)?this.comparator:null,o=[],w=[],a={},g=i.add,it=i.merge,b=i.remove,s=!p&&g&&b?[]:!1,r=0,e=n.length;r<e;r++){if(f=n[r]||{},d=f instanceof t?u=f:f[nt.prototype.idAttribute||"id"],h=this.get(d))b&&(a[h.cid]=!0),it&&(f=f===u?u.attributes:f,i.parse&&(f=h.parse(f,i)),h.set(f,i),p&&!l&&h.hasChanged(tt)&&(l=!0)),n[r]=h;else if(g){if(u=n[r]=this._prepareModel(f,i),!u)continue;o.push(u),this._addReference(u,i)}u=h||u,s&&(u.isNew()||!a[u.id])&&s.push(u),a[u.id]=!0}if(b){for(r=0,e=this.length;r<e;++r)a[(u=this.models[r]).cid]||w.push(u);w.length&&this.remove(w,i)}if(o.length||s&&s.length)if(p&&(l=!0),this.length+=o.length,y!=null)for(r=0,e=o.length;r<e;r++)this.models.splice(y+r,0,o[r]);else for(s&&(this.models.length=0),k=s||o,r=0,e=k.length;r<e;r++)this.models.push(k[r]);if(l&&this.sort({silent:!0}),!i.silent){for(r=0,e=o.length;r<e;r++)(u=o[r]).trigger("add",u,this,i);(l||s&&s.length)&&this.trigger("sort",this,i)}return v?n[0]:n},reset:function(n,t){t||(t={});for(var i=0,r=this.models.length;i<r;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),n=this.add(n,_.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),n},push:function(n,t){return this.add(n,_.extend({at:this.length},t))},pop:function(n){var t=this.at(this.length-1);return this.remove(t,n),t},unshift:function(n,t){return this.add(n,_.extend({at:0},t))},shift:function(n){var t=this.at(0);return this.remove(t,n),t},slice:function(){return f.apply(this.models,arguments)},get:function(n){if(n!=null)return this._byId[n]||this._byId[n.id]||this._byId[n.cid]},at:function(n){return this.models[n]},sort:function(n){if(!this.comparator)throw new a("Cannot sort a set without a comparator");return n||(n={}),_.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),n.silent||this.trigger("sort",this,n),this},create:function(n,t){if(t=t?_.clone(t):{},!(n=this._prepareModel(n,t)))return!1;t.wait||this.add(n,t);var r=this,i=t.success;return t.success=function(n,u){t.wait&&r.add(n,t),i&&i(n,u,t)},n.save(null,t),n},parse:function(n){return n},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(n,i){if(n instanceof t)return n;i=i?_.clone(i):{},i.collection=this;var r=new this.model(n,i);return r.validationError?(this.trigger("invalid",this,r.validationError,i),!1):r},_addReference:function(n){this._byId[n.cid]=n,n.id!=null&&(this._byId[n.id]=n),n.collection||(n.collection=this);n.on("all",this._onModelEvent,this)},_removeReference:function(n){this===n.collection&&delete n.collection,n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){(n!=="add"&&n!=="remove"||i===this)&&(n==="destroy"&&this.remove(t,r),t&&n==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),e=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],_.each(e,function(n){i.prototype[n]=function(){var t=f.call(arguments);return t.unshift(this.models),_[n].apply(_,t)}}),o=["groupBy","countBy","sortBy","indexBy"],_.each(o,function(n){i.prototype[n]=function(t,i){var r=_.isFunction(t)?t:function(n){return n.get(t)};return _[n](this.models,r,i)}});var u=function(n){this.cid=_.uniqueId("view"),n||(n={}),_.extend(this,_.pick(n,s)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,s=["model","collection","el","id","attributes","className","tagName","events"];return _.extend(u.prototype,p,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:_.noop,render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof n?t:n(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(n){var i,t;if(!(n||(n=_.result(this,"events"))))return this;this.undelegateEvents();for(i in n)if(t=n[i],_.isFunction(t)||(t=this[n[i]]),t){var u=i.match(v),r=u[1],f=u[2];if(t=_.bind(t,this),r+=".delegateEvents"+this.cid,f==="")this.$el.on(r,t);else this.$el.on(r,f,t)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var t,i;this.el?this.setElement(_.result(this,"el"),!1):(t=_.extend({},_.result(this,"attributes")),this.id&&(t.id=_.result(this,"id")),this.className&&(t["class"]=_.result(this,"className")),i=n("<"+_.result(this,"tagName")+">").attr(t),this.setElement(i,!1))}}),h=function(n,t){var r=this,i,u;return i=n&&_.has(n,"constructor")?n.constructor:function(){return r.apply(this,arguments)},_.extend(i,r,t),u=function(){this.constructor=i},u.prototype=r.prototype,i.prototype=new u,n&&_.extend(i.prototype,n),i.__super__=r.prototype,i},t.extend=i.extend=u.extend=h,s.push("parent"),{Model:t,Collection:i,View:u}}(),function(n){n.apply=function(i,u){function e(n){return f.clientId+(n?"."+n:"")}function s(n){return n.replace(/^__super__/,i.__super__.thisProxy.clientId)}var o={},f=i.thisProxy;f.require=function(n,t){return c(e(n),t)},f.define=function(n,t,u){var l,a,f,h;if(o[n])throw'Module "'+n+'" already defined';else o[n]=!0;if(n=="MainView"&&(this._isMVC=!0),n=e(n),l=c(n),l)return l;for(a=!1,f=0;_.isArray(t)&&f<t.length;f++)h=t[f],h.match(/^__super__/)?i.__super__?t[f]=s(h):a=!0:h.match(/^[^\.]+$/)&&(t[f]=e(h));if(a)i.on("superWidgetLoaded",function(){var i=_.map(t,function(n){return s(n)});r(n,i,u)});else return r(n,t,u)},f.define("Model",function(){return n.Model}),f.define("Collection",function(){return n.Collection}),f.define("View",function(){return n.View.extend({template:function(n,t){return u.utils._template(f.markup[n],t)},markup:function(n){var t=this.constructor.prototype;return t._templates=t._templates||{},t._templates[n]||(t._templates[n]=_.template(f.markup[n],null,{variable:"view"})),t._templates[n](this)},track:function(n){var i=_.extend({communityUcid:t.community.ucid,userUcid:t.user?t.user.ucid:"",product:f.settings.product,productLocation:f.settings.productLocation,contentUri:""},n);f.settings.device&&(i.device=f.settings.device),f.settings.contentId&&(i.contentUcid=f.settings.contentId),u.utils.trackForReporting(i)}})}),f.define("WidgetView",["View"],function(t){return t.extend(_.extend({create:function(){f.createWidget(this.name,this.settings,this.enable)}},n._WidgetViewProto))}),f.define("ControlView",["View"],function(t){return t.extend(_.extend({create:function(){f.createControl(this.name,this.settings,this.enable)}},n._WidgetViewProto))}),f.define("RoadBlockableView",["View"],function(t){return t.extend(_.extend({_performCheck:u.performRoadBlockerCheck},n._RoadBlockableViewProto))})}}(ut),ut._RoadBlockableViewProto={initialize:function(){_.bindAll(this,"_execute"),this._postAuth().tryExecute(this._execute)},reload:function(){this._postAuth().tryExecute(this._execute)},_execute:function(){var n=Array.prototype.slice.call(arguments);this[n.pop()].apply(this,n)},_postAuth:function(){return!this.__postAuth&&this.hashCode&&(this.__postAuth=ht.prototype.createPostAuthAction(this.hashCode)),this.__postAuth},ensureRoadBlockable:function(){var t=Array.prototype.slice.call(arguments),i=typeof t[t.length-1]=="object"?t.pop():{},n=this;_.each(t,function(t){var r=n[t];n[t]=_.bind(function(){var u=Array.prototype.slice.call(arguments),f;n._performCheck(!1,null,null,null,null,i.productLocation,i.blockedAction)?r.apply(n,u):(f=n._postAuth(),u.push(t),f.save.apply(f,u))},n)})}},ut._WidgetViewProto={initialize:function(){_.bindAll(this,"enable"),this.settings={}},enable:function(n){this.widget=n,this.trigger("load")},ensureLoaded:function(){var t=Array.prototype.slice.call(arguments),n=this;_.each(t,function(t){var i=n[t];n[t]=_.bind(function(){var t=Array.prototype.slice.call(arguments);if(n.widget)i.apply(n,t);else n.on("load",function(){i.apply(n,t)},n)},n)})}},function(n,t){function dt(n){for(var i,r="",t=0;t+3<=n.length;t+=3)i=parseInt(n.substring(t,t+3),16),r+=l.charAt(i>>6)+l.charAt(i&63);for(t+1==n.length?(i=parseInt(n.substring(t,t+1),16),r+=l.charAt(i<<2)):t+2==n.length&&(i=parseInt(n.substring(t,t+2),16),r+=l.charAt(i>>2)+l.charAt((i&3)<<4));(r.length&3)>0;)r+=ot;return r}function lt(n){for(var t="",i=0,r,u=0;u<n.length;++u){if(n.charAt(u)==ot)break;(v=l.indexOf(n.charAt(u)),v<0)||(i==0?(t+=s(v>>2),r=v&3,i=1):i==1?(t+=s(r<<2|v>>4),r=v&15,i=2):i==2?(t+=s(r),t+=s(v>>2),r=v&3,i=3):(t+=s(r<<2|v>>4),t+=s(v&15),i=0))}return i==1&&(t+=s(r<<2)),t}function i(n,t,i){n!=null&&("number"==typeof n?this.fromNumber(n,t,i):t==null&&"string"!=typeof n?this.fromString(n,256):this.fromString(n,t))}function o(){return new i(null)}function gt(n,t,i,r,u,f){while(--f>=0){var e=t*this[n++]+i[r]+u;u=Math.floor(e/67108864),i[r++]=e&67108863}return u}function ni(n,t,i,r,u,f){for(var o=t&32767,s=t>>15;--f>=0;){var e=this[n]&32767,h=this[n++]>>15,c=s*e+h*o;e=o*e+((c&32767)<<15)+i[r]+(u&1073741823),u=(e>>>30)+(c>>>15)+s*h+(u>>>30),i[r++]=e&1073741823}return u}function ti(n,t,i,r,u,f){for(var o=t&16383,s=t>>14;--f>=0;){var e=this[n]&16383,h=this[n++]>>14,c=s*e+h*o;e=o*e+((c&16383)<<14)+i[r]+u,u=(e>>28)+(c>>14)+s*h,i[r++]=e&268435455}return u}function s(n){return kt.charAt(n)}function ii(n,t){var i=b[n.charCodeAt(t)];return i==null?-1:i}function ri(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t,n.s=this.s}function ui(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function at(n){var t=o();return t.fromInt(n),t}function fi(n,t){var u,f;if(t==16)u=4;else if(t==8)u=3;else if(t==256)u=8;else if(t==2)u=1;else if(t==32)u=5;else if(t==4)u=2;else{this.fromRadix(n,t);return}this.t=0,this.s=0;for(var e=n.length,o=!1,r=0;--e>=0;){if(f=u==8?n[e]&255:ii(n,e),f<0){n.charAt(e)=="-"&&(o=!0);continue}o=!1,r==0?this[this.t++]=f:r+u>this.DB?(this[this.t-1]|=(f&(1<<this.DB-r)-1)<<r,this[this.t++]=f>>this.DB-r):this[this.t-1]|=f<<r,r+=u,r>=this.DB&&(r-=this.DB)}u==8&&(n[0]&128)!=0&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),o&&i.ZERO.subTo(this,this)}function ei(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function oi(n){var t;if(this.s<0)return"-"+this.negate().toString(n);if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else return this.toRadix(n);var o=(1<<t)-1,u,f=!1,e="",r=this.t,i=this.DB-r*this.DB%t;if(r-->0)for(i<this.DB&&(u=this[r]>>i)>0&&(f=!0,e=s(u));r>=0;)i<t?u=(this[r]&(1<<i)-1)<<t-i|this[--r]>>(i+=this.DB-t):(u=this[r]>>(i-=t)&o,i<=0&&(i+=this.DB,--r)),u>0&&(f=!0),f&&(e+=s(u));return f?e:"0"}function si(){var n=o();return i.ZERO.subTo(this,n),n}function hi(){return this.s<0?this.negate():this}function ci(n){var t=this.s-n.s,i;if(t!=0)return t;if(i=this.t,t=i-n.t,t!=0)return this.s<0?-t:t;while(--i>=0)if((t=this[i]-n[i])!=0)return t;return 0}function it(n){var i=1,t;return(t=n>>>16)!=0&&(n=t,i+=16),(t=n>>8)!=0&&(n=t,i+=8),(t=n>>4)!=0&&(n=t,i+=4),(t=n>>2)!=0&&(n=t,i+=2),(t=n>>1)!=0&&(n=t,i+=1),i}function li(){return this.t<=0?0:this.DB*(this.t-1)+it(this[this.t-1]^this.s&this.DM)}function ai(n,t){for(var i=this.t-1;i>=0;--i)t[i+n]=this[i];for(i=n-1;i>=0;--i)t[i]=0;t.t=this.t+n,t.s=this.s}function vi(n,t){for(var i=n;i<this.t;++i)t[i-n]=this[i];t.t=Math.max(this.t-n,0),t.s=this.s}function yi(n,t){for(var u=n%this.DB,e=this.DB-u,o=(1<<e)-1,r=Math.floor(n/this.DB),f=this.s<<u&this.DM,i=this.t-1;i>=0;--i)t[i+r+1]=this[i]>>e|f,f=(this[i]&o)<<u;for(i=r-1;i>=0;--i)t[i]=0;t[r]=f,t.t=this.t+r+1,t.s=this.s,t.clamp()}function pi(n,t){var i,r;if(t.s=this.s,i=Math.floor(n/this.DB),i>=this.t){t.t=0;return}var u=n%this.DB,f=this.DB-u,e=(1<<u)-1;for(t[0]=this[i]>>u,r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&e)<<f,t[r-i]=this[r]>>u;u>0&&(t[this.t-i-1]|=(this.s&e)<<f),t.t=this.t-i,t.clamp()}function wi(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]-n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i-=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i-=n[r],t[r++]=i&this.DM,i>>=this.DB;i-=n.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()}function bi(n,t){var u=this.abs(),f=n.abs(),r=u.t;for(t.t=r+f.t;--r>=0;)t[r]=0;for(r=0;r<f.t;++r)t[r+u.t]=u.am(0,f[r],t,r,0,u.t);t.s=0,t.clamp(),this.s!=n.s&&i.ZERO.subTo(t,t)}function ki(n){for(var i=this.abs(),t=n.t=2*i.t,r;--t>=0;)n[t]=0;for(t=0;t<i.t-1;++t)r=i.am(t,i[t],n,2*t,0,1),(n[t+i.t]+=i.am(t+1,2*i[t],n,2*t+1,r,i.t-t-1))>=i.DV&&(n[t+i.t]-=i.DV,n[t+i.t+1]=1);n.t>0&&(n[n.t-1]+=i.am(t,i[t],n,2*t,0,1)),n.s=0,n.clamp()}function di(n,t,r){var s=n.abs(),l,f,a,v;if(!(s.t<=0)){if(l=this.abs(),l.t<s.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=o());var u=o(),p=this.s,b=n.s,c=this.DB-it(s[s.t-1]);if(c>0?(s.lShiftTo(c,u),l.lShiftTo(c,r)):(s.copyTo(u),l.copyTo(r)),f=u.t,a=u[f-1],a!=0){var w=a*(1<<this.F1)+(f>1?u[f-2]>>this.F2:0),k=this.FV/w,d=(1<<this.F1)/w,g=1<<this.F2,h=r.t,y=h-f,e=t==null?o():t;for(u.dlShiftTo(y,e),r.compareTo(e)>=0&&(r[r.t++]=1,r.subTo(e,r)),i.ONE.dlShiftTo(f,e),e.subTo(u,u);u.t<f;)u[u.t++]=0;while(--y>=0)if(v=r[--h]==a?this.DM:Math.floor(r[h]*k+(r[h-1]+g)*d),(r[h]+=u.am(0,v,r,y,0,f))<v)for(u.dlShiftTo(y,e),r.subTo(e,r);r[h]<--v;)r.subTo(e,r);t!=null&&(r.drShiftTo(f,t),p!=b&&i.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),p<0&&i.ZERO.subTo(r,r)}}}function gi(n){var t=o();return this.abs().divRemTo(n,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&n.subTo(t,t),t}function a(n){this.m=n}function nr(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n}function tr(n){return n}function ir(n){n.divRemTo(this.m,null,n)}function rr(n,t,i){n.multiplyTo(t,i),this.reduce(i)}function ur(n,t){n.squareTo(t),this.reduce(t)}function fr(){var t,n;return this.t<1?0:(t=this[0],(t&1)==0)?0:(n=t&3,n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV,n>0?this.DV-n:-n)}function y(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function er(n){var t=o();return n.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),n.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t}function or(n){var t=o();return n.copyTo(t),this.reduce(t),t}function sr(n){for(var i,t,r;n.t<=this.mt2;)n[n.t++]=0;for(i=0;i<this.m.t;++i)for(t=n[i]&32767,r=t*this.mpl+((t*this.mph+(n[i]>>15)*this.mpl&this.um)<<15)&n.DM,t=i+this.m.t,n[t]+=this.m.am(0,r,n,i,0,this.m.t);n[t]>=n.DV;)n[t]-=n.DV,n[++t]++;n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function hr(n,t){n.squareTo(t),this.reduce(t)}function cr(n,t,i){n.multiplyTo(t,i),this.reduce(i)}function lr(){return(this.t>0?this[0]&1:this.s)==0}function ar(n,t){var f;if(n>4294967295||n<1)return i.ONE;var r=o(),u=o(),e=t.convert(this),s=it(n)-1;for(e.copyTo(r);--s>=0;)t.sqrTo(r,u),(n&1<<s)>0?t.mulTo(u,e,r):(f=r,r=u,u=f);return t.revert(r)}function vr(n,t){var i;return i=n<256||t.isEven()?new a(t):new y(t),this.exp(n,i)}function rt(){this.i=0,this.j=0,this.S=[]}function yr(n){for(var i,r,t=0;t<256;++t)this.S[t]=t;for(i=0,t=0;t<256;++t)i=i+this.S[t]+n[t%n.length]&255,r=this.S[t],this.S[t]=this.S[i],this.S[i]=r;this.i=0,this.j=0}function pr(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]}function wr(){return new rt}function br(n){u[r++]^=n&255,u[r++]^=n>>8&255,u[r++]^=n>>16&255,u[r++]^=n>>24&255,r>=nt&&(r-=nt)}function vt(){br((new Date).getTime())}function kr(){if(tt==null){for(vt(),tt=wr(),tt.init(u),r=0;r<u.length;++r)u[r]=0;r=0}return tt.next()}function dr(n){for(var t=0;t<n.length;++t)n[t]=kr()}function yt(){}function gr(n,t){return new i(n,t)}function nu(n,t){for(var r="",i=0;i+t<n.length;)r+=n.substring(i,i+t)+"\n",i+=t;return r+n.substring(i,n.length)}function tu(n,t){var r,e,u,o,f;if(t<n.length+11)return alert("Error 16234"),null;for(r=[],e=n.length-1;e>=0&&t>0;)u=n.charCodeAt(e--),u<128?r[--t]=u:u>127&&u<2048?(r[--t]=u&63|128,r[--t]=u>>6|192):(r[--t]=u&63|128,r[--t]=u>>6&63|128,r[--t]=u>>12|224);for(r[--t]=0,o=new yt,f=[];t>2;){for(f[0]=0;f[0]==0;)o.nextBytes(f);r[--t]=f[0]}return r[--t]=2,r[--t]=0,new i(r)}function k(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function iu(n,t){n!=null&&t!=null&&n.length>0&&t.length>0?(this.n=gr(n,16),this.e=parseInt(t,16)):alert("Error 27561")}function ru(n){return n.modPowInt(this.e,this.n)}function uu(n){var r=tu(n,this.n.bitLength()+7>>3),i,t;return r==null?null:(i=this.m0(r),i==null)?null:(t=i.toString(16),(t.length&1)==0?t:"0"+t)}var c=self,d="PR".toLowerCase().concat("otot","ype"),fu="bo".slice()+"dy",ut="d".toUpperCase().replace('*_";',"")+"ata",eu="ke"+"y".slice(),ft="|",ou="i".slice(0)+"sVal".replace('*_";',"")+"id"+ut,su=d.slice(0,2)+"e".replace("><~#","")+"e|pa".split(ft)[1]+"re"+ut,pt="A"+"CTIV".toLowerCase()+"itie".replace('*_z";',"").concat("sD","ata"),wt="Ti".slice(0)+"meSe".replace('*_wd";',"").concat("r","ver"),hu="f".toUpperCase()+"lu".replace("><!~#","")+"xS".slice(0)+"bo|tate".split(ft)[1],et,cu=new c["Da".slice(0)+"TE".toLowerCase()],w,l,ot,h,bt,st,g,kt,b,p,f,nt,tt,u,r,e,ht,ct;for(n(function(){n(fu).on(eu+"down",function(){et++})}),t[d][ou]=function(n){return n&&n[pt]&&n[wt]?(w=new k,w.m1(lt(n[pt]),lt(n[wt])),et=d.split(",").length,!!w):!!n},t[d][su]=function(n){var t=new c[ut.replace("ta","te")],i=et+ft+Math.floor((t-cu)/1e3);n[hu]=w?dt(nu(w.m2(i)),64):""},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot="=",bt=0xdeadbeefcafe,st=(bt&16777215)==15715070,st&&navigator.appName=="Microsoft Internet Explorer"?(i.prototype.am=ni,h=30):st&&navigator.appName!="Netscape"?(i.prototype.am=gt,h=26):(i.prototype.am=ti,h=28),i.prototype.DB=h,i.prototype.DM=(1<<h)-1,i.prototype.DV=1<<h,g=52,i.prototype.FV=Math.pow(2,g),i.prototype.F1=g-h,i.prototype.F2=2*h-g,kt="0123456789abcdefghijklmnopqrstuvwxyz",b=[],p="0".charCodeAt(0),f=0;f<=9;++f)b[p++]=f;for(p="a".charCodeAt(0),f=10;f<36;++f)b[p++]=f;for(p="A".charCodeAt(0),f=10;f<36;++f)b[p++]=f;if(a.prototype.convert=nr,a.prototype.revert=tr,a.prototype.reduce=ir,a.prototype.mulTo=rr,a.prototype.sqrTo=ur,y.prototype.convert=er,y.prototype.revert=or,y.prototype.reduce=sr,y.prototype.mulTo=cr,y.prototype.sqrTo=hr,i.prototype.copyTo=ri,i.prototype.fromInt=ui,i.prototype.fromString=fi,i.prototype.clamp=ei,i.prototype.dlShiftTo=ai,i.prototype.drShiftTo=vi,i.prototype.lShiftTo=yi,i.prototype.rShiftTo=pi,i.prototype.subTo=wi,i.prototype.multiplyTo=bi,i.prototype.squareTo=ki,i.prototype.divRemTo=di,i.prototype.invDigit=fr,i.prototype.isEven=lr,i.prototype.exp=ar,i.prototype.toString=oi,i.prototype.negate=si,i.prototype.abs=hi,i.prototype.compareTo=ci,i.prototype.bitLength=li,i.prototype.mod=gi,i.prototype.modPowInt=vr,i.ZERO=at(0),i.ONE=at(1),rt.prototype.init=yr,rt.prototype.next=pr,nt=256,u==null){if(u=[],r=0,c.crypto&&c.crypto.getRandomValues)for(ht=new Uint8Array(32),c.crypto.getRandomValues(ht),e=0;e<32;++e)u[r++]=ht[e];if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&c.crypto)for(ct=c.crypto.random(32),e=0;e<ct.length;++e)u[r++]=ct.charCodeAt(e)&255;while(r<nt)e=Math.floor(65536*Math.random()),u[r++]=e>>>8,u[r++]=e&255;r=0,vt()}yt.prototype.nextBytes=dr,k.prototype.m0=ru,k.prototype.m1=iu,k.prototype.m2=uu}(jQuery,vt),c("Core",function(n){n.initialize(!1,!0,!0,!1)})}(jQuery)}})()